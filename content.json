{"posts":[{"title":"Knot-ResolverでAndroid向けの広告をブロック","text":"概要Knot-Resolverを使い、Androidの「プライベートDNS設定」で利用できるDoTサーバーを構築しますまた、RPZゾーンの機能を利用し広告ブロックも行います DoTを利用するには何でもいいのでドメインが必要になります。ドメインを持っていない人はMyDNSなど、無料の物を利用してもかまいません。 環境12$ cat /etc/redhat-releaseRed Hat Enterprise Linux release 9.3 (Plow) EPELを有効にする今回はRHELを使用しているので、Subscription ManagerからEPELを有効にしていきます 12$ sudo subscription-manager repos --enable codeready-builder-for-rhel-9-$(arch)-rpms$ sudo dnf install https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm knot-resolverをインストールするknot-resolverはdnfからすんなりインストールできます 1$ sudo dnf install knot-resolver RPZゾーンファイルを用意するdns-blというRPZを自動生成するスクリプトを利用します。かなり古いですが、正常動作を確認しています。 dns-blのインストール12$ cd /opt/$ sudo https://github.com/p7cq/dns-bl.git configファイルの編集1$ sudo vim /opt/dns-bl/conf/dns-bl.ini 複数の広告除去用hostsファイルやマルウェア配布URLリストを指定したコンフィグを例示します。コピペで上書きしてください 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647[global]rpz_file = /etc/knot-resolver/rpz.zoneredirect = IN CNAME .# whitelisted domainswhitelist_file_prefix = whitelist_[source/1]url = https://urlhaus.abuse.ch/downloads/hostfile/file_type = textcategories = malwareenabled = yes[source/2]url = https://raw.githubusercontent.com/blocklistproject/Lists/master/alt-version/ads-nl.txtfile_type = textcategories = adsenabled = yes[source/3]url = https://logroid.github.io/adaway-hosts/hosts.txtfile_type = textcategories = adsenabled = yes[source/4]url = https://adaway.org/hosts.txtfile_type = textcategories = adsenabled = yes[source/5]url = https://warui.intaa.net/adhosts/hosts_lb.txtfile_type = textcategories = adsenabled = yes[source/6]url = https://raw.githubusercontent.com/StevenBlack/hosts/master/hostsfile_type = textcategories = adsenabled = yes[source/7]url = https://pgl.yoyo.org/adservers/serverlist.php?hostformat=hosts&amp;showintro=0&amp;mimetype=plaintextfile_type = textcategories = adsenabled = yes 自動更新スクリプトの作成dns-blを定期的に実行してrpzファイルを更新するスクリプトを作成します。本記事ではこのスクリプトを/root/scripts/rpz_update.shという名前で保存しています。 12$ sudo su# vim /root/scripts/rpz_update.sh 以下のシェルスクリプトをコピペで上書きしてください。 12345#!/bin/bash/opt/dns-bl/bin/run.shchown knot-resolver:knot-resolver /etc/knot-resolver/rpz.zonerestorecon -FR /etc/knot-resolver/systemctl restart kresd@* その後、実行権限を付与してください 1# chmod +x /root/scripts/rpz_update.sh Cron設定cronに上記スクリプトを登録します 1# sudo crontab -e テキストエディタが開いたら以下のように入力してください(毎日00:00に更新) 10 0 * * * /bin/bash /root/scripts/rpz_update.sh ZeroSSLで証明書を取得するZeroSSLからTLSサーバ証明書を取得します。※LetsEncryptを使用するとAndroidの一部のバージョンでは正常に利用できません 以下の記事を参考に証明書ファイルをダウンロードしてください。ブラウザから無料で簡単に証明書を発行できる ZeroSSL | DevelopersIO その後、取得した証明書はサーバの/etc/knot-resolver/に保存します。 この記事では秘密鍵をprivkey.pem証明書をfullchain.pemという名前で保存しています。別の名前で保存した場合は設定ファイルの1行目を書き換えてください。 knot-resolverの設定Configを編集します 1$ sudo vim /etc/knot-resolver/kresd.conf 以下のconfigをコピペで上書きしてください 123456789101112131415net.tls(&quot;/etc/knot-resolver/fullchain.pem&quot;,&quot;/etc/knot-resolver/privkey.pem&quot;)net.listen('0.0.0.0', 53, { kind = 'dns' })net.listen('0.0.0.0', 853, { kind = 'tls' })modules = { 'hints &gt; iterate', 'stats', 'predict', 'view',}view:addr('192.168.0.0/16',policy.all(policy.PASS))view:addr('172.16.0.0/12',policy.all(policy.PASS))view:addr('10.0.0.0/8',policy.all(policy.PASS))view:addr('0.0.0.0/0',policy.all(policy.TC))policy.add(policy.rpz(policy.DENY, '/etc/knot-resolver/rpz.zone'))log_level('warning') kresdを起動はじめに自動更新スクリプトを手動で実行し、RPZファイルを事前生成しておきます実行に成功すると生成されたゾーンファイルの行数か何かが出力されます。 123$ sudo su# /root/scripts/rpz_update.sh346934 kresdを起動します 12$ sudo systemctl enable kresd@1$ sudo systemctl start kresd@1 動作確認123456789101112131415C:\\Users\\admin&gt;nslookup google.com &lt;サーバIP&gt;サーバー: UnKnownAddress: &lt;サーバIP&gt;権限のない回答:名前: google.comAddresses: 2404:6800:4004:823::200e 142.250.199.110C:\\Users\\admin&gt;nslookup ads.google.com &lt;サーバIP&gt;サーバー: UnKnownAddress: &lt;サーバIP&gt;*** UnKnown が ads.google.com を見つけられません: Non-existent domain 参考資料How to install EPEL on RHEL and CentOS Stream | Enable Sysadminブラウザから無料で簡単に証明書を発行できる ZeroSSL | DevelopersIOConfiguration Overview — Knot Resolver 5.7.1 documentation","link":"/2024/03/10/Knot-Resolver%E3%81%A7Android%E5%90%91%E3%81%91%E3%81%AE%E5%BA%83%E5%91%8A%E3%82%92%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF/"},{"title":"LGPO.exeでGPO(グループポリシー)をバックアップ・管理する","text":"概要LGPO.exeを使ってローカルグループポリシーをバックアップおよび復元する方法と，自作の簡易的なバックアップ管理ツールを紹介します． パソコンの移行時やキッティングに活用ください．また，WindowsのProエディションで適用しているGPOをHomeエディションに移植できるという小ネタにもなります． LGPO.exeのダウンロードダウンロードページを開き，Downlaodをクリック ① LGPO.zip にチェックを入れ② Download をクリック ダウンロードしたLGPO.exeを任意の場所に展開する GPOの保存次のコマンドでGPOを保存できます．※保存先のパスはフルパスで指定する必要がありました 1LGPO.exe /b [保存先ディレクトリのフルパス] 保存先のパスに新しくフォルダが作成され，その中にGPOのバックアップが作成されます．フォルダ名はUUIDv4で指定され，{56880275-2D86-4531-BEE8-AA3B5AF4529A}のような名前になります GPOの復元次のコマンドで保存されたGPOを復元できます．※保存先のパスはバックアップ時と同じものではなく，バックアップ時に新規作成されるフォルダ名がUUIDv4の物をフルパスで指定する必要がありました． 1LGPO.exe /g [保存先ディレクトリのフルパス] 簡易的な管理ツール著者が作成した簡易的なバックアップ管理ツールの使い方も紹介します． はじめに以下のリンク先からPowershellスクリプトを保存します．backupmgr.ps1 ①Rawを右クリック②名前をつけてリンク先を保存をクリック保存先を指定するダイアログでLGPO.exeを保存したディレクトリに保存 backupmgr.ps1を右クリックし，Powershellで実行をクリックするとスクリプトが起動します 保存メニューで1を入力すると，ファイル名の入力を促されます．※デフォルト値はホスト名と日付になっています． ファイル名を入力もしくはそのままEnterを押すと，UACダイアログが立ち上がりバックアップが作成されます．すでに同名のバックアップが存在する場合はエラーが表示されます． 復元メニューで2を入力するとバックアップ一覧が表示され，復元対象の選択を促されます． 選択対象を入力すると，UACダイアログが立ち上がり復元が行われます． 参考文献LGPO.exe - Local Group Policy Object Utility, v1.0 | Microsoft Community Hub","link":"/2025/03/13/LGPO-exe%E3%81%A7GPO-%E3%82%B0%E3%83%AB%E3%83%BC%E3%83%97%E3%83%9D%E3%83%AA%E3%82%B7%E3%83%BC-%E3%82%92%E3%83%90%E3%83%83%E3%82%AF%E3%82%A2%E3%83%83%E3%83%97%E3%83%BB%E7%AE%A1%E7%90%86%E3%81%99%E3%82%8B/"},{"title":"LibreOffice Drawを使ってPDF文書をPDF&#x2F;A形式に変換する","text":"概要PDFをPDF/A規格に準拠した形に変換します. LibreOffice DrawLibreOffice Drawは無料で利用できる作図ソフトです．あまり知られていませんが，強力なPDF編集ツールになります．今回はそんなLibreOffice Drawを使って通常のPDF文書をPDF/Aに準拠した形に変換します． PDF文書をPDF/A形式に変換 LibreOffice DrawでPDFファイルを開く 「ファイル」-&gt;「次の形式でエクスポート」-&gt;「PDFとしてエクスポート」の順にクリック PDFオプションの「全般」の項目で「アーカイブ」にチェックを付ける PDF/Aバージョンを選択するPDF/AバージョンについてはWikipediaを参照してください 「エクスポート」ボタンをクリックして保存先を指定する 上記の手順でPDF/A形式への変換が行えます．領収書等の提出などをPDF/A形式で求められた際にご活用下さい","link":"/2025/03/05/LibreOffice-Draw%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6PDF%E6%96%87%E6%9B%B8%E3%82%92PDF-A%E5%BD%A2%E5%BC%8F%E3%81%AB%E5%A4%89%E6%8F%9B%E3%81%99%E3%82%8B/"},{"title":"PoS移行後のEthereumプライベートチェーンを構築し送金してみる","text":"概要EthereumがPoSに移行した後，gethを使ってプライベートチェーンの構築を試みましたが，geth minerやgeth personalコマンドが存在せず，古い情報に従っても送金すらできませんでした． 加えて，PoS移行後の情報が極めて少なく，様々な公式ドキュメントやヘルプを読みあさりなんとか送金するところまでたどり着いたので，自分流のやり方として公開します． 前提条件 Ubuntu (docker使うからあんま変わらないかも) WSLでsystemdを有効化済み 公式ドキュメントに従いdocker-ceインストール済 やりたいこと アカウントAliceを作成 Aliceが100ETHを持った状態の初期ブロックを作成 Bobに送金 clef初期化clefは従来のgeth personalに変わる秘密鍵の管理サーバのようなものです．今回はアカウントごとにdockerコンテナを立ち上げてclefを動作させます．そのため，複数のアカウントを扱う場合，コマンド中のaliceという名前を読み替えてください． 以下のコマンドでclefの対話画面を立ち上げる 1234$ sudo docker run --rm -it --name alice_clef \\-v alice_clef_vl:/root/.clef \\ethereum/client-go:alltools-stable \\clef init --configdir /root/.clef 以下のようなメッセージが表示されたらokと入力しEnterキーを入力 1234567891011121314WARNING!Clef is an account management tool. It may, like any software, contain bugs.Please take care to- backup your keystore files,- verify that the keystore(s) can be opened with your password.Clef is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULARPURPOSE. See the GNU General Public License for more details.Enter 'ok' to proceed:&gt; パスワードを設定パスワードは10桁以上で2回繰り返して入力 1234The master seed of clef will be locked with a password.Please specify a password. Do not forget this password!Password: ***Repeat password: *** アドレス生成以下のコマンドで秘密鍵とETHアドレスを生成途中で初期化時と同じ確認やパスワードが求められるので適宜入力します 1234sudo docker run --rm -it --name alice_clef \\-v alice_clef_vl:/root/.clef \\ethereum/client-go:alltools-stable \\clef newaccount --keystore /root/.clef/keystore 以下のような表示が出ればアドレスの生成は完了． 1234INFO [09-25|06:21:31.481] Your new key was generated address=0x930620D7C29043423BaE931A4A88345a2ff725a6WARN [09-25|06:21:31.481] Please backup your key file! path=/root/.clef/keystore/UTC--2025-09-25T06-21-29.776639348Z--930620d7c29043423bae931a4a88345a2ff725a6WARN [09-25|06:21:31.481] Please remember your password!Generated account 0x930620D7C29043423BaE931A4A88345a2ff725a6 念のため以下のコマンドで鍵が保存されているか確認 1234sudo docker run --rm -it --name alice_clef \\-v alice_clef_vl:/root/.clef \\ethereum/client-go:alltools-stable \\clef list-accounts --keystore /root/.clef/keystore このように表示されればOK． 10x930620D7C29043423BaE931A4A88345a2ff725a6 (keystore:///root/.clef/keystore/UTC--2025-09-25T06-21-29.776639348Z--930620d7c29043423bae931a4a88345a2ff725a6) アドレスは後ほど使うため覚えておきます． clefサーバーを起動以下のコマンドでclefサーバを起動します．今回はポート番号50000としていますが，複数アカウントを使用する場合は重複しないように変更してください． 12345sudo docker run --rm -it --name alice_clef \\-v alice_clef_vl:/root/.clef \\-p 50000:50000 \\ethereum/client-go:alltools-stable \\clef --keystore /root/.clef/keystore --configdir /root/.clef --chainid 585858 --http --http.addr 0.0.0.0 --http.vhosts &quot;*&quot; --http.port 50000 その後，パスワードの入力などを行い，以下のようにアカウント情報が表示されたら起動成功． 12------- Available accounts -------0. 0x930620D7C29043423BaE931A4A88345a2ff725a6 at keystore:///root/.clef/keystore/UTC--2025-09-25T06-21-29.776639348Z--930620d7c29043423bae931a4a88345a2ff725a6 以降，このコンソールは立ち上げたままにして，新しいコンソールから作業を行います． KurotosisのインストールKurotosisはEthereumのプライベートチェーン構築を補助するツールです．network-params.ymlを定義することで必要なコンテナを一気に立ち上げてconfigを投入してくれます． まずはじめに，公式のインストールガイドを参照し，Kurotosisをインストールしてください．https://docs.kurtosis.com/install 設定ファイルの作成以下の設定ファイルの必要箇所を編集し，network-params.ymlというファイル名で保存． 12345678910111213141516171819participants: #Alice - el_type: geth el_image: &quot;ethereum/client-go:alltools-stable&quot; el_extra_params: ['--signer=http://&lt;ホストのIPアドレス&gt;:50000/'] cl_type: lighthouse #Bob - el_type: geth el_image: &quot;ethereum/client-go:alltools-stable&quot; cl_type: lighthouse - el_type: geth cl_type: tekunetwork_params: network_id: &quot;585858&quot; prefunded_accounts: '{&quot;&lt;Aliceのアドレス&gt;&quot;:{&quot;balance&quot;:&quot;100ETH&quot;}}'additional_services: - dora Kurotosisの起動以下のコマンドでKurotosisを起動 1$ sudo kurtosis run github.com/ethpandaops/ethereum-package --args-file ./network-params.yml 以下のような画面が表示されたら，Enterキーを入力 12345The Kurtosis CLI collects user metrics by default. These metrics are anonymized, private &amp; obfuscated. These metrics help us better understand what features are used, what features to invest in and what features might be buggy.In case you wish to not send metrics, you can do so by running - kurtosis analytics disableRead more at https://docs.kurtosis.com/advanced-concepts/metrics-philosophy✔ (Optional) Share your email address for occasional updates &amp; outreach for product feedback from Kurtosis: █ 最後に以下のような画面が表示されたら起動完了．このときの情報は後々必要になるので控えておく． 1234567891011121314151617181920212223242526272829303132333435363738========================================== User Services ==========================================UUID Name Ports Status2fa0759d0f19 cl-1-lighthouse-geth http: 4000/tcp -&gt; http://127.0.0.1:32784 RUNNING metrics: 5054/tcp -&gt; http://127.0.0.1:32785 quic-discovery: 9001/udp -&gt; 127.0.0.1:32772 tcp-discovery: 9000/tcp -&gt; 127.0.0.1:32786 udp-discovery: 9000/udp -&gt; 127.0.0.1:3277157b30e388a1e cl-2-lighthouse-geth http: 4000/tcp -&gt; http://127.0.0.1:32787 RUNNING metrics: 5054/tcp -&gt; http://127.0.0.1:32788 quic-discovery: 9001/udp -&gt; 127.0.0.1:32774 tcp-discovery: 9000/tcp -&gt; 127.0.0.1:32789 udp-discovery: 9000/udp -&gt; 127.0.0.1:327735a0d0ee91d86 cl-3-teku-geth http: 4000/tcp -&gt; http://127.0.0.1:32790 RUNNING metrics: 8008/tcp -&gt; http://127.0.0.1:32791 tcp-discovery: 9000/tcp -&gt; 127.0.0.1:32792 udp-discovery: 9000/udp -&gt; 127.0.0.1:3277536676219c6c8 dora http: 8080/tcp -&gt; http://127.0.0.1:32795 RUNNING2f9bb3e40158 el-1-geth-lighthouse engine-rpc: 8551/tcp -&gt; 127.0.0.1:32771 RUNNING metrics: 9001/tcp -&gt; http://127.0.0.1:32772 rpc: 8545/tcp -&gt; 127.0.0.1:32769 tcp-discovery: 30303/tcp -&gt; 127.0.0.1:32773 udp-discovery: 30303/udp -&gt; 127.0.0.1:32768 ws: 8546/tcp -&gt; 127.0.0.1:32770eeb653321f3a el-2-geth-lighthouse engine-rpc: 8551/tcp -&gt; 127.0.0.1:32776 RUNNING metrics: 9001/tcp -&gt; http://127.0.0.1:32777 rpc: 8545/tcp -&gt; 127.0.0.1:32774 tcp-discovery: 30303/tcp -&gt; 127.0.0.1:32778 udp-discovery: 30303/udp -&gt; 127.0.0.1:32769 ws: 8546/tcp -&gt; 127.0.0.1:32775c31ebc8e8aaa el-3-geth-teku engine-rpc: 8551/tcp -&gt; 127.0.0.1:32781 RUNNING metrics: 9001/tcp -&gt; http://127.0.0.1:32782 rpc: 8545/tcp -&gt; 127.0.0.1:32779 tcp-discovery: 30303/tcp -&gt; 127.0.0.1:32783 udp-discovery: 30303/udp -&gt; 127.0.0.1:32770 ws: 8546/tcp -&gt; 127.0.0.1:327804cb590a2e6ca validator-key-generation-cl-validator-keystore &lt;none&gt; RUNNINGe9e76f1af61a vc-1-geth-lighthouse metrics: 8080/tcp -&gt; http://127.0.0.1:32794 RUNNING1b7552662140 vc-2-geth-lighthouse metrics: 8080/tcp -&gt; http://127.0.0.1:32793 RUNNING gethとClefの接続確認はじめに，AliceとなるコンテナのIDを取得． 1$ sudo docker ps | grep el-1-geth 以下のような出力の54ba7f879b61という部分がAliceのコンテナIDです． 154ba7f879b61 ethereum/client-go:alltools-stable &quot;sh -c 'geth init --…&quot; 4 minutes ago Up 4 minutes 0.0.0.0:32769-&gt;8545/tcp, [::]:32769-&gt;8545/tcp, 0.0.0.0:32770-&gt;8546/tcp, [::]:32770-&gt;8546/tcp, 0.0.0.0:32771-&gt;8551/tcp, [::]:32771-&gt;8551/tcp, 0.0.0.0:32772-&gt;9001/tcp, [::]:32772-&gt;9001/tcp, 0.0.0.0:32768-&gt;30303/udp, 0.0.0.0:32773-&gt;30303/tcp, [::]:32768-&gt;30303/udp, [::]:32773-&gt;30303/tcp el-1-geth-lighthouse--2f9bb3e401584721b928ecd01eb3a99d コンテナのシェルに接続 1$ sudo docker exec -it &lt;コンテナID&gt; geth attach --datadir /data/geth/execution-data gethが立ち上がると以下のような文章が表示される 12345678Welcome to the Geth JavaScript console!instance: Geth/v1.16.3-stable-d818a9af/linux-amd64/go1.24.6at block: 21 (Thu Sep 25 2025 07:25:34 GMT+0000 (UTC)) datadir: /data/geth/execution-data modules: admin:1.0 debug:1.0 engine:1.0 eth:1.0 miner:1.0 net:1.0 rpc:1.0 txpool:1.0 web3:1.0To exit, press ctrl-d or type exit 以下のコマンドを入力して，clefに保存されたアカウントを呼び出す 1&gt; eth.accounts[0] clefのコンソールに以下のようなメッセージが表示されるのでyと入力 1234567891011121314-------- List Account request--------------A request has been made to list all accounts.You can select which accounts the caller can see [x] 0x930620D7C29043423BaE931A4A88345a2ff725a6 URL: keystore:///root/.clef/keystore/UTC--2025-09-25T06-21-29.776639348Z--930620d7c29043423bae931a4a88345a2ff725a6-------------------------------------------Request context: 172.17.0.1:32892 -&gt; http -&gt; 172.25.82.171:50000Additional HTTP header data, provided by the external caller: User-Agent: &quot;Go-http-client/1.1&quot; Origin: &quot;&quot;Approve? [y/N]:&gt; gethの方に戻り，以下のようにアドレスが表示されたらOK 1&quot;0x930620d7c29043423bae931a4a88345a2ff725a6&quot; 残高を確認するために，gethで以下のコマンドを入力． 1web3.fromWei(eth.getBalance(eth.accounts[0])) clef側で鍵へのアクセスを許可すると以下のように表示されます． 1100 network-params.ymlで100ETHを指定していた場合，100という応答が得られればOK 送金適当なアドレス0xcA5EB5ce7A5e4808e2243c9336d3DC7221Fb9855に対して10ETH送金します．※コマンドの実行毎にclefで許可しないといけないが，ここでは記述省略 まずは，両者の残高確認． 1234&gt; web3.fromWei(eth.getBalance(eth.accounts[0]))100&gt; web3.fromWei(eth.getBalance(&quot;0xcA5EB5ce7A5e4808e2243c9336d3DC7221Fb9855&quot;))0 続いて送金トランザクションを生成し送金．※ここではclefでパスワード入力が求められる 12345678910111213141516171819202122232425&gt; eth.sendTransaction({from: eth.accounts[0], to: &quot;0xcA5EB5ce7A5e4808e2243c9336d3DC7221Fb9855&quot;, value: web3.toWei(10, &quot;ether&quot;)})&quot;0x7f4c40a7905ab618b9985a64f09e7566255281588083bfc1253e1d8c0ef8926a&quot;&gt; eth.getTransaction(&quot;0x7f4c40a7905ab618b9985a64f09e7566255281588083bfc1253e1d8c0ef8926a&quot;){ accessList: [], blockHash: &quot;0x20d55cad337260446b65d449b5deb471656740248a80434cbee697961430a79a&quot;, blockNumber: 89, chainId: &quot;0x8f082&quot;, from: &quot;0x930620d7c29043423bae931a4a88345a2ff725a6&quot;, gas: 21000, gasPrice: 6903, hash: &quot;0x7f4c40a7905ab618b9985a64f09e7566255281588083bfc1253e1d8c0ef8926a&quot;, input: &quot;0x&quot;, maxFeePerGas: 15775, maxPriorityFeePerGas: 1, nonce: 0, r: &quot;0x1d7eb51d3bccae59bb21e9b3a85d686dc085e26671f29dd3878f4b517efce41f&quot;, s: &quot;0x3982f96fed13fab88c9af46e430ccd7fcfb722f2da683803de4dc96fb532a3f2&quot;, to: &quot;0xca5eb5ce7a5e4808e2243c9336d3dc7221fb9855&quot;, transactionIndex: 0, type: &quot;0x2&quot;, v: &quot;0x1&quot;, value: 10000000000000000000, yParity: &quot;0x1&quot;} 最後に両者の残高を確認．送信元のアカウントからは10ETHと手数料が引き落とされ，宛先のアカウントには10ETHが入金されていることがわかります． 12345&gt; web3.fromWei(eth.getBalance(eth.accounts[0]))89.999999999855037&gt; web3.fromWei(eth.getBalance(&quot;0xcA5EB5ce7A5e4808e2243c9336d3DC7221Fb9855&quot;))10&gt; 最初からやり直したい場合12sudo docker ps -aq | xargs sudo docker rm -fsudo docker volume ls -q | xargs sudo docker volume rm 参考文献Private Networks via Kurtosis | go-ethereum https://geth.ethereum.org/docs/fundamentals/kurtosisGitHub - ethpandaops/ethereum-package: A Kurtosis package that deploys a private, portable, and modular Ethereum devnet https://github.com/ethpandaops/ethereum-package","link":"/2025/09/25/PoS%E7%A7%BB%E8%A1%8C%E5%BE%8C%E3%81%AEEthereum%E3%83%97%E3%83%A9%E3%82%A4%E3%83%99%E3%83%BC%E3%83%88%E3%83%81%E3%82%A7%E3%83%BC%E3%83%B3%E3%82%92%E6%A7%8B%E7%AF%89%E3%81%97%E9%80%81%E9%87%91%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B/"},{"title":"WindowsでYubikeyを使ってSSH鍵を管理する(ssh-agent周りの設定)","text":"概要YubikeyのOpenPGP機能を利用してSSH秘密鍵を管理したい。その際、ssh-agenの設定が難しかったので、一番簡単だと思うやり方を紹介します。 鍵の生成は以下の記事を参考にすれば特に難しくはなかったので、鍵生成が済んでいてYubikeyへの書き込みが終わっている前提で話を進めます。YubikeyでOpenPGP鍵をセキュアに使う | κeenのHappy Hacκing Blog ssh-agentの無効化田+Rキーを押して「ファイル名を指定して実行」ウィンドウを開きます。services.mscと入力し、OKをクリック OpenSSH Authentication Agentというサービスをダブルクリックし、スタートアップの種類を無効にします。※実行中の場合は停止ボダンで殺しておいてください。 wsl-ssh-pagentの導入wsl-ssh-pagentのリリースページから最新のwsl-ssh-pageant-amd64-gui.exeをダウンロードします。 ダウンロードしたら適当なディレクトリに配置してください。今回はC:\\bin\\wsl-ssh-pageant-amd64-gui.exeに配置しました。 wsl-ssh-pagentの自動起動設定を行います。タスクスケジューラを立ち上げ、右側のリストからタスクの作成をクリックします。新しいタスクを次のように作成してください 全般タブ ssh-agentなど任意の名前を入力 「ユーザーがログインしているときのみ実行する」から変更しない トリガータブ左下の「新規」をクリックして設定画面を開き、以下のように設定。 タスクの開始:ログオン時 設定: 任意のユーザー 有効: チェックを入れる 操作タブ左下の「新規」をクリックして設定画面を開き、以下のように設定。 操作: プログラムの開始 プログラム: 先ほど配置したC:\\bin\\wsl-ssh-pageant-amd64-gui.exeを入力(もしくは「参照…」をクリックして検索) 引数の追加: --systray --winssh openssh-ssh-agent※タスクトレイに常駐させたくない場合は--winssh openssh-ssh-agent gpg-agentの設定Kleopatlaを立ち上げ、設定 -&gt; Kleopatlaを設定の順でクリックします 新しいウィンドウが開くので、左側の錠前のアイコンGnuPGシステムをクリック。プライベート鍵タブから、puttyサポートを有効にするのチェックを入れます。 最後にOKをクリックして終了します gpg-agentの自動起動設定を行います。タスクスケジューラを立ち上げ、右側のリストからタスクの作成をクリックします。新しいタスクを次のように作成してください 全般タブ gpg-agentなど任意の名前を入力 「ユーザーがログインしているときのみ実行する」から変更しない トリガータブ左下の「新規」をクリックして設定画面を開き、以下のように設定。 タスクの開始:ログオン時 設定: 任意のユーザー 有効: チェックを入れる 操作タブ左下の「新規」をクリックして設定画面を開き、以下のように設定。 操作: プログラムの開始 プログラム: &quot;C:\\Program Files (x86)\\GnuPG\\bin\\gpg-connect-agent.exe&quot;を入力(もしくは「参照…」をクリックして検索) 引数の追加: updatestartuptty /bye 動作確認ターミナル上でssh-add -Lを入力します。このとき、Yubikeyが刺さっていれば公開鍵が表示されるはずです。ここで表示した公開鍵をサーバに追加して利用してください。 (おまけ) Git for Windowsでの使い方以下の設定を行い、CygWinから内蔵のOpenSSHにsshクライアントを切り替える。 1git config --global core.sshCommand &quot;C:/Windows/System32/OpenSSH/ssh.exe&quot; 参考文献YubikeyでOpenPGP鍵をセキュアに使う | κeenのHappy Hacκing Blog benpye/wsl-ssh-pageant: A Pageant -&gt; TCP bridge for use with WSL, allowing for Pageant to be used as an ssh-ageant within the WSL environment. 混沌を極めるWindowsのssh-agent事情 #Windows - Qiita GitをWindows10のOpenSSHを使うように設定する - lisz-works OpenSSH Authentication Agentというサービスをダブルクリックし、スタートアップの種類を無効にします。 実行中の場合は停止ボダンで殺しておいてください。 wsl-ssh-pagentの導入wsl-ssh-pagentのリリースページから最新のwsl-ssh-pageant-amd64-gui.exeをダウンロードします。 ダウンロードしたら適当なディレクトリに配置してください。今回はC:\\bin\\wsl-ssh-pageant-amd64-gui.exeに配置しました。 wsl-ssh-pagentの自動起動設定を行います。タスクスケジューラを立ち上げ、右側のリストからタスクの作成をクリックします。新しいタスクを次のように作成してください 全般タブ ssh-agentなど任意の名前を入力 「ユーザーがログインしているときのみ実行する」から変更しない トリガータブ左下の「新規」をクリックして設定画面を開き、以下のように設定。 タスクの開始:ログオン時 設定: 任意のユーザー 有効: チェックを入れる 操作タブ左下の「新規」をクリックして設定画面を開き、以下のように設定。 操作: プログラムの開始 プログラム: 先ほど配置したC:\\bin\\wsl-ssh-pageant-amd64-gui.exeを入力(もしくは「参照…」をクリックして検索) 引数の追加: --systray --winssh openssh-ssh-agent※タスクトレイに常駐させたくない場合は--winssh openssh-ssh-agent gpg-agentの設定Kleopatlaを立ち上げ、設定 -&gt; Kleopatlaを設定の順でクリックします 新しいウィンドウが開くので、左側の錠前のアイコンGnuPGシステムをクリック。プライベート鍵タブから、puttyサポートを有効にするのチェックを入れます。 最後にOKをクリックして終了します gpg-agentの自動起動設定を行います。タスクスケジューラを立ち上げ、右側のリストからタスクの作成をクリックします。新しいタスクを次のように作成してください 全般タブ gpg-agentなど任意の名前を入力 「ユーザーがログインしているときのみ実行する」から変更しない トリガータブ左下の「新規」をクリックして設定画面を開き、以下のように設定。 タスクの開始:ログオン時 設定: 任意のユーザー 有効: チェックを入れる 操作タブ左下の「新規」をクリックして設定画面を開き、以下のように設定。 操作: プログラムの開始 プログラム: &quot;C:\\Program Files (x86)\\GnuPG\\bin\\gpg-connect-agent.exe&quot;を入力(もしくは「参照…」をクリックして検索) 引数の追加: updatestartuptty /bye 動作確認ターミナル上でssh-add -Lを入力します。このとき、Yubikeyが刺さっていれば公開鍵が表示されるはずです。ここで表示した公開鍵をサーバに追加して利用してください。 (おまけ) Git for Windowsでの使い方以下の設定を行い、CygWinから内蔵のOpenSSHにsshクライアントを切り替える。 1git config --global core.sshCommand &quot;C:/Windows/System32/OpenSSH/ssh.exe&quot; 参考文献YubikeyでOpenPGP鍵をセキュアに使う | κeenのHappy Hacκing Blog benpye/wsl-ssh-pageant: A Pageant -&gt; TCP bridge for use with WSL, allowing for Pageant to be used as an ssh-ageant within the WSL environment. 混沌を極めるWindowsのssh-agent事情 #Windows - Qiita GitをWindows10のOpenSSHを使うように設定する - lisz-works","link":"/2024/09/26/Windows%E3%81%A7Yubikey%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6SSH%E9%8D%B5%E3%82%92%E7%AE%A1%E7%90%86%E3%81%99%E3%82%8B-ssh-agent%E5%91%A8%E3%82%8A%E3%81%AE%E8%A8%AD%E5%AE%9A/"},{"title":"InvidiousインスタンスをPodman上に建てる","text":"概要Invidious というYoutubeのフロントエンドをRHEL 9.3で動かしてみたメモです。RHELにはDockerの代わりにPodmanが採用されているのでPodman上でコンテナを走らせてみます。 環境以下のコマンド実行結果を参照 12345678910$ cat /etc/redhat-releaseRed Hat Enterprise Linux release 9.3 (Plow)$ podman -vpodman version 4.6.1$ whoamiinvidious$ pwd/home/invidious$ lsinvidious invidious_podman.yml postgres InvidiousのリポジトリをクローンはじめにInvidiousのリポジトリを適当なディレクトリにクローンします。この記事では/home/invidious/ディレクトリにクローンします。 1$ git clone https://github.com/iv-org/invidious.git postgresqlのデータ保存先の作成この記事では/home/invidious/postgresとします。まずはフォルダを作ります 123$ pwd /home/invidious/$ mkdir postgres 権限とSELinuxコンテキストをつけてコンテナから参照できるようにします。 123$ sudo semanage fcontext -a -t container_file_t &quot;/home/invidious/postgres(/.*)?&quot;$ chmod 777 &quot;/home/invidious/postgres&quot;$ sudo restorecon -FR /home/invidious/ KubernetesのPod構成ファイルを作成このymlファイルを保存して編集する。編集箇所は以下の通り 11行目 - postgresqlのデータ保存先ディレクトリを指定 15行目、19行目 - /home/invidious/invidious を自分がリポジトリをクローンしたパスに書き換え 40行目 - HMACキーを乱数に変更 40行目の乱数については以下のコマンドで質の良い乱数を得られます※この記事からコピペせず自分の環境で実行した物をコピペしてください 12$ head /dev/urandom | sha256sum9785539ca38e85d41af29064802e93c541549f8e1a93fd6adedb45fed244602d - 実行1234567891011121314151617181920212223242526272829303132333435363738394041$ sudo podman kube play invidious_podman.ymlTrying to pull quay.io/invidious/invidious:latest...Getting image source signaturesCopying blob 82fa84ecc937 doneCopying blob 5663860407a6 doneCopying blob 4deca27c4269 doneCopying blob 88aba340a58e doneCopying blob 619be1103602 skipped: already existsCopying blob f5799a41fb4b doneCopying blob 028fa9dd7876 doneCopying blob f16baffbff6d doneCopying blob 64b04972d66a doneCopying blob 398066e4a327 doneCopying blob fe91b20bd915 doneCopying blob 4f4fb700ef54 skipped: already existsCopying config f59a293603 doneWriting manifest to image destinationTrying to pull docker.io/library/postgres:14...Getting image source signaturesCopying blob c8b33fe17167 skipped: already existsCopying blob aaed90dbec0c skipped: already existsCopying blob e1caac4eb9d2 skipped: already existsCopying blob 9a16433c9ffb skipped: already existsCopying blob ab2fbdc548a0 skipped: already existsCopying blob d5dfacd95d04 skipped: already existsCopying blob 5c2653ccff30 skipped: already existsCopying blob 8e5372f9ff7e skipped: already existsCopying blob 927d619c5510 skipped: already existsCopying blob 116545f99854 skipped: already existsCopying blob 9762cab69057 skipped: already existsCopying blob 79f98701f9d8 skipped: already existsCopying blob e837237b2223 skipped: already existsCopying blob ebb0ebcc01bc skipped: already existsCopying config 28948ca129 doneWriting manifest to image destinationPod:21082c4f513294020c6ed2cb47458292ce55b208b649eeb3b1b5f54052037370Containers:27b3f08f0ceac85cfb69c907269c2e68a5e0c2b5e63f38565113bb119abd09bda862da1477a23fb08fcb6b5fe23c55fb3c16f0e6fb4a0b6ee1119e4152e62942 動作確認最初は立ち上がってくるまでに数分がかかる数分後にcurlコマンドでコンテナが動いているか確認 123456789101112$ curl -I localhost:3000HTTP/1.1 200 OKConnection: keep-aliveContent-Type: text/htmlX-Frame-Options: sameoriginX-XSS-Protection: 1; mode=blockX-Content-Type-Options: nosniffContent-Security-Policy: default-src 'none'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self' data:; connect-src 'self'; manifest-src 'self'; media-src 'self' blob: https://*.googlevideo.com:443 https://*.youtube.com:443; child-src 'self' blob:; frame-src 'self'; frame-ancestors 'none'Referrer-Policy: same-originPermissions-Policy: interest-cohort=()Content-Length: 0 公開ファイアウォール設定を変更し、3000番が通るようにする。 12$ sudo firewall-cmd --permanent --add-port=3000/tcp$ sudo firewall--cmd --reload 3000番以外のポートを使用した場合は、ymlファイルの28行目を編集する。 うちの環境ではnginxをSSLアクセラレータにして、以下のような設定で動かしている 123456789101112131415161718192021222324server{ listen 443 ssl http2; listen [::]:443 ssl http2; server_name &lt;ドメイン名&gt;; # ssl on; ssl_certificate &lt;証明書&gt;; ssl_certificate_key &lt;秘密鍵&gt;; ssl_protocols TLSv1.2 TLSv1.3; ssl_ciphers HIGH:!aNULL:!MD5; ssl_session_cache shared:SSL:10m; ssl_session_timeout 10m; location / { proxy_pass http://&lt;Invidiousを立てたサーバ&gt;:3000; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; proxy_set_header X-Forwarded-Port $remote_port; port_in_redirect off; add_header Front-End-Https on; add_header 'Strict-Transport-Security' 'max-age=15552000;';}","link":"/2024/03/10/Invidious%E3%82%A4%E3%83%B3%E3%82%B9%E3%82%BF%E3%83%B3%E3%82%B9%E3%82%92Podman%E4%B8%8A%E3%81%AB%E5%BB%BA%E3%81%A6%E3%82%8B/"},{"title":"certbotとngixの競合でnginxが勝手に落ちる不具合の解消","text":"概要・certbotがnginxを殺してた・設定ミスがありcertbotが更新にコケていた・crontabを使用していたが、更新用のdaemonが裏で動いていて、予期せぬ時刻に障害が発生した 事の発端ある日、自宅のサーバで運用しているWebページが落ちていることに気がつき、 その理由を探ったところ、SSLアクセラレータとして使っているnginxのサービスが停止しているようだった。 落ちてから1時間ぐらいすると生き返ると言う状況から当初はリソース不足かと思い、VMのメモリ割り当てを4GBまで増やして再起動したところ正常に復旧した。 しかし、翌日またnginxが落ちておりヤケクソでvCPUを8コア/メモリ割り当てを64GBにしたが、nginxは落ちてしまった。 原因究明/var/log/messages/ を見たら速攻で分かった。 1234567891011121314Apr 24 10:22:23 *hostname* systemd[1]: Starting This service automatically renews any certbot certificates found...Apr 24 10:22:24 *hostname* certbot[99744]: Saving debug log to /var/log/letsencrypt/letsencrypt.logApr 24 10:22:24 *hostname* certbot[99744]: - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -Apr 24 10:22:24 *hostname* certbot[99744]: Processing /etc/letsencrypt/renewal/*****.confApr 24 10:22:24 *hostname* certbot[99744]: - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -Apr 24 10:22:25 *hostname* certbot[99744]: Certificate not yet due for renewalApr 24 10:22:25 *hostname* certbot[99744]: - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -Apr 24 10:22:25 *hostname* certbot[99744]: Processing /etc/letsencrypt/renewal/*****.confApr 24 10:22:25 *hostname* certbot[99744]: - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -Apr 24 10:22:27 *hostname* systemd[1]: Stopping The nginx HTTP and reverse proxy server...Apr 24 10:22:27 *hostname* systemd[1]: nginx.service: Deactivated successfully.Apr 24 10:22:27 *hostname* systemd[1]: Stopped The nginx HTTP and reverse proxy server.Apr 24 10:22:27 *hostname* systemd[1]: nginx.service: Consumed 26.757s CPU time.Apr 24 10:22:27 *hostname* certbot[99744]: Renewing an existing certificate for ***** certbotが証明書を更新する際にnginxが落とされていた。しかも悪いことに証明書の更新にコケて固まっていた模様。(しばらくするとタイムアウトになってnginxが甦生される) 証明書の更新にコケた理由certbotが延々と遅延していた理由としては、firewalldの設定が間違っていて80番ポートが塞がっていたのでACMEチャレンジで延々と待たされていただけのようであった。 予期せぬタイミングで動作したcertbot自分の場合、certbotは毎月1日の午前3時に動かすようcrontabを組んでいたが何故か4/24にも障害が発生。こちらも気になったので調査してみた。 その結果、certbot-renew.timerというサービスが存在している事が判明。 対策firewalldの設定変更以下のコマンドで80番を穴開け 12sudo firewall-cmd --permanent --zone=dmz --add-service=httpsudo firewall-cmd --reload crontabからcertbot-renew.timerへの切り替え今回は何故かcrontabの方にしか設定していないpre-hookとpost-hookが動いていたようだが、この際なのできちんと設定を行っておく /etc/sysconfig/certbot ファイルをお好みのエディタで開いてPRE_HOOKとPOST_HOOKの行を以下の通り書き換えればOK 12PRE_HOOK=&quot;--pre-hook 'systemctl stop nginx'&quot;POST_HOOK=&quot;--post-hook 'systemctl restart nginx'&quot; 最後にcertbot-renew.timerを再起動しておく 1systemctl restart certbot-renew.timer 参考文献【簡単】Let’s Encryptの自動更新をcronなしで実現しよう | TACK-WEB","link":"/2024/04/25/certbot%E3%81%A8ngix%E3%81%AE%E7%AB%B6%E5%90%88%E3%81%A7nginx%E3%81%8C%E5%8B%9D%E6%89%8B%E3%81%AB%E8%90%BD%E3%81%A1%E3%82%8B%E4%B8%8D%E5%85%B7%E5%90%88%E3%81%AE%E8%A7%A3%E6%B6%88/"},{"title":"OpensslでEC(楕円曲線)のクライアント証明書を作成する","text":"概要Opensslでクライアント証明書を作成する方法はよく紹介されているがほとんどがRSA暗号を用いた物だったため、EC(楕円曲線)暗号を用いたクライアント証明書の作成方法を調べました。 おまけとしてnginxで利用する際の設定も紹介します CA証明書の生成CAとは証明書を発行する機関の事です。PKIはクライアントがCAを信頼しそのCAが発行した証明書を許可するという仕組みのため、オレオレ証明書でもCAの作成が必要です。 設定ファイルの記述CA.txtというファイル名でファイルを作成し、以下の内容をコピペします。これは参考文献(1)からそのまま持ってきました。 1234subjectKeyIdentifier=hashauthorityKeyIdentifier=keyid:always,issuer:alwaysbasicConstraints=CA:TRUEkeyUsage=keyCertSign,cRLSign 証明書の生成以下のコマンドを実行します。 123$ sudo openssl ecparam -name secp384r1 -genkey -noout -out CA.key$ sudo openssl req -new -key CA.key -out CA.csr -subj &quot;/CN=Selfsign Root CA&quot;$ sudo openssl x509 -req -days 3650 -in CA.csr -signkey CA.key -extfile CA.txt -out CA.crt これで以下の通りファイルが生成されます ファイル名 用途 CA.key CAの秘密鍵 CA.csr CAの証明書発行要求 CA.crt CAの証明書 クライアント証明書の発行続いて、実際に使用するクライアント証明書を作成します。 設定ファイルの記述Client.txtというファイル名でファイルを作成し、以下の内容をコピペします。これは参考文献(1)からそのまま持ってきました。 12345basicConstraints=CA:FALSEsubjectKeyIdentifier=hashauthorityKeyIdentifier=keyid,issuer:alwaysextendedKeyUsage=clientAuthkeyUsage=digitalSignature クライアント証明書の生成以下のコマンドを実行します。 123$ sudo openssl ecparam -name secp384r1 -genkey -noout -out Client.key$ sudo openssl req -new -key Client.key -out Client.csr -subj &quot;/CN=Client&quot;$ sudo openssl x509 -req -in Client.csr -CA CA.crt -CAkey CA.key -CAcreateserial -days 3650 -extfile Client.txt -out Client.crt これで以下の通りファイルが生成されます ファイル名 用途 Client.key クライアントの秘密鍵 Client.csr クライアントの証明書発行要求 Client.crt クライアントの証明書 Nginxへの設定方法(おまけ)ssl_certificateとかの設定が書いてある所に書いてください。 12ssl_client_certificate &quot;&lt;CA.crtのファイルパス&gt;&quot;;ssl_verify_client on; WindowsやAndroidに証明書をインポートする方法PKCS12形式に変換します。※ここで-legacyオプションをつけないとAndroidにインポートできない 1$ sudo openssl pkcs12 -export -legacy -in Client.crt -inkey Client.key -certfile CA.crt -out Client.pfx これでWindows/Androidで扱える形式になりました。Client.pfxをコピーして、利用してください。 Windowsの場合は、ダブルクリックするとウィザードが立ち上がるので指示に従ってインストールしてください。主要なブラウザからはこれだけで使えるようになります。 Androidの場合は以下の通り設定画面を開く設定 -&gt; セキュリティ -&gt; セキュリティの詳細設定 -&gt; 暗号化と認証情報 -&gt; 証明書のインストール -&gt; VPNとアプリユーザー証明書 ファイルピッカーが表示されたらClient.pfxをタップして開く パスワードの入力を求められたら、変換時に入力したパスワードを入力する。 Androidでオレオレクライアント証明書を扱えるブラウザは(自分が試した限りでは)Operaだけでした。 参考文献(1) 自己署名CAをOpenSSLコマンドラインオプションで使う #OpenSSL - Qiita","link":"/2024/03/22/Openssl%E3%81%A7EC-%E6%A5%95%E5%86%86%E6%9B%B2%E7%B7%9A-%E3%81%AE%E3%82%AF%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%B3%E3%83%88%E8%A8%BC%E6%98%8E%E6%9B%B8%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B/"},{"title":"トップページ","text":"サイト概要 このブログにはシステム構築等の技術的なメモを備忘録として残します。 自己紹介趣味でサーバを立てたり、自宅ネットワークを弄ったりしています 現在の遊び環境は以下の通り。仮想マシン上で色々動かしてます。 12345機種: DELL PowerEdge R430CPU: Intel Xeon E3-2620v4*1RAM: 128GBHDD: 2TB*4SSD: 240GB*1","link":"/2038/01/19/index/"},{"title":"NFStreamのセットアップ(WSL+OracleLinux9+Python3.12)","text":"概要通信解析用のフレームワーク「NFStream」をPython 3.12とWSL2環境に対してインストールします。 環境WSL2にインストールしたOracle Linux 9.1を使用します。 12345678910111213141516171819$ cat /etc/os-releaseNAME=&quot;Oracle Linux Server&quot;VERSION=&quot;9.1&quot;ID=&quot;ol&quot;ID_LIKE=&quot;fedora&quot;VARIANT=&quot;Server&quot;VARIANT_ID=&quot;server&quot;VERSION_ID=&quot;9.1&quot;PLATFORM_ID=&quot;platform:el9&quot;PRETTY_NAME=&quot;Oracle Linux Server 9.1&quot;ANSI_COLOR=&quot;0;31&quot;CPE_NAME=&quot;cpe:/o:oracle:linux:9:1:server&quot;HOME_URL=&quot;https://linux.oracle.com/&quot;BUG_REPORT_URL=&quot;https://github.com/oracle/oracle-linux&quot;ORACLE_BUGZILLA_PRODUCT=&quot;Oracle Linux 9&quot;ORACLE_BUGZILLA_PRODUCT_VERSION=9.1ORACLE_SUPPORT_PRODUCT=&quot;Oracle Linux&quot;ORACLE_SUPPORT_PRODUCT_VERSION=9.1 セットアップ前提パッケージの導入WSLに導入したばかりのOracleLinuxには基本的なコマンドや開発ツールが無いため、以下のコマンドで必要なパッケージをインストールします。 123sudo dnf group install &quot;Minimal Install&quot;sudo dnf group install &quot;Development Tools&quot;sudo dnf install libpcap libpcap-devel --enablerepo=ol9_codeready_builder Pythonのインストール以下のコマンドでPython3.12を導入し、デフォルトのPythonパッケージに指定します。 12sudo dnf install python3.12 python3.12-devel python3.12-libs python3.12-libs python3.12-pipsudo alternatives --install /usr/bin/python python /usr/bin/python3.12 1 nfstreamのインストールNFStreamのリポジトリをクローンします。 12git clone --recurse-submodules https://github.com/nfstream/nfstream.gitcd nfstream ※記事執筆時点のバージョンで固定する場合 1git checkout a4180aa52fbc9f135b8ecfe039652845047b176b スクリプトの誤りを修正します 1sed 's|/tmp/nfstream_build/{usr}/lib/libndpi.a|/tmp/nfstream_build/{usr}/lib64/libndpi.a|g' -i ./nfstream/engine/engine_build.py 上記コマンド実行後、差分が次のようになっていれば成功です。 12345678910111213diff --git a/nfstream/engine/engine_build.py b/nfstream/engine/engine_build.pyindex c3bf6a9..8548f6a 100644--- a/nfstream/engine/engine_build.py+++ b/nfstream/engine/engine_build.py@@ -83,7 +83,7 @@ INCLUDE_DIRS = [ &quot;{root}/tmp/nfstream_build/{usr}/include&quot;.format(root=ROOT, usr=USR_LOCAL), ] EXTRALINK_ARGS = [- &quot;{root}/tmp/nfstream_build/{usr}/lib/libndpi.a&quot;.format(root=ROOT, usr=USR)+ &quot;{root}/tmp/nfstream_build/{usr}/lib64/libndpi.a&quot;.format(root=ROOT, usr=USR) ] if os.name != &quot;posix&quot;: # Windows インストールします 123python -m pip install --upgrade pippython -m pip install -r dev_requirements.txtpython -m pip install . テストサンプルとなるcapファイルをダウンロードします。 12cd ~wget https://wiki.wireshark.org/uploads/27707187aeb30df68e70c8fb9d614981/http.cap 以下のpythonスクリプトをnfstream_test.pyのファイル名で保存 1234from nfstream import NFStreamers = NFStreamer(source=&quot;http.cap&quot;)for flow in s : print(flow) 保存したnfstream_test.pyを実行 1234567891011python nfstream_test.pyNFlow(id=0, expiration_id=0, src_ip=145.254.160.237, src_mac=00:00:01:00:00:00, src_oui=00:00:01, src_port=3372, dst_ip=65.208.228.223, dst_mac=fe:ff:20:00:01:00,(中略)","link":"/2025/03/07/NFStream%E3%81%AE%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%97-WSL-OracleLinux9-Python3-12/"},{"title":"wireguardでIPv6を利用する設定(疑似 IPv6 over IPv4)","text":"概要WireguardでIPv6通信ができるようにします。 環境OS: Ubuntu 22.04.4 LTSプラットフォーム: OCI無料枠 事前準備ip6tablesを使えるようにするubuntuであればあらかじめインストールされていると思います。 カーネルの設定でIPv6フォワードを有効にする/etc/sysctl.confを任意のテキストエディタで開き、ファイルの末尾に以下の設定を追加します 12net.ipv4.ip_forward=1net.ipv6.conf.all.forwarding=1 その後端末を再起動します 設定まずはIPv6のULAアドレス(ローカルIP)を生成します。Unique Local IPv6 Generator※fd00::/8を使ってもよいですが、推奨されていないようです。 次にwireguardのコンフィグを投入します。 IPv4のローカルIPを172.24.255.0/24先ほど生成したIPv6のULAをfdac:756c:6733::/48とすると以下の通りです サーバー123456789101112[Interface]PrivateKey = ****Address = 172.24.255.1/24, fdac:756c:6733::1/48ListenPort = 51820SaveConfig = falseMTU = 1374 # これぐらいにすると通信が安定するPostUp = iptables -A FORWARD -i wg0 -j ACCEPT; iptables -t nat -A POSTROUTING -o ens3 -j MASQUERADE; ip6tables -A FORWARD -i wg0 -j ACCEPT; ip6tables -t nat -A POSTROUTING -o ens3 -j MASQUERADEPostDown = iptables -D FORWARD -i wg0 -j ACCEPT; iptables -t nat -D POSTROUTING -o ens3 -j MASQUERADE;ip6tables -D FORWARD -i wg0 -j ACCEPT; ip6tables -t nat -D POSTROUTING -o ens3 -j MASQUERADE[Peer]PublicKey = ***AllowedIPs = 172.24.255.2/32, fdac:756c:6733::2/128 クライアント12345678910[Interface]PrivateKey = ***Address = 172.24.255.2/32, fdac:756c:6733::2/128DNS = 2606:4700:4700::1111, 2606:4700:4700::1001, 1.1.1.1, 1.0.0.1MTU = 1374[Peer]PublicKey = ***AllowedIPs = 0.0.0.0/0, ::/0Endpoint = 203.0.113.55:51820 参考文献Linux で IP 転送を有効にする方法Chat GPT","link":"/2024/06/29/wireguard%E3%81%A7IPv6%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B%E8%A8%AD%E5%AE%9A-%E7%96%91%E4%BC%BC-IPv6-over-IPv4/"},{"title":"ungoogled-chromiumでdアニメストア&#x2F;Amazon PrimeVideo&#x2F;Neflix&#x2F;U-NEXT等を見られるようにする方法","text":"概要ungoogled-chromium等のChromium系ブラウザを使用していると，dアニメストア/Amazon PrimeVideo/Netflix/U-NEXTなどの動画配信サービスで次のようなエラーが発生し，動画が見られない現象が発生する事があります． この記事では，dアニメストアを例にしてungoogled-chromiumで動画が再生できるようにしていきます．また，本記事の対象プラットフォームはWindowsのみになります． 解決できるかどうかの確認まずは，本記事のやり方で問題が解決できるかを確認します． chrome://componentsを開き，Widevine Content Decryption Moduleの状態が最新やNewではないことを確認してください．(以下の画像では「確認中」となっています)．※特にバージョンが0.0.0.0の場合は解決できる可能性が高いです 上記に当てはまる場合，動画が再生できない原因はDRMの可能性が高いです．本来あらゆる知識は公共に属し無制限に活用され得るべきですが，DRMはオープンな暗号技術を用いてこれを阻害します．ChromiumではWidevineというプラグインがDRMに利用されているため，手動でこのプラグインを導入していきます． Chromiumのインストール先を開く一般的にChromiumのインストール先は以下の場所になります．C:\\Users\\%UserName%\\AppData\\Local\\Chromium\\Application\\特にオプションを弄っていない場合は，ここのフォルダを開いてください． 自分で別の場所を指定している場合は指定した場所を開いてください． すると，次のようにバージョン番号ごとにフォルダが存在するので，一番最新のバージョン番号のフォルダを開きます． このようなフォルダが見えていれば正しいパスになります．このフォルダを開いたままにしておいてください． Edgeのインストール先を開くChromiumの時とほぼ同じになります． Edgeのインストール先を開きますC:\\Program Files (x86)\\Microsoft\\Edge\\Application すると，次のようにバージョン番号ごとにフォルダが存在するので，一番最新のバージョン番号のフォルダを開きます． このようなフォルダが見えていれば正しいパスになります．このフォルダを開いたままにしておいてください． EdgeのフォルダからChromiumのフォルダにコピーするEdge側のフォルダに入っているWidevineCdmフォルダをChromium側にコピーします．(Ctrlを押しながらドラッグ&amp;ドロップ) Chromiumを起動したままの状態であれば一度閉じてください． 確認chrome://componentsを開き，Widevine Content Decryption Moduleのバージョンが変化していることを確認してください． エラーが解消し，動画が再生されれば成功です．※スクリーンショットでは動画部分が真っ黒に見えますが実際には再生されています．","link":"/2025/04/26/ungoogled-chromium%E3%81%A7d%E3%82%A2%E3%83%8B%E3%83%A1%E3%82%B9%E3%83%88%E3%82%A2-Amazon-PrimeVideo-Neflix-U-NEXT%E7%AD%89%E3%82%92%E8%A6%8B%E3%82%89%E3%82%8C%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95/"},{"title":"Windows11環境でパスキー(Yubikey)利用時に出る「iPhone、iPad、またはAndroidデバイス」の選択肢を消す方法","text":"概要「iPhone、iPad、またはAndroidデバイス」の選択肢が毎回1番目に表示されて邪魔すぎるので無効にします 方法田+Rで「ファイル名を指定して実行」を呼び出し、devmgmt.mscと入力して「OK」をクリック Bluetoothを無効にする。 Bluetoothデバイスとの共存は無理そうなので、会議通話などで使用する方は、USBオーディオに変換するタイプのアダプタを購入する必要があります。Amazon | Creative BT-W3X PS4/PS5/Nintendo Switch使用可能 aptX HD 最大24bit/48kHz USB-C接続 Bluetooth 5.3 オーディオ トランスミッター HP-BTW3X | クリエイティブ・メディア | Bluetoothアダプタ 通販※アフィリンクなし 参考文献Disable “iPhone, iPad, or Android device” option for Passkey Sign-in - Microsoft Community","link":"/2024/09/26/Windows11%E7%92%B0%E5%A2%83%E3%81%A7%E3%83%91%E3%82%B9%E3%82%AD%E3%83%BC-Yubikey-%E5%88%A9%E7%94%A8%E6%99%82%E3%81%AB%E5%87%BA%E3%82%8B%E3%80%8CiPhone%E3%80%81iPad%E3%80%81%E3%81%BE%E3%81%9F%E3%81%AFAndroid%E3%83%87%E3%83%90%E3%82%A4%E3%82%B9%E3%80%8D%E3%81%AE%E9%81%B8%E6%8A%9E%E8%82%A2%E3%82%92%E6%B6%88%E3%81%99%E6%96%B9%E6%B3%95/"}],"tags":[{"name":"サーバ","slug":"サーバ","link":"/tags/%E3%82%B5%E3%83%BC%E3%83%90/"},{"name":"広告ブロック","slug":"広告ブロック","link":"/tags/%E5%BA%83%E5%91%8A%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF/"},{"name":"Windows","slug":"Windows","link":"/tags/Windows/"},{"name":"Ethereum","slug":"Ethereum","link":"/tags/Ethereum/"},{"name":"セキュリティ","slug":"セキュリティ","link":"/tags/%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3/"},{"name":"nginx","slug":"nginx","link":"/tags/nginx/"},{"name":"Linux","slug":"Linux","link":"/tags/Linux/"},{"name":"ネットワーク","slug":"ネットワーク","link":"/tags/%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF/"}],"categories":[{"name":"サーバ","slug":"サーバ","link":"/categories/%E3%82%B5%E3%83%BC%E3%83%90/"},{"name":"Windows","slug":"Windows","link":"/categories/Windows/"},{"name":"環境構築","slug":"サーバ/環境構築","link":"/categories/%E3%82%B5%E3%83%BC%E3%83%90/%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89/"},{"name":"ネットワーク","slug":"サーバ/ネットワーク","link":"/categories/%E3%82%B5%E3%83%BC%E3%83%90/%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF/"},{"name":"設定","slug":"Windows/設定","link":"/categories/Windows/%E8%A8%AD%E5%AE%9A/"},{"name":"Office","slug":"Windows/Office","link":"/categories/Windows/Office/"},{"name":"障害復旧","slug":"サーバ/障害復旧","link":"/categories/%E3%82%B5%E3%83%BC%E3%83%90/%E9%9A%9C%E5%AE%B3%E5%BE%A9%E6%97%A7/"},{"name":"セキュリティ","slug":"サーバ/セキュリティ","link":"/categories/%E3%82%B5%E3%83%BC%E3%83%90/%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3/"},{"name":"Linux","slug":"Linux","link":"/categories/Linux/"},{"name":"環境構築","slug":"Linux/環境構築","link":"/categories/Linux/%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89/"}],"pages":[{"title":"","text":"ツールOCI Bucket ViewerOCIの事前承認済リクエストを利用して，バケットのファイル一覧を表示・ダウンロード可能なGUIです． ワンドライブ直リン生成器OneDriveの共有リンクから直リンクURLを生成します QR生成器QRコードをローカルで生成します．","link":"/tools.html"},{"title":"","text":":root { --color-primitive-blue-50: #e8f1fe; --color-primitive-blue-100: #d9e6ff; --color-primitive-blue-200: #c5d7fb; --color-primitive-blue-300: #9db7f9; --color-primitive-blue-400: #7096f8; --color-primitive-blue-500: #4979f5; --color-primitive-blue-600: #3460fb; --color-primitive-blue-700: #264af4; --color-primitive-blue-800: #0031d8; --color-primitive-blue-900: #0017c1; --color-primitive-blue-1000: #00118f; --color-primitive-blue-1100: #000071; --color-primitive-blue-1200: #000060; --color-primitive-light-blue-50: #f0f9ff; --color-primitive-light-blue-100: #dcf0ff; --color-primitive-light-blue-200: #c0e4ff; --color-primitive-light-blue-300: #97d3ff; --color-primitive-light-blue-400: #57b8ff; --color-primitive-light-blue-500: #39abff; --color-primitive-light-blue-600: #008bf2; --color-primitive-light-blue-700: #0877d7; --color-primitive-light-blue-800: #0066be; --color-primitive-light-blue-900: #0055ad; --color-primitive-light-blue-1000: #00428c; --color-primitive-light-blue-1100: #00316a; --color-primitive-light-blue-1200: #00234b; --color-primitive-cyan-50: #e9f7f9; --color-primitive-cyan-100: #c8f8ff; --color-primitive-cyan-200: #99f2ff; --color-primitive-cyan-300: #79e2f2; --color-primitive-cyan-400: #2bc8e4; --color-primitive-cyan-500: #01b7d6; --color-primitive-cyan-600: #00a3bf; --color-primitive-cyan-700: #008da6; --color-primitive-cyan-800: #008299; --color-primitive-cyan-900: #006f83; --color-primitive-cyan-1000: #006173; --color-primitive-cyan-1100: #004c59; --color-primitive-cyan-1200: #003741; --color-primitive-green-50: #e6f5ec; --color-primitive-green-100: #c2e5d1; --color-primitive-green-200: #9bd4b5; --color-primitive-green-300: #71c598; --color-primitive-green-400: #51b883; --color-primitive-green-500: #2cac6e; --color-primitive-green-600: #259d63; --color-primitive-green-700: #1d8b56; --color-primitive-green-800: #197a4b; --color-primitive-green-900: #115a36; --color-primitive-green-1000: #0c472a; --color-primitive-green-1100: #08351f; --color-primitive-green-1200: #032213; --color-primitive-lime-50: #ebfad9; --color-primitive-lime-100: #d0f5a2; --color-primitive-lime-200: #c0f354; --color-primitive-lime-300: #ade830; --color-primitive-lime-400: #9ddd15; --color-primitive-lime-500: #8cc80c; --color-primitive-lime-600: #7eb40d; --color-primitive-lime-700: #6fa104; --color-primitive-lime-800: #618e00; --color-primitive-lime-900: #507500; --color-primitive-lime-1000: #3e5a00; --color-primitive-lime-1100: #2c4100; --color-primitive-lime-1200: #1e2d00; --color-primitive-yellow-50: #fbf5e0; --color-primitive-yellow-100: #fff0b3; --color-primitive-yellow-200: #ffe380; --color-primitive-yellow-300: #ffd43d; --color-primitive-yellow-400: #ffc700; --color-primitive-yellow-500: #ebb700; --color-primitive-yellow-600: #d2a400; --color-primitive-yellow-700: #b78f00; --color-primitive-yellow-800: #a58000; --color-primitive-yellow-900: #927200; --color-primitive-yellow-1000: #806300; --color-primitive-yellow-1100: #6e5600; --color-primitive-yellow-1200: #604b00; --color-primitive-orange-50: #ffeee2; --color-primitive-orange-100: #ffdfca; --color-primitive-orange-200: #ffc199; --color-primitive-orange-300: #ffa66d; --color-primitive-orange-400: #ff8d44; --color-primitive-orange-500: #ff7628; --color-primitive-orange-600: #fb5b01; --color-primitive-orange-700: #e25100; --color-primitive-orange-800: #c74700; --color-primitive-orange-900: #ac3e00; --color-primitive-orange-1000: #8b3200; --color-primitive-orange-1100: #6d2700; --color-primitive-orange-1200: #541e00; --color-primitive-red-50: #fdeeee; --color-primitive-red-100: #ffdada; --color-primitive-red-200: #ffbbbb; --color-primitive-red-300: #ff9696; --color-primitive-red-400: #ff7171; --color-primitive-red-500: #ff5454; --color-primitive-red-600: #fe3939; --color-primitive-red-700: #fa0000; --color-primitive-red-800: #ec0000; --color-primitive-red-900: #ce0000; --color-primitive-red-1000: #a90000; --color-primitive-red-1100: #850000; --color-primitive-red-1200: #620000; --color-primitive-magenta-50: #f3e5f4; --color-primitive-magenta-100: #ffd0ff; --color-primitive-magenta-200: #ffaeff; --color-primitive-magenta-300: #ff8eff; --color-primitive-magenta-400: #f661f6; --color-primitive-magenta-500: #f137f1; --color-primitive-magenta-600: #db00db; --color-primitive-magenta-700: #c000c0; --color-primitive-magenta-800: #aa00aa; --color-primitive-magenta-900: #8b008b; --color-primitive-magenta-1000: #6c006c; --color-primitive-magenta-1100: #500050; --color-primitive-magenta-1200: #3b003b; --color-primitive-purple-50: #f1eafa; --color-primitive-purple-100: #ecddff; --color-primitive-purple-200: #ddc2ff; --color-primitive-purple-300: #cda6ff; --color-primitive-purple-400: #bb87ff; --color-primitive-purple-500: #a565f8; --color-primitive-purple-600: #8843e1; --color-primitive-purple-700: #6f23d0; --color-primitive-purple-800: #5c10be; --color-primitive-purple-900: #5109ad; --color-primitive-purple-1000: #41048e; --color-primitive-purple-1100: #30016c; --color-primitive-purple-1200: #21004b; --color-neutral-white: #ffffff; --color-neutral-black: #000000; --color-neutral-solid-gray-50: #f2f2f2; --color-neutral-solid-gray-100: #e6e6e6; --color-neutral-solid-gray-200: #cccccc; --color-neutral-solid-gray-300: #b3b3b3; --color-neutral-solid-gray-400: #999999; --color-neutral-solid-gray-420: #949494; --color-neutral-solid-gray-500: #7f7f7f; --color-neutral-solid-gray-536: #767676; --color-neutral-solid-gray-600: #666666; --color-neutral-solid-gray-700: #4d4d4d; --color-neutral-solid-gray-800: #333333; --color-neutral-solid-gray-900: #1a1a1a; --color-neutral-opacity-gray-50: rgba(0, 0, 0, 0.05); --color-neutral-opacity-gray-100: rgba(0, 0, 0, 0.1); --color-neutral-opacity-gray-200: rgba(0, 0, 0, 0.2); --color-neutral-opacity-gray-300: rgba(0, 0, 0, 0.3); --color-neutral-opacity-gray-400: rgba(0, 0, 0, 0.4); --color-neutral-opacity-gray-420: rgba(0, 0, 0, 0.42); --color-neutral-opacity-gray-500: rgba(0, 0, 0, 0.5); --color-neutral-opacity-gray-536: rgba(0, 0, 0, 0.54); --color-neutral-opacity-gray-600: rgba(0, 0, 0, 0.6); --color-neutral-opacity-gray-700: rgba(0, 0, 0, 0.7); --color-neutral-opacity-gray-800: rgba(0, 0, 0, 0.8); --color-neutral-opacity-gray-900: rgba(0, 0, 0, 0.9); --font-family-sans: \"Noto Sans JP\", -apple-system, BlinkMacSystemFont, sans-serif; --font-family-mono: \"Noto Sans Mono\", monospace; --elevation-1: 0 2px 8px 1px rgba(0, 0, 0, 0.1), 0 1px 5px 0 rgba(0, 0, 0, 0.3); --elevation-2: 0 2px 12px 2px rgba(0, 0, 0, 0.1), 0 1px 6px 0 rgba(0, 0, 0, 0.3); --elevation-3: 0 4px 16px 3px rgba(0, 0, 0, 0.1), 0 1px 6px 0 rgba(0, 0, 0, 0.3); --elevation-4: 0 6px 20px 4px rgba(0, 0, 0, 0.1), 0 2px 6px 0 rgba(0, 0, 0, 0.3); --elevation-5: 0 8px 24px 5px rgba(0, 0, 0, 0.1), 0 2px 10px 0 rgba(0, 0, 0, 0.3); --elevation-6: 0 10px 30px 6px rgba(0, 0, 0, 0.1), 0 3px 12px 0 rgba(0, 0, 0, 0.3); --elevation-7: 0 12px 36px 7px rgba(0, 0, 0, 0.1), 0 3px 14px 0 rgba(0, 0, 0, 0.3); --elevation-8: 0 14px 40px 7px rgba(0, 0, 0, 0.1), 0 3px 16px 0 rgba(0, 0, 0, 0.3); --color-semantic-success-1: var(--color-primitive-green-600); --color-semantic-success-2: var(--color-primitive-green-800); --color-semantic-error-1: var(--color-primitive-red-800); --color-semantic-error-2: var(--color-primitive-red-900); --color-semantic-warning-yellow-1: var(--color-primitive-yellow-700); --color-semantic-warning-yellow-2: var(--color-primitive-yellow-900); --color-semantic-warning-orange-1: var(--color-primitive-orange-600); --color-semantic-warning-orange-2: var(--color-primitive-orange-800); } html { scrollbar-gutter: stable; font-family: var(--font-family-sans); } html:has(:modal) { overflow: clip; scrollbar-gutter: auto; } body:has(:modal) { overflow: auto; scrollbar-gutter: stable; } :where(a):any-link { color: var(--color-primitive-blue-1000); text-decoration: underline; text-decoration-thickness: calc(1 / 16 * 1rem); text-underline-offset: calc(3 / 16 * 1rem); } :where(a):visited { color: var(--color-primitive-magenta-900); } @media (hover: hover) { :where(a):hover { color: var(--color-primitive-blue-900); text-decoration-thickness: calc(3 / 16 * 1rem); } } :where(a):active { color: var(--color-primitive-orange-800); text-decoration-thickness: calc(1 / 16 * 1rem); } :focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); border-radius: calc(4 / 16 * 1rem); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-u-visually-hidden { clip: rect(0 0 0 0) !important; clip-path: inset(50%) !important; height: 1px !important; overflow: hidden !important; position: absolute !important; white-space: nowrap !important; width: 1px !important; } :where(.dads-u-focus-outline):focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black) !important; outline-offset: calc(2 / 16 * 1rem) !important; border-radius: calc(4 / 16 * 1rem) !important; background-color: var(--color-primitive-yellow-300) !important; box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300) !important; } @supports selector(:has(*)) { :where(.dads-u-focus-within-outline):focus-visible, :where(.dads-u-focus-within-outline):has(:focus-visible) { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black) !important; outline-offset: calc(2 / 16 * 1rem) !important; border-radius: calc(4 / 16 * 1rem) !important; background-color: var(--color-primitive-yellow-300) !important; box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300) !important; } } @supports not selector(:has(*)) { :where(.dads-u-focus-within-outline):focus-within { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black) !important; outline-offset: calc(2 / 16 * 1rem) !important; border-radius: calc(4 / 16 * 1rem) !important; background-color: var(--color-primitive-yellow-300) !important; box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300) !important; } } .dads-u-dsp-64B-140 { font-weight: bold !important; font-size: calc(64 / 16 * 1rem) !important; line-height: 1.4 !important; letter-spacing: 0 !important; } .dads-u-dsp-57B-140 { font-weight: bold !important; font-size: calc(57 / 16 * 1rem) !important; line-height: 1.4 !important; letter-spacing: 0 !important; } .dads-u-dsp-48B-140 { font-weight: bold !important; font-size: calc(48 / 16 * 1rem) !important; line-height: 1.4 !important; letter-spacing: 0 !important; } .dads-u-dsp-64N-140 { font-weight: normal !important; font-size: calc(64 / 16 * 1rem) !important; line-height: 1.4 !important; letter-spacing: 0 !important; } .dads-u-dsp-57N-140 { font-weight: normal !important; font-size: calc(57 / 16 * 1rem) !important; line-height: 1.4 !important; letter-spacing: 0 !important; } .dads-u-dsp-48N-140 { font-weight: normal !important; font-size: calc(48 / 16 * 1rem) !important; line-height: 1.4 !important; letter-spacing: 0 !important; } .dads-u-std-45B-140 { font-weight: bold !important; font-size: calc(45 / 16 * 1rem) !important; line-height: 1.4 !important; letter-spacing: 0 !important; } .dads-u-std-36B-140 { font-weight: bold !important; font-size: calc(36 / 16 * 1rem) !important; line-height: 1.4 !important; letter-spacing: 0.01em !important; } .dads-u-std-32B-150 { font-weight: bold !important; font-size: calc(32 / 16 * 1rem) !important; line-height: 1.5 !important; letter-spacing: 0.01em !important; } .dads-u-std-28B-150 { font-weight: bold !important; font-size: calc(28 / 16 * 1rem) !important; line-height: 1.5 !important; letter-spacing: 0.01em !important; } .dads-u-std-26B-150 { font-weight: bold !important; font-size: calc(26 / 16 * 1rem) !important; line-height: 1.5 !important; letter-spacing: 0.02em !important; } .dads-u-std-24B-150 { font-weight: bold !important; font-size: calc(24 / 16 * 1rem) !important; line-height: 1.5 !important; letter-spacing: 0.02em !important; } .dads-u-std-22B-150 { font-weight: bold !important; font-size: calc(22 / 16 * 1rem) !important; line-height: 1.5 !important; letter-spacing: 0.02em !important; } .dads-u-std-20B-150 { font-weight: bold !important; font-size: calc(20 / 16 * 1rem) !important; line-height: 1.5 !important; letter-spacing: 0.02em !important; } .dads-u-std-18B-160 { font-weight: bold !important; font-size: calc(18 / 16 * 1rem) !important; line-height: 1.6 !important; letter-spacing: 0.02em !important; } .dads-u-std-17B-170 { font-weight: bold !important; font-size: calc(17 / 16 * 1rem) !important; line-height: 1.7 !important; letter-spacing: 0.02em !important; } .dads-u-std-16B-170 { font-weight: bold !important; font-size: calc(16 / 16 * 1rem) !important; line-height: 1.7 !important; letter-spacing: 0.02em !important; } .dads-u-std-16B-175 { font-weight: bold !important; font-size: calc(16 / 16 * 1rem) !important; line-height: 1.75 !important; letter-spacing: 0.02em !important; } .dads-u-std-45N-140 { font-weight: normal !important; font-size: calc(45 / 16 * 1rem) !important; line-height: 1.4 !important; letter-spacing: 0 !important; } .dads-u-std-36N-140 { font-weight: normal !important; font-size: calc(36 / 16 * 1rem) !important; line-height: 1.4 !important; letter-spacing: 0.01em !important; } .dads-u-std-32N-150 { font-weight: normal !important; font-size: calc(32 / 16 * 1rem) !important; line-height: 1.5 !important; letter-spacing: 0.01em !important; } .dads-u-std-28N-150 { font-weight: normal !important; font-size: calc(28 / 16 * 1rem) !important; line-height: 1.5 !important; letter-spacing: 0.01em !important; } .dads-u-std-26N-150 { font-weight: normal !important; font-size: calc(26 / 16 * 1rem) !important; line-height: 1.5 !important; letter-spacing: 0.02em !important; } .dads-u-std-24N-150 { font-weight: normal !important; font-size: calc(24 / 16 * 1rem) !important; line-height: 1.5 !important; letter-spacing: 0.02em !important; } .dads-u-std-22N-150 { font-weight: normal !important; font-size: calc(22 / 16 * 1rem) !important; line-height: 1.5 !important; letter-spacing: 0.02em !important; } .dads-u-std-20N-150 { font-weight: normal !important; font-size: calc(20 / 16 * 1rem) !important; line-height: 1.5 !important; letter-spacing: 0.02em !important; } .dads-u-std-18N-160 { font-weight: normal !important; font-size: calc(18 / 16 * 1rem) !important; line-height: 1.6 !important; letter-spacing: 0.02em !important; } .dads-u-std-17N-170 { font-weight: normal !important; font-size: calc(17 / 16 * 1rem) !important; line-height: 1.7 !important; letter-spacing: 0.02em !important; } .dads-u-std-16N-170 { font-weight: normal !important; font-size: calc(16 / 16 * 1rem) !important; line-height: 1.7 !important; letter-spacing: 0.02em !important; } .dads-u-std-16N-175 { font-weight: normal !important; font-size: calc(16 / 16 * 1rem) !important; line-height: 1.75 !important; letter-spacing: 0.02em !important; } .dads-u-dns-17B-130 { font-weight: bold !important; font-size: calc(17 / 16 * 1rem) !important; line-height: 1.3 !important; letter-spacing: 0 !important; } .dads-u-dns-17B-120 { font-weight: bold !important; font-size: calc(17 / 16 * 1rem) !important; line-height: 1.2 !important; letter-spacing: 0 !important; } .dads-u-dns-16B-130 { font-weight: bold !important; font-size: calc(16 / 16 * 1rem) !important; line-height: 1.3 !important; letter-spacing: 0 !important; } .dads-u-dns-16B-120 { font-weight: bold !important; font-size: calc(16 / 16 * 1rem) !important; line-height: 1.2 !important; letter-spacing: 0 !important; } .dads-u-dns-14B-130 { font-weight: bold !important; font-size: calc(14 / 16 * 1rem) !important; line-height: 1.3 !important; letter-spacing: 0 !important; } .dads-u-dns-14B-120 { font-weight: bold !important; font-size: calc(14 / 16 * 1rem) !important; line-height: 1.2 !important; letter-spacing: 0 !important; } .dads-u-dns-17N-130 { font-weight: normal !important; font-size: calc(17 / 16 * 1rem) !important; line-height: 1.3 !important; letter-spacing: 0 !important; } .dads-u-dns-17N-120 { font-weight: normal !important; font-size: calc(17 / 16 * 1rem) !important; line-height: 1.2 !important; letter-spacing: 0 !important; } .dads-u-dns-16N-130 { font-weight: normal !important; font-size: calc(16 / 16 * 1rem) !important; line-height: 1.3 !important; letter-spacing: 0 !important; } .dads-u-dns-16N-120 { font-weight: normal !important; font-size: calc(16 / 16 * 1rem) !important; line-height: 1.2 !important; letter-spacing: 0 !important; } .dads-u-dns-14N-130 { font-weight: normal !important; font-size: calc(14 / 16 * 1rem) !important; line-height: 1.3 !important; letter-spacing: 0 !important; } .dads-u-dns-14N-120 { font-weight: normal !important; font-size: calc(14 / 16 * 1rem) !important; line-height: 1.2 !important; letter-spacing: 0 !important; } .dads-u-oln-17B-100 { font-weight: bold !important; font-size: calc(17 / 16 * 1rem) !important; line-height: 1 !important; letter-spacing: 0.02em !important; } .dads-u-oln-16B-100 { font-weight: bold !important; font-size: calc(16 / 16 * 1rem) !important; line-height: 1 !important; letter-spacing: 0.02em !important; } .dads-u-oln-14B-100 { font-weight: bold !important; font-size: calc(14 / 16 * 1rem) !important; line-height: 1 !important; letter-spacing: 0.02em !important; } .dads-u-oln-17N-100 { font-weight: normal !important; font-size: calc(17 / 16 * 1rem) !important; line-height: 1 !important; letter-spacing: 0.02em !important; } .dads-u-oln-16N-100 { font-weight: normal !important; font-size: calc(16 / 16 * 1rem) !important; line-height: 1 !important; letter-spacing: 0.02em !important; } .dads-u-oln-14N-100 { font-weight: normal !important; font-size: calc(14 / 16 * 1rem) !important; line-height: 1 !important; letter-spacing: 0.02em !important; } .dads-u-mono-17B-150 { font-weight: bold !important; font-size: calc(17 / 16 * 1rem) !important; line-height: 1.5 !important; font-family: var(--font-family-mono) !important; letter-spacing: 0 !important; } .dads-u-mono-16B-150 { font-weight: bold !important; font-size: calc(16 / 16 * 1rem) !important; line-height: 1.5 !important; font-family: var(--font-family-mono) !important; letter-spacing: 0 !important; } .dads-u-mono-14B-150 { font-weight: bold !important; font-size: calc(14 / 16 * 1rem) !important; line-height: 1.5 !important; font-family: var(--font-family-mono) !important; letter-spacing: 0 !important; } .dads-u-mono-17N-150 { font-weight: normal !important; font-size: calc(17 / 16 * 1rem) !important; line-height: 1.5 !important; font-family: var(--font-family-mono) !important; letter-spacing: 0 !important; } .dads-u-mono-16N-150 { font-weight: normal !important; font-size: calc(16 / 16 * 1rem) !important; line-height: 1.5 !important; font-family: var(--font-family-mono) !important; letter-spacing: 0 !important; } .dads-u-mono-14N-150 { font-weight: normal !important; font-size: calc(14 / 16 * 1rem) !important; line-height: 1.5 !important; font-family: var(--font-family-mono) !important; letter-spacing: 0 !important; }","link":"/design-system/src/global.css"},{"title":"","text":".dads-accordion { --_icon-size: calc(20 / 16 * 1rem); border-bottom: 1px solid var(--color-neutral-solid-gray-420); } @media (min-width: 48rem) { .dads-accordion { --_icon-size: calc(32 / 16 * 1rem); } } .dads-accordion__summary { position: relative; display: block; padding: calc(8 / 16 * 1rem) calc(8 / 16 * 1rem) calc(8 / 16 * 1rem) calc(var(--_icon-size) + 0.75rem); color: var(--color-neutral-solid-gray-800); font-weight: normal; font-size: calc(16 / 16 * 1rem); line-height: 1.7; font-family: var(--font-family-sans); letter-spacing: 0.02em; cursor: default; } .dads-accordion__summary::marker { content: \"\"; } .dads-accordion__summary::-webkit-details-marker { display: none; } @media (min-width: 48rem) { .dads-accordion__summary { padding: calc(16 / 16 * 1rem) calc(16 / 16 * 1rem) calc(16 / 16 * 1rem) calc(var(--_icon-size) + calc(20 / 16 * 1rem)); font-size: calc(18 / 16 * 1rem); line-height: 1.6; } } @media (hover: hover) { .dads-accordion__summary:hover:not(:focus-visible) { background-color: var(--color-neutral-solid-gray-50); } } .dads-accordion__summary:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); border-radius: calc(4 / 16 * 1rem); background-color: var(--color-primitive-yellow-300); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-accordion__icon { position: absolute; top: calc(8 / 16 * 1rem); left: calc(2 / 16 * 1rem); margin-top: calc((1lh - var(--_icon-size)) / 2); display: inline-flex; align-items: center; justify-content: center; box-sizing: border-box; width: var(--_icon-size); height: var(--_icon-size); border-radius: 50%; border: 1px solid currentcolor; background-color: var(--color-neutral-white); color: var(--color-primitive-blue-1000); } @media (min-width: 48rem) { .dads-accordion__icon { top: calc(14 / 16 * 1rem); left: calc(6 / 16 * 1rem); } } .dads-accordion[open] .dads-accordion__icon { transform: rotate(180deg); } @media (hover: hover) { .dads-accordion__summary:hover .dads-accordion__icon { outline: calc(2 / 16 * 1rem) solid currentcolor; } } .dads-accordion__icon-svg { margin-top: calc(2 / 16 * 1rem); width: calc(16 / 16 * 1rem); height: calc(16 / 16 * 1rem); pointer-events: none; } @media (min-width: 48rem) { .dads-accordion__icon-svg { width: auto; height: auto; } } .dads-accordion__summary :is(h1, h2, h3, h4, h5, h6) { margin: 0; font: inherit; } .dads-accordion__content { padding: calc(16 / 16 * 1rem) calc(8 / 16 * 1rem) calc(16 / 16 * 1rem) calc(var(--_icon-size) + 0.75rem); } @media (min-width: 48rem) { .dads-accordion__content { padding: calc(24 / 16 * 1rem) calc(16 / 16 * 1rem) calc(24 / 16 * 1rem) calc(var(--_icon-size) + 1.25rem); } } .dads-accordion__back-link:any-link { display: flex; align-items: flex-start; gap: calc(6 / 16 * 1rem); width: fit-content; color: var(--color-primitive-blue-1000); text-decoration: underline; text-decoration-thickness: calc(1 / 16 * 1rem); text-underline-offset: calc(3 / 16 * 1rem); text-spacing-trim: trim-start; } @media (hover: hover) { .dads-accordion__back-link:hover { color: var(--color-primitive-blue-900); text-decoration-thickness: calc(3 / 16 * 1rem); } } .dads-accordion__back-link:active { color: var(--color-primitive-orange-800); text-decoration-thickness: calc(1 / 16 * 1rem); } .dads-accordion__back-link:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); border-radius: calc(4 / 16 * 1rem); background-color: var(--color-primitive-yellow-300); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-accordion__back-link-icon { margin-top: calc((1lh - 24 / 16 * 1rem) / 2); flex-shrink: 0; }","link":"/design-system/src/components/accordion/accordion.css"},{"title":"","text":"/* Foundations用のカスタムスタイル */ .color-section { margin-top: 5rem; margin-bottom: 5rem; } .color-group { margin-top: 3rem; margin-bottom: 3rem; } .color-grid { display: flex; gap: 2rem; } .color-card { flex: 0 0 auto; width: 200px; border-radius: 8px; background: var(--color-neutral-white); } .color-info { margin-bottom: 0.25rem; } .color-level { margin-top: 0; margin-bottom: 0; font-weight: bold; } .color-chip { aspect-ratio: 4 / 3; margin-bottom: 0.25rem; } .color-css { font-size: 0.75rem; font-family: var(--font-family-mono); background: var(--color-neutral-solid-gray-50); padding: 0.5rem; border-radius: 4px; margin-top: 1em; margin-bottom: 0.25rem; white-space: pre-wrap; } .color-css code { display: block; font-family: inherit; } .typography-preview { max-width: 300px; } .typography-class { font-size: 0.875rem; font-family: var(--font-family-mono); background: var(--color-neutral-solid-gray-50); padding: 0.5rem; border-radius: 4px; margin-bottom: 0.5rem; } .typography-class code { display: block; font-family: inherit; } .typography-css { font-size: 0.875rem; font-family: var(--font-family-mono); background: var(--color-neutral-solid-gray-50); padding: 0.5rem; border-radius: 4px; margin-bottom: 0.5rem; } .typography-css code { display: block; font-family: inherit; } .elevation-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 3rem; margin-bottom: 2rem; } .elevation-card { background: var(--color-neutral-white); } .elevation-preview { max-height: 200px; aspect-ratio: 16 / 9; background: var(--color-neutral-white); border-radius: 4px; margin-bottom: 1rem; display: flex; align-items: center; justify-content: center; font-size: 0.875rem; color: var(--color-neutral-solid-gray-600); } .elevation-label { font-size: 1rem; font-weight: bold; margin-top: 0; margin-bottom: 0.5rem; color: var(--color-neutral-solid-gray-700); } .elevation-css { font-size: 0.875rem; font-family: var(--font-family-mono); background: var(--color-neutral-solid-gray-50); padding: 0.5rem; border-radius: 4px; margin-top: 1em; margin-bottom: 0.25rem; white-space: pre-wrap; } .elevation-css code { display: block; font-family: inherit; }","link":"/design-system/src/docs/foundations/foundations.css"},{"title":"","text":"Accordion ダミーテキストとは何ですか？ これはダミーテキストです。 ダミーテキストは、デザインやレイアウトの作成時に使用される仮の文章です。ダミーテキストを使用すると、デザインの全体像を評価したり、テキストの配置や長さを確認したりすることができます。ダミーテキストは実際の文章ではないので、内容には意味がありません。 「ダミーテキストとは何ですか？」の先頭に戻る","link":"/design-system/src/components/accordion/playground.html"},{"title":"","text":"import path from \"node:path\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt(\"stacked\", path.join(dirname, \"stacked.html\"), { ignoreElements: [\".dads-accordion__content\"], });","link":"/design-system/src/components/accordion/accordion.test.js"},{"title":"","text":"Accordion ダミーテキストとは何ですか？ これはダミーテキストです。 ダミーテキストは、デザインやレイアウトの作成時に使用される仮の文章です。ダミーテキストを使用すると、デザインの全体像を評価したり、テキストの配置や長さを確認したりすることができます。ダミーテキストは実際の文章ではないので、内容には意味がありません。 「ダミーテキストとは何ですか？」の先頭に戻る ダミーテキストがデザインやレイアウトに使用されていることがよくありますが、どのような目的や意味で使用されているのでしょうか？ これはダミーテキストです。ダミーテキストは、デザインやレイアウトの作成時に使用される仮の文章です。ダミーテキストを使用すると、デザインの全体像を評価したり、テキストの配置や長さを確認したりすることができます。ダミーテキストは実際の文章ではないので、内容には意味がありません。これはダミーテキストです。ダミーテキストは、デザインやレイアウトの作成時に使用される仮の文章です。ダミーテキストを使用すると、デザインの全体像を評価したり、テキストの配置や長さを確認したりすることができます。ダミーテキストは実際の文章ではないので、内容には意味がありません。 「ダミーテキストがデザインやレイアウトに使用されていることがよくありますが、どのような目的や意味で使用されているのでしょうか？」の先頭に戻る ダミーテキストはどのような場合に使用されますか？ これはダミーテキストです。 ダミーテキストは、デザインやレイアウトの作成時に使用される仮の文章です。 ダミーテキストを使用すると、デザインの全体像を評価したり、テキストの配置や長さを確認したりすることができます。ダミーテキストは実際の文章ではないので、内容には意味がありません。 「ダミーテキストはどのような場合に使用されますか？」の先頭に戻る","link":"/design-system/src/components/accordion/stacked.html"},{"title":"","text":".dads-blockquote { margin: 0 calc(40 / 16 * 1rem); border-left: 8px solid var(--color-neutral-solid-gray-536); padding-top: calc(8 / 16 * 1rem); padding-right: calc(16 / 16 * 1rem); padding-bottom: calc(8 / 16 * 1rem); padding-left: calc(24 / 16 * 1rem); } .dads-blockquote > *:first-child { margin-top: 0 !important; } .dads-blockquote > *:last-child { margin-bottom: 0 !important; }","link":"/design-system/src/components/blockquote/blockquote.css"},{"title":"","text":"Blockquote これは引用文の例です。デジタル庁デザインシステムでは、アクセシビリティファーストの原則に基づいて、すべてのユーザーが利用しやすいサービスの提供を目指しています。 これは複数の段落を含めている例です。 最初と最後の段落のマージンは自動的に調整されます。","link":"/design-system/src/components/blockquote/multiple-paragraphs.html"},{"title":"","text":"Blockquote これは引用文の例です。デジタル庁デザインシステムでは、アクセシビリティファーストの原則に基づいて、すべてのユーザーが利用しやすいサービスの提供を目指しています。","link":"/design-system/src/components/blockquote/playground.html"},{"title":"","text":"Blockquote デジタル庁デザインシステムは、以下の理念を追求して作成されています。 アクセシビリティファースト 行政機関にとって高い汎用性と利便性 継続的かつ持続可能な改善活動および研究と実践 これにより、デジタル化の恩恵をすべての人に届けられる日本のデジタル化社会の構築に寄与します。","link":"/design-system/src/components/blockquote/with-list.html"},{"title":"","text":"Button ボタン ボタン ボタン ボタン ボタン ボタン ボタン ボタン ボタン ボタン ボタン ボタン ボタン ボタン ボタン ボタン ボタン ボタン ボタン ボタン","link":"/design-system/src/components/button/all-buttons-using-button.html"},{"title":"","text":"Button ボタン ボタン ボタン ボタン ボタン ボタン ボタン ボタン ボタン ボタン ボタン ボタン ボタン ボタン ボタン ボタン ボタン ボタン ボタン ボタン","link":"/design-system/src/components/button/all-buttons-using-link.html"},{"title":"","text":"Button ボタン","link":"/design-system/src/components/button/playground.html"},{"title":"","text":".dads-button { --button-color: var(--color-primitive-blue-900); --button-hover-color: var(--color-primitive-blue-1000); --button-active-color: var(--color-primitive-blue-1200); --button-outline-hover-bg-color: var(--color-primitive-blue-200); --button-outline-active-bg-color: var(--color-primitive-blue-300); display: flex; align-items: center; justify-content: center; column-gap: calc(4 / 16 * 1rem); box-sizing: border-box; width: fit-content; max-width: 100%; font-weight: bold; font-size: calc(16 / 16 * 1rem); line-height: 1; font-family: var(--font-family-sans); letter-spacing: 0.02em; text-decoration: none; text-underline-offset: calc(3 / 16 * 1rem); } .dads-button:disabled, .dads-button[aria-disabled=\"true\"] { cursor: default; } .dads-button[data-type=\"solid-fill\"] { border: 4px double transparent; background-color: var(--button-color); color: var(--color-neutral-white); } @media (hover: hover) { .dads-button[data-type=\"solid-fill\"]:hover { background-color: var(--button-hover-color); text-decoration: underline; text-decoration-thickness: calc(1 / 16 * 1rem); } } .dads-button[data-type=\"solid-fill\"]:active { background-color: var(--button-active-color); text-decoration: underline; } .dads-button[data-type=\"solid-fill\"]:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-button[data-type=\"solid-fill\"]:disabled, .dads-button[data-type=\"solid-fill\"][aria-disabled=\"true\"] { background-color: var(--color-neutral-solid-gray-300); color: var(--color-neutral-solid-gray-50); text-decoration: none; } @media (forced-colors: active) { .dads-button[data-type=\"solid-fill\"]:disabled, .dads-button[data-type=\"solid-fill\"][aria-disabled=\"true\"] { border-color: GrayText; color: GrayText; } } .dads-button[data-type=\"outline\"] { border: 1px solid currentcolor; background-color: var(--color-neutral-white); color: var(--button-color); } @media (hover: hover) { .dads-button[data-type=\"outline\"]:hover { background-color: var(--button-outline-hover-bg-color); color: var(--button-hover-color); text-decoration: underline; text-decoration-thickness: calc(1 / 16 * 1rem); } } .dads-button[data-type=\"outline\"]:active { background-color: var(--button-outline-active-bg-color); color: var(--button-active-color); text-decoration: underline; } .dads-button[data-type=\"outline\"]:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-button[data-type=\"outline\"]:disabled, .dads-button[data-type=\"outline\"][aria-disabled=\"true\"] { background-color: var(--color-neutral-white); color: var(--color-neutral-solid-gray-300); text-decoration: none; } @media (forced-colors: active) { .dads-button[data-type=\"outline\"]:disabled, .dads-button[data-type=\"outline\"][aria-disabled=\"true\"] { border-color: GrayText; color: GrayText; } } .dads-button[data-type=\"text\"] { border: 0; background-color: transparent; color: var(--button-color); text-decoration: underline; } @media (hover: hover) { .dads-button[data-type=\"text\"]:hover { background-color: var(--color-primitive-blue-50); color: var(--button-hover-color); text-decoration-thickness: calc(3 / 16 * 1rem); } } .dads-button[data-type=\"text\"]:active { background-color: var(--color-primitive-blue-100); color: var(--button-active-color); } .dads-button[data-type=\"text\"]:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); background-color: var(--color-primitive-yellow-300); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-button[data-type=\"text\"]:disabled, .dads-button[data-type=\"text\"][aria-disabled=\"true\"] { background-color: transparent; color: var(--color-neutral-solid-gray-300); text-decoration-thickness: revert; } @media (forced-colors: active) { .dads-button[data-type=\"text\"]:disabled, .dads-button[data-type=\"text\"][aria-disabled=\"true\"] { color: GrayText; } } .dads-button[data-size=\"lg\"] { min-width: calc(136 / 16 * 1rem); min-height: calc(56 / 16 * 1rem); border-radius: calc(8 / 16 * 1rem); padding: calc(12 / 16 * 1rem) calc(16 / 16 * 1rem); } .dads-button[data-size=\"md\"] { min-width: calc(96 / 16 * 1rem); min-height: calc(48 / 16 * 1rem); border-radius: calc(8 / 16 * 1rem); padding: calc(8 / 16 * 1rem) calc(16 / 16 * 1rem); } .dads-button[data-size=\"sm\"] { position: relative; min-width: calc(80 / 16 * 1rem); min-height: calc(36 / 16 * 1rem); border-radius: calc(6 / 16 * 1rem); padding: calc(2 / 16 * 1rem) calc(12 / 16 * 1rem); } .dads-button[data-size=\"sm\"]::after { content: \"\"; position: absolute; inset: 0; margin: auto; height: calc(44 / 16 * 1rem); } .dads-button[data-size=\"xs\"] { position: relative; min-width: calc(72 / 16 * 1rem); min-height: calc(28 / 16 * 1rem); border-radius: calc(4 / 16 * 1rem); padding: calc(2 / 16 * 1rem) calc(8 / 16 * 1rem); font-size: calc(14 / 16 * 1rem); } .dads-button[data-size=\"xs\"]::after { content: \"\"; position: absolute; inset: 0; margin: auto; height: calc(44 / 16 * 1rem); } .dads-button__icon { flex-shrink: 0; }","link":"/design-system/src/components/button/button.css"},{"title":"","text":".dads-breadcrumb { display: flex; column-gap: calc(4 / 16 * 1rem); color: var(--color-neutral-solid-gray-800); font-weight: normal; font-size: calc(16 / 16 * 1rem); line-height: 1.7; font-family: var(--font-family-sans); letter-spacing: 0.02em; } .dads-breadcrumb__label { flex-shrink: 0; } .dads-breadcrumb__label::after { content: \"：\"; } .dads-breadcrumb__list { list-style-type: \"\"; margin: 0; padding: 0; } .dads-breadcrumb__item { display: inline; overflow-wrap: break-word; } .dads-breadcrumb__link:any-link { color: var(--color-primitive-blue-1000); text-decoration: underline; text-decoration-thickness: calc(1 / 16 * 1rem); text-underline-offset: calc(3 / 16 * 1rem); } @media (hover: hover) { .dads-breadcrumb__link:hover { color: var(--color-primitive-blue-900); text-decoration-thickness: calc(3 / 16 * 1rem); } } .dads-breadcrumb__link:active { color: var(--color-primitive-orange-800); text-decoration-thickness: calc(1 / 16 * 1rem); } .dads-breadcrumb__link:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); border-radius: calc(4 / 16 * 1rem); background-color: var(--color-primitive-yellow-300); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-breadcrumb__link-icon { display: inline-block; vertical-align: -0.15em; width: calc(16 / 16 * 1rem); height: calc(16 / 16 * 1rem); } .dads-breadcrumb__separator::before, .dads-breadcrumb__separator::after { content: \" \"; } .dads-breadcrumb__separator-icon { display: inline-block; margin-right: calc(1 / 16 * 1rem); margin-left: calc(1 / 16 * 1rem); width: calc(12 / 16 * 1rem); height: calc(12 / 16 * 1rem); vertical-align: middle; color: var(--color-neutral-solid-gray-900); }","link":"/design-system/src/components/breadcrumb/breadcrumb.css"},{"title":"","text":"import path from \"node:path\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt( \"with-visible-label\", path.join(dirname, \"with-visible-label.html\"), ); resetCssVrt(\"with-home-icon\", path.join(dirname, \"with-home-icon.html\"));","link":"/design-system/src/components/breadcrumb/breadcrumb.test.js"},{"title":"","text":"Breadcrumb 現在位置 ホーム 組織情報 長いページタイトルが入ります長いページタイトルが入ります 長いページタイトルが入ります長いページタイトルが入ります 長いページタイトルが入ります長いページタイトルが入ります","link":"/design-system/src/components/breadcrumb/plain.html"},{"title":"","text":"Breadcrumb 現在位置 ホーム 組織情報 長いページタイトルが入ります長いページタイトルが入ります 長いページタイトルが入ります長いページタイトルが入ります 長いページタイトルが入ります長いページタイトルが入ります","link":"/design-system/src/components/breadcrumb/with-home-icon.html"},{"title":"","text":"Breadcrumb 現在位置 ホーム 組織情報 長いページタイトルが入ります長いページタイトルが入ります 長いページタイトルが入ります長いページタイトルが入ります 長いページタイトルが入ります長いページタイトルが入ります","link":"/design-system/src/components/breadcrumb/with-visible-label.html"},{"title":"","text":"import path from \"node:path\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt( \"all-buttons-using-button\", path.join(dirname, \"all-buttons-using-button.html\"), ); resetCssVrt( \"all-buttons-using-link\", path.join(dirname, \"all-buttons-using-link.html\"), );","link":"/design-system/src/components/button/button.test.js"},{"title":"","text":".dads-carousel { container-type: inline-size; display: block; } .dads-carousel__inner { position: relative; z-index: 0; box-sizing: border-box; max-width: calc(1024 / 16 * 1rem); color: var(--color-neutral-solid-gray-800); font-weight: normal; font-size: calc(16 / 16 * 1rem); line-height: 1.7; font-family: var(--font-family-sans); letter-spacing: 0.02em; } @container (min-width: 64rem) { .dads-carousel__inner { padding-right: calc(48 / 16 * 1rem); padding-left: calc(48 / 16 * 1rem); } } .dads-carousel__number { margin: 0; display: flex; justify-content: center; align-items: center; box-sizing: border-box; width: calc(32 / 16 * 1rem); height: calc(32 / 16 * 1rem); border: 1px solid var(--color-neutral-solid-gray-800); border-radius: 50%; background-color: var(--color-neutral-white); padding: 0 0 calc(2 / 16 * 1rem); color: var(--color-neutral-solid-gray-800); font: inherit; font-weight: bold; font-size: calc(16 / 16 * 1rem); line-height: 1; letter-spacing: 0.02em; } .dads-carousel__number[aria-current=\"true\"], .dads-carousel__number[aria-selected=\"true\"] { background-color: var(--color-neutral-solid-gray-800); color: var(--color-neutral-white); box-shadow: 0 0 0 2px var(--color-neutral-white); outline: 1px solid var(--color-neutral-solid-gray-800); outline-offset: 2px; } .dads-carousel__panel-set { display: grid; grid-template: \"main\" auto / auto; } @container (min-width: 64rem) { .dads-carousel__panel-set { margin-right: calc(-48 / 16 * 1rem); margin-left: calc(-48 / 16 * 1rem); grid-template: \"number main next .\" auto / calc(48 / 16 * 1rem) 3fr 1fr calc(48 / 16 * 1rem); } } .dads-carousel__panel-set::before { grid-area: number; justify-self: center; display: none; border-right: 1px solid var(--color-neutral-black); height: 100%; content: \"\"; } .dads-carousel__panel-number { grid-area: number; justify-self: center; display: none; } .dads-carousel__main-bg { position: relative; z-index: -1; grid-area: main; overflow: clip; } .dads-carousel__main-bg > div { position: absolute; inset: -50% 0; display: flex; flex-direction: column; align-items: center; filter: blur(25px); transform: translate3d(0, 0, 0); /* for better performance on Safari */ } .dads-carousel__main-bg > div img { width: auto; height: 200%; } .dads-carousel__main-bg > div::after { position: absolute; inset: 0; background-color: var(--color-neutral-white); mix-blend-mode: soft-light; content: \"\"; } .dads-carousel__main { grid-area: main; position: relative; min-width: 0; } .dads-carousel__main-link { display: block; } @media (hover: hover) { .dads-carousel__main-link:any-link:hover:not(:focus-visible) { outline: calc(4 / 16 * 1rem) solid var(--color-primitive-blue-900); outline-offset: calc(-2 / 16 * 1rem); } .dads-carousel__main-link:any-link:hover:not(:focus-visible)::after { position: absolute; inset: 2px; box-shadow: inset 0 0 0 calc(2 / 16 * 1rem) var(--color-neutral-white); pointer-events: none; content: \"\"; } } .dads-carousel__main-link:focus-visible { overflow: hidden; outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(-2 / 16 * 1rem); border-radius: calc(8 / 16 * 1rem); } .dads-carousel__main-link:focus-visible::after { position: absolute; inset: 2px; box-shadow: inset 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); border-radius: calc(6 / 16 * 1rem); pointer-events: none; content: \"\"; } .dads-carousel__image-container { display: grid; place-content: center; height: 100%; border-radius: inherit; outline: 2px solid var(--color-neutral-black); outline-offset: -2px; } .dads-carousel__image-container img { display: block; width: auto; max-width: 100%; height: auto; } .dads-carousel__next-bg { position: relative; z-index: -1; display: none; grid-area: next; overflow: clip; } .dads-carousel__next-bg > div { position: absolute; inset: -50% 0; display: flex; flex-direction: column; align-items: center; filter: blur(25px); transform: translate3d(0, 0, 0); /* for better performance on Safari */ } .dads-carousel__next-bg > div img { width: auto; height: 200%; } .dads-carousel__next-bg > div::after { position: absolute; inset: 0; background-color: var(--color-neutral-white); mix-blend-mode: soft-light; content: \"\"; } @container (min-width: 64rem) { .dads-carousel__next-bg { display: block; } } .dads-carousel__next { grid-area: next; margin: 0; display: none; min-width: 0; border: 1px solid var(--color-neutral-solid-gray-420); border-left-width: 0; padding: calc(24 / 16 * 1rem); } @container (min-width: 64rem) { .dads-carousel__next { display: block; } } .dads-carousel__next > button { position: relative; border: 1px solid var(--color-neutral-solid-gray-420); background-color: var(--color-neutral-white); padding: 0; font: inherit; text-align: left; text-decoration: underline; text-decoration-thickness: calc(1 / 16 * 1rem); text-underline-offset: calc(3 / 16 * 1rem); cursor: pointer; touch-action: manipulation; } @media (hover: hover) { .dads-carousel__next > button:hover { outline: calc(4 / 16 * 1rem) solid var(--color-primitive-blue-900); outline-offset: -1px; text-decoration-thickness: calc(3 / 16 * 1rem); } .dads-carousel__next > button:hover:not(:focus-visible)::after { position: absolute; inset: 0; box-shadow: inset 0 0 0 calc(2 / 16 * 1rem) var(--color-neutral-white); pointer-events: none; content: \"\"; } } .dads-carousel__next > button:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); border-radius: calc(4 / 16 * 1rem); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-carousel__next-image-container img { display: block; width: auto; max-width: 100%; height: auto; } .dads-carousel__next-image-label { display: block; border-top: 1px solid var(--color-neutral-solid-gray-420); padding: calc(16 / 16 * 1rem); font-weight: bold; font-size: calc(16 / 16 * 1rem); line-height: 1.7; letter-spacing: 0.02em; text-decoration-thickness: inherit; } .dads-carousel__controls { display: flex; align-items: center; column-gap: calc(20 / 16 * 1rem); padding: calc(12 / 16 * 1rem) 0; } @container (min-width: 64rem) { .dads-carousel__controls { column-gap: calc(32 / 16 * 1rem); } } .dads-carousel__others[open] { flex: 1; } .dads-carousel__others .dads-disclosure__summary { border-radius: calc(8 / 16 * 1rem); border: 1px solid var(--color-neutral-solid-gray-600); background-color: var(--color-neutral-white) !important; padding: calc(8 / 16 * 1rem) calc(12 / 16 * 1rem); cursor: pointer; } .dads-carousel__others-content.dads-disclosure__content { margin: calc(12 / 16 * 1rem) 0 0; padding-left: 0; } .dads-carousel__others-content > ul { display: grid; row-gap: calc(24 / 16 * 1rem); margin: 0; padding: 0; list-style-type: none; } .dads-carousel dads-carousel-step-nav { display: none; } @container (min-width: 64rem) { .dads-carousel dads-carousel-step-nav { display: flex; } } .dads-carousel__step-nav { position: relative; margin: 0; display: flex; justify-content: end; column-gap: calc(16 / 16 * 1rem); padding: 0; list-style-type: none; } .dads-carousel__step-nav > li { position: relative; flex-shrink: 0; } .dads-carousel__step-nav > li:not(:last-child)::before { position: absolute; top: 50%; left: 100%; width: calc(16 / 16 * 1rem); border-bottom: 1px solid var(--color-neutral-solid-gray-800); content: \"\"; } .dads-carousel__step { position: relative; } .dads-carousel__step:not([aria-selected=\"true\"]) { text-decoration: underline; text-decoration-thickness: calc(1 / 16 * 1rem); text-underline-offset: calc(3 / 16 * 1rem); } .dads-carousel__step::after { position: absolute; inset: calc(-7 / 16 * 1rem); content: \"\"; } @media (hover: hover) { .dads-carousel__step:not([aria-selected=\"true\"]):hover { text-decoration-thickness: calc(3 / 16 * 1rem); cursor: pointer; } } .dads-carousel__step:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-carousel__page-nav { flex-shrink: 0; position: relative; margin: 0; display: flex; justify-content: end; align-items: center; column-gap: calc(12 / 16 * 1rem); padding: 0; } @container (min-width: 64rem) { .dads-carousel__page-nav { display: none; } } .dads-carousel__page-nav > button { position: relative; display: flex; justify-content: center; align-items: center; width: calc(24 / 16 * 1rem); height: calc(24 / 16 * 1rem); border: 1px solid var(--color-primitive-blue-1000); border-radius: 50%; background-color: var(--color-neutral-white); padding: 0; color: var(--color-primitive-blue-1000); cursor: pointer; } .dads-carousel__page-nav > button::after { position: absolute; inset: -100%; margin: auto; width: calc(44 / 16 * 1rem); height: calc(44 / 16 * 1rem); content: \"\"; } .dads-carousel__page-nav > button:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-carousel__page-nav > span { text-box-trim: trim-both; text-box-edge: cap alphabetic; } .dads-carousel__others { order: -1; } /* 展開中 */ @container (min-width: 64rem) { .dads-carousel:has([open]) .dads-carousel__panel-set::before { display: block; } .dads-carousel:has([open]) .dads-carousel__panel-number { display: flex; } .dads-carousel:has([open]) .dads-carousel__next-bg { display: none; } .dads-carousel:has([open]) .dads-carousel__next { display: none; } .dads-carousel:has([open]) dads-carousel-step-nav { display: none; } } .dads-carousel:has([open]) .dads-carousel__controls { padding-bottom: calc(56 / 16 * 1rem); } .dads-carousel:has([open]) .dads-carousel__page-nav { display: none; } .dads-carousel:has([open]) .dads-carousel__expand { display: none; } .dads-carousel:has([open]) .dads-carousel__slides { display: grid; }","link":"/design-system/src/components/carousel/carousel.css"},{"title":"","text":"export class Carousel extends HTMLElement { #slideData = []; #currentIndex = 0; #abort = new AbortController(); #widthObserver = null; connectedCallback() { if (!this.hasAttribute(\"breakpoint-rem\")) { console.error(`: \"breakpoint-rem\" attr is required.`); return; } this.#widthObserver = new WidthObserver(this, this.breakpointRem); this.collectSlideData(); this.initializeSlideBgs(); this.setupEventListeners(); requestAnimationFrame(() => { this.update(); }); } disconnectedCallback() { this.#abort.abort(); this.#widthObserver?.disconnect(); } collectSlideData() { this.#slideData = this.slides.map((slide) => { const link = slide.querySelector(\"a\"); const href = link?.href; const target = link?.target; const rel = link?.rel; return { el: slide, href, target, rel }; }); } initializeSlideBgs() { for (const slide of this.#slideData) { const bg = slide.el.querySelector(\"[data-js-bg-container]\"); const image = this.getSlideImage(slide, { noAlt: true }); bg.innerHTML = \"\"; bg.appendChild(image); } } setupEventListeners() { const signal = this.#abort.signal; this.nextButton.addEventListener(\"click\", () => this.next(), { signal }); this.prevSlideButton.addEventListener(\"click\", () => this.prev(), { signal, }); this.nextSlideButton.addEventListener(\"click\", () => this.next(), { signal, }); this.addEventListener(\"select\", (event) => this.goTo(event.detail.index), { signal, }); this.#widthObserver.addEventListener(\"change\", () => this.update(), { signal, }); } update() { const nextIndex = (this.#currentIndex + 1) % this.#slideData.length; const current = this.#slideData[this.#currentIndex]; const next = this.#slideData[nextIndex]; this.currentNumber.textContent = this.#currentIndex + 1; if (this.#widthObserver.matches) { this.mainPanel.setAttribute(\"role\", \"tabpanel\"); this.mainPanel.setAttribute( \"aria-label\", `${this.unit}${this.#currentIndex + 1}`, ); } else { this.mainPanel.removeAttribute(\"role\"); this.mainPanel.removeAttribute(\"aria-label\"); } if (current.href) { this.mainLink.href = current.href; this.mainLink.target = current.target || \"_self\"; this.mainLink.rel = current.rel || \"\"; } else { this.mainLink.removeAttribute(\"href\"); this.mainLink.removeAttribute(\"target\"); this.mainLink.removeAttribute(\"rel\"); } this.mainLabel.textContent = `${this.unit}${this.#currentIndex + 1}`; const mainImage = this.getSlideImage(current); this.mainImages.innerHTML = \"\"; this.mainImages.appendChild(mainImage); const mainImageBg = this.getSlideImage(current, { noAlt: true }); this.mainBg.innerHTML = \"\"; this.mainBg.appendChild(mainImageBg); // Workaround for macOS Safari reading bug this.mainLink.replaceWith(this.mainLink.cloneNode(true)); const nextImage = this.getSlideImage(next, { noAlt: true }); this.nextImageContainer.innerHTML = \"\"; this.nextImageContainer.appendChild(nextImage); const nextImageBg = this.getSlideImage(next, { noAlt: true }); this.nextBg.innerHTML = \"\"; this.nextBg.appendChild(nextImageBg); this.currentSlide.textContent = `${this.#currentIndex + 1} / ${this.#slideData.length}`; this.slideContainer.innerHTML = \"\"; this.slideContainer.append( ...[ ...this.#slideData.slice(this.#currentIndex + 1), ...this.#slideData.slice(0, this.#currentIndex), ].map((slide) => slide.el), ); this.stepNav.setSelectedIndex(this.#currentIndex); } getSlideImage(slide, { noAlt } = {}) { const picture = slide.el.querySelector(\"picture\"); const img = slide.el.querySelector(\"img\"); const imgOrPicture = (picture || img).cloneNode(true); const imgEl = picture ? imgOrPicture.querySelector(\"img\") : imgOrPicture; if (noAlt) { imgEl.alt = \"\"; } return imgOrPicture; } next() { this.#currentIndex = (this.#currentIndex + 1) % this.#slideData.length; this.update(); } prev() { this.#currentIndex = (this.#currentIndex + this.#slideData.length - 1) % this.#slideData.length; this.update(); } goTo(index) { this.#currentIndex = index; this.update(); } get breakpointRem() { return parseFloat(this.getAttribute(\"breakpoint-rem\")); } get unit() { return this.getAttribute(\"data-js-unit\") || \"Slide \"; } get slides() { return Array.from(this.querySelectorAll(\"[data-js-slide]\")); } get inner() { return this.firstElementChild; } get mainPanel() { return this.querySelector(\"[data-js-main-panel]\"); } get mainLink() { return this.querySelector(\"[data-js-main-link]\"); } get mainLabel() { return this.querySelector(\"[data-js-main-label]\"); } get mainImages() { return this.querySelector(\"[data-js-main-images]\"); } get mainBg() { return this.querySelector(\"[data-js-main-bg]\"); } get currentNumber() { return this.querySelector(\"[data-js-current-number]\"); } get nextButton() { return this.querySelector(\"[data-js-next-button]\"); } get nextImageContainer() { return this.querySelector(\"[data-js-next-image-container]\"); } get nextBg() { return this.querySelector(\"[data-js-next-bg]\"); } get stepNav() { return this.querySelector(\"dads-carousel-step-nav\"); } get prevSlideButton() { return this.querySelector(\"[data-js-prev-slide-button]\"); } get nextSlideButton() { return this.querySelector(\"[data-js-next-slide-button]\"); } get currentSlide() { return this.querySelector(\"[data-js-current-slide]\"); } get slideContainer() { return this.querySelector(\"[data-js-slide-container]\"); } } export class CarouselStepNav extends HTMLElement { #selectedIndex = 0; #abort = new AbortController(); connectedCallback() { this.setupEventListeners(); this.update(); } disconnectedCallback() { this.#abort.abort(); } setupEventListeners() { const signal = this.#abort.signal; this.tabs.forEach((tab, index) => { tab.addEventListener(\"click\", () => this.selectTab(index), { signal }); }); this.addEventListener( \"keydown\", (event) => { if (event.key === \"ArrowRight\" || event.key === \"ArrowDown\") { event.preventDefault(); this.next(); } else if (event.key === \"ArrowLeft\" || event.key === \"ArrowUp\") { event.preventDefault(); this.prev(); } }, { signal }, ); } next() { const newIndex = (this.#selectedIndex + 1) % this.tabs.length; this.selectTab(newIndex); } prev() { const newIndex = (this.#selectedIndex + this.tabs.length - 1) % this.tabs.length; this.selectTab(newIndex); } selectTab(index) { this.#selectedIndex = index; this.update(); this.tabs[index].focus(); const event = new CustomEvent(\"select\", { detail: { index }, bubbles: true, }); this.dispatchEvent(event); } setSelectedIndex(index) { this.#selectedIndex = index; this.update(); } update() { this.tabs.forEach((tab, i) => { const isSelected = i === this.#selectedIndex; tab.setAttribute(\"aria-selected\", isSelected ? \"true\" : \"false\"); tab.tabIndex = isSelected ? 0 : -1; }); } get tabs() { return Array.from(this.querySelectorAll(\"[role='tab']\")); } } class WidthObserver extends EventTarget { minWidth; matches; #resizeObserver; constructor(element, minWidthRem) { super(); this.minWidth = minWidthRem; this.matches = false; this.#resizeObserver = new ResizeObserver((entries) => { requestAnimationFrame(() => { for (const entry of entries) { const widthPx = entry.borderBoxSize[0].inlineSize; const remSize = parseFloat( getComputedStyle(document.documentElement).fontSize, ); const widthRem = widthPx / remSize; const currentMatches = widthRem >= minWidthRem; if (currentMatches !== this.matches) { this.matches = currentMatches; this.dispatchEvent( new CustomEvent(\"change\", { detail: { matches: currentMatches }, }), ); } } }); }); this.#resizeObserver.observe(element); } disconnect() { this.#resizeObserver.disconnect(); } } customElements.define(\"dads-carousel\", Carousel); customElements.define(\"dads-carousel-step-nav\", CarouselStepNav);","link":"/design-system/src/components/carousel/carousel.js"},{"title":"","text":"import path from \"node:path\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt(\"carousel-normal\", path.join(dirname, \"normal.html\"));","link":"/design-system/src/components/carousel/carousel.test.js"},{"title":"","text":"Carousel スライド1 次のスライド スライド1 スライド2 スライド3 スライド4 前のスライド 次のスライド すべてのスライド 1 スライド1 2 スライド2 3 スライド3 4 スライド4","link":"/design-system/src/components/carousel/normal.html"},{"title":"","text":".dads-calendar { display: flex; flex-direction: column; align-items: center; width: max-content; color: var(--color-neutral-solid-gray-800); font-weight: normal; font-size: calc(16 / 16 * 1rem); line-height: 1; font-family: var(--font-family-sans); letter-spacing: 0.02em; } .dads-calendar__controls { display: flex; column-gap: calc(8 / 16 * 1rem); padding: calc(16 / 16 * 1rem); } .dads-calendar__navigation { display: flex; } .dads-calendar__nav-button.dads-button[data-size=\"sm\"] { width: calc(44 / 16 * 1rem); min-width: 0; } .dads-calendar__current-month { margin: 0; align-self: center; width: calc(56 / 16 * 1rem); text-align: center; } .dads-calendar__table { margin-right: calc(12 / 16 * 1rem); margin-bottom: calc(8 / 16 * 1rem); margin-left: calc(12 / 16 * 1rem); width: auto; border-collapse: collapse; } .dads-calendar__header-cell { width: calc(48 / 16 * 1rem); height: calc(48 / 16 * 1rem); padding: 0; color: var(--color-neutral-solid-gray-700); font-weight: bold; text-align: center; vertical-align: middle; } .dads-calendar__data-cell { padding: 0; } .dads-calendar__date { margin: calc(4 / 16 * 1rem); display: flex; align-items: center; justify-content: center; box-sizing: border-box; width: calc(40 / 16 * 1rem); height: calc(40 / 16 * 1rem); border-radius: 50%; border: 0; background-color: transparent; color: inherit; font: inherit; letter-spacing: inherit; text-underline-offset: calc(3 / 16 * 1rem); cursor: pointer; } @media (hover: hover) { .dads-calendar__date:hover { background-color: var(--color-neutral-solid-gray-50); text-decoration: underline; } } .dads-calendar__date:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); background-color: var(--color-primitive-yellow-300); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-calendar__date[data-selected] { border: 1px solid transparent; background-color: var(--color-primitive-blue-900); color: var(--color-neutral-white); } .dads-calendar__date:disabled { visibility: hidden; } .dads-calendar__footer { display: flex; align-items: center; justify-content: space-between; column-gap: calc(16 / 16 * 1rem); box-sizing: border-box; width: 100%; padding: calc(16 / 16 * 1rem); }","link":"/design-system/src/components/calendar/calendar.css"},{"title":"","text":"import path from \"node:path\"; import { test, expect } from \"@playwright/test\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt(\"calendar\", path.join(dirname, \"playground.html\")); // オプション付きでカレンダーをセットアップするヘルパー関数 const setupCalendar = async (page, options = {}) => { const { minDate, maxDate } = options; // date-pickerのプレイグラウンドファイルを使用してカレンダーを開く await page.goto(`file://${path.join(dirname, \"./playground.html\")}`); // 提供されている場合はmin-dateとmax-date属性を設定 if (minDate || maxDate) { await page.evaluate( (attrs) => { const calendar = document.querySelector(\"dads-calendar\"); if (attrs.minDate) calendar.setAttribute(\"min-date\", attrs.minDate); if (attrs.maxDate) calendar.setAttribute(\"max-date\", attrs.maxDate); }, { minDate, maxDate }, ); } }; const getYmd = (date) => { const year = date.getFullYear(); const month = String(date.getMonth() + 1).padStart(2, \"0\"); const day = String(date.getDate()).padStart(2, \"0\"); return `${year}-${month}-${day}`; }; test.describe(\"カレンダー機能テスト\", () => { test.describe(\"年選択ドロップダウンの境界テスト\", () => { test(\"1月1日のmin-dateを処理するべき\", async ({ page }) => { const minDate = \"2023-01-01\"; const maxDate = \"2025-12-31\"; await setupCalendar(page, { minDate, maxDate }); const yearSelect = page.getByRole(\"combobox\", { name: \"年\" }); const firstOption = yearSelect.locator(\"option\").first(); const firstYear = await firstOption.getAttribute(\"value\"); expect(firstYear).toBe(\"2023\"); }); test(\"12月31日のmin-dateを処理するべき\", async ({ page }) => { const minDate = \"2023-12-31\"; const maxDate = \"2025-01-01\"; await setupCalendar(page, { minDate, maxDate }); const yearSelect = page.getByRole(\"combobox\", { name: \"年\" }); const firstOption = yearSelect.locator(\"option\").first(); const firstYear = await firstOption.getAttribute(\"value\"); expect(firstYear).toBe(\"2023\"); }); test(\"1月1日のmax-dateを処理するべき\", async ({ page }) => { const minDate = \"2023-01-01\"; const maxDate = \"2025-01-01\"; await setupCalendar(page, { minDate, maxDate }); const yearSelect = page.getByRole(\"combobox\", { name: \"年\" }); const lastOption = yearSelect.locator(\"option\").last(); const lastYear = await lastOption.getAttribute(\"value\"); expect(lastYear).toBe(\"2025\"); }); test(\"12月31日のmax-dateを処理するべき\", async ({ page }) => { const minDate = \"2023-01-01\"; const maxDate = \"2025-12-31\"; await setupCalendar(page, { minDate, maxDate }); const yearSelect = page.getByRole(\"combobox\", { name: \"年\" }); const lastOption = yearSelect.locator(\"option\").last(); const lastYear = await lastOption.getAttribute(\"value\"); expect(lastYear).toBe(\"2025\"); }); test(\"min-dateとmax-dateが同じ年の場合を処理するべき\", async ({ page }) => { const minDate = \"2024-03-01\"; const maxDate = \"2024-09-30\"; await setupCalendar(page, { minDate, maxDate }); const yearSelect = page.getByRole(\"combobox\", { name: \"年\" }); const options = await yearSelect.locator(\"option\").count(); expect(options).toBe(1); const onlyOption = yearSelect.locator(\"option\").first(); const year = await onlyOption.getAttribute(\"value\"); expect(year).toBe(\"2024\"); }); }); test.describe(\"月ナビゲーションの境界テスト\", () => { test(\"min-dateが月の1日の場合、前の月ボタンを無効にするべき\", async ({ page, }) => { const minDate = \"2024-03-01\"; const maxDate = \"2024-06-30\"; await setupCalendar(page, { minDate, maxDate }); // 2024年3月（最小月）に移動 const yearSelect = page.getByRole(\"combobox\", { name: \"年\" }); await yearSelect.selectOption(\"2024\"); // 表示を3月に設定 await page.evaluate(() => { const calendar = document.querySelector(\"dads-calendar\"); calendar.setDisplayMonth(2024, 2); // March is month 2 }); const prevButton = page.getByRole(\"button\", { name: \"前の月\" }); await expect(prevButton).toHaveAttribute(\"aria-disabled\", \"true\"); }); test(\"min-dateが月の31日の場合、前の月ボタンを有効にするべき\", async ({ page, }) => { const minDate = \"2024-02-29\"; const maxDate = \"2024-06-30\"; await setupCalendar(page, { minDate, maxDate }); // 2024年3月に移動 await page.evaluate(() => { const calendar = document.querySelector(\"dads-calendar\"); calendar.setDisplayMonth(2024, 2); // March is month 2 }); const prevButton = page.getByRole(\"button\", { name: \"前の月\" }); await expect(prevButton).toHaveAttribute(\"aria-disabled\", \"false\"); }); test(\"max-dateが月の1日の場合、次の月ボタンを無効にするべき\", async ({ page, }) => { const minDate = \"2024-03-01\"; const maxDate = \"2024-04-30\"; await setupCalendar(page, { minDate, maxDate }); // 2024年4月（最大値前の最後の有効月）に移動 await page.evaluate(() => { const calendar = document.querySelector(\"dads-calendar\"); calendar.setDisplayMonth(2024, 3); // April is month 3 }); const nextButton = page.getByRole(\"button\", { name: \"次の月\" }); await expect(nextButton).toHaveAttribute(\"aria-disabled\", \"true\"); }); test(\"max-dateが月の31日の場合、次の月ボタンを有効にするべき\", async ({ page, }) => { const minDate = \"2024-03-01\"; const maxDate = \"2024-05-01\"; await setupCalendar(page, { minDate, maxDate }); // 2024年4月に移動 await page.evaluate(() => { const calendar = document.querySelector(\"dads-calendar\"); calendar.setDisplayMonth(2024, 3); // April is month 3 }); const nextButton = page.getByRole(\"button\", { name: \"次の月\" }); await expect(nextButton).toHaveAttribute(\"aria-disabled\", \"false\"); }); test(\"範囲の開始で前の月ボタンを無効にするべき\", async ({ page }) => { const minDate = \"2024-03-15\"; const maxDate = \"2024-06-15\"; await setupCalendar(page, { minDate, maxDate }); // 2024年3月（最初の月）に移動 await page.evaluate(() => { const calendar = document.querySelector(\"dads-calendar\"); calendar.setDisplayMonth(2024, 2); // March is month 2 }); const prevButton = page.getByRole(\"button\", { name: \"前の月\" }); await expect(prevButton).toHaveAttribute(\"aria-disabled\", \"true\"); }); test(\"範囲の終了で次の月ボタンを無効にするべき\", async ({ page }) => { const minDate = \"2024-03-15\"; const maxDate = \"2024-06-15\"; await setupCalendar(page, { minDate, maxDate }); // 2024年6月（最後の月）に移動 await page.evaluate(() => { const calendar = document.querySelector(\"dads-calendar\"); calendar.setDisplayMonth(2024, 5); // June is month 5 }); const nextButton = page.getByRole(\"button\", { name: \"次の月\" }); await expect(nextButton).toHaveAttribute(\"aria-disabled\", \"true\"); }); }); test.describe(\"日付選択フロー\", () => { test(\"クリックで日付を選択するべき\", async ({ page }) => { await setupCalendar(page); // 日付ボタンをクリック const dateButton = page.getByRole(\"gridcell\").getByRole(\"button\").first(); await dateButton.click(); // 日付が選択されていることを確認 await expect(dateButton).toHaveAttribute(\"data-selected\", \"true\"); await expect(dateButton.locator(\"..\").first()).toHaveAttribute( \"aria-selected\", \"true\", ); }); test(\"無効な日付を選択しないべき\", async ({ page }) => { const today = new Date(); const minDate = new Date(today.getFullYear(), today.getMonth(), 15); const maxDate = new Date(today.getFullYear(), today.getMonth(), 20); await setupCalendar(page, { minDate: getYmd(minDate), maxDate: getYmd(maxDate), }); // 無効な日付をクリックしてみる（範囲外であるべき） const disabledButton = page .getByRole(\"gridcell\") .getByRole(\"button\", { disabled: true }) .first(); if ((await disabledButton.count()) > 0) { await disabledButton.click(); // 選択されるべきではない await expect(disabledButton).not.toHaveAttribute( \"data-selected\", \"true\", ); } }); test(\"date-selectedイベントを発火するべき\", async ({ page }) => { await setupCalendar(page); // カスタムイベントをリッスン await page.evaluate(() => { window.selectedEventData = null; document.addEventListener(\"date-selected\", (e) => { window.selectedEventData = e.detail; }); }); // 日付をクリック const dateButton = page.getByRole(\"gridcell\").getByRole(\"button\").first(); await dateButton.click(); // イベントが正しいデータで発火されたことを確認 const eventData = await page.evaluate(() => window.selectedEventData); expect(eventData).toBeTruthy(); expect(eventData.date).toBeTruthy(); }); }); test.describe(\"月ナビゲーション\", () => { test(\"前の月に移動するべき\", async ({ page }) => { await setupCalendar(page); const prevButton = page.getByRole(\"button\", { name: \"前の月\" }); const currentMonth = page.locator(\"[data-js-current-month]\"); // 初期月を取得 const initialMonth = await currentMonth.textContent(); // 前の月をクリック await prevButton.click(); // 月が変更されるべき const newMonth = await currentMonth.textContent(); expect(newMonth).not.toBe(initialMonth); }); test(\"次の月に移動するべき\", async ({ page }) => { await setupCalendar(page); const nextButton = page.getByRole(\"button\", { name: \"次の月\" }); const currentMonth = page.locator(\"[data-js-current-month]\"); // 初期月を取得 const initialMonth = await currentMonth.textContent(); // 次の月をクリック await nextButton.click(); // 月が変更されるべき const newMonth = await currentMonth.textContent(); expect(newMonth).not.toBe(initialMonth); }); test(\"年選択で月を変更するべき\", async ({ page }) => { await setupCalendar(page); const yearSelect = page.getByRole(\"combobox\", { name: \"年\" }); // 利用可能な年を取得 const options = await yearSelect.locator(\"option\").all(); if (options.length > 1) { const secondOption = options[0]; const yearValue = await secondOption.getAttribute(\"value\"); // 異なる年を選択 await yearSelect.selectOption(yearValue); // カレンダーが更新されるべき await expect(yearSelect).toHaveValue(yearValue); } }); test(\"ナビゲーションで範囲制限を尊重するべき\", async ({ page }) => { const minDate = \"2024-03-01\"; const maxDate = \"2024-05-31\"; await setupCalendar(page, { minDate, maxDate }); // 最大月に移動 await page.evaluate(() => { const calendar = document.querySelector(\"dads-calendar\"); calendar.setDisplayMonth(2024, 4); // May 2024 }); const nextButton = page.getByRole(\"button\", { name: \"次の月\" }); await expect(nextButton).toHaveAttribute(\"aria-disabled\", \"true\"); // 最小月に移動 await page.evaluate(() => { const calendar = document.querySelector(\"dads-calendar\"); calendar.setDisplayMonth(2024, 2); // March 2024 }); const prevButton = page.getByRole(\"button\", { name: \"前の月\" }); await expect(prevButton).toHaveAttribute(\"aria-disabled\", \"true\"); }); }); test.describe(\"キーボードナビゲーション\", () => { test(\"矢印キーで日付をナビゲートするべき\", async ({ page }) => { await setupCalendar(page); // 日付ボタンにフォーカス const dateButton = page.getByRole(\"gridcell\").getByRole(\"button\").first(); await dateButton.focus(); // 矢印キーナビゲーションをテスト await page.keyboard.press(\"ArrowRight\"); // フォーカスが次の日付に移動するべき const focusedElement = page.locator(\":focus\"); await expect(focusedElement).toHaveText(\"2\"); }); test(\"上下矢印で週をまたいでナビゲートするべき\", async ({ page }) => { await setupCalendar(page); // カレンダーの中央の日付ボタンにフォーカス const dateButtons = page.getByRole(\"gridcell\").getByRole(\"button\"); const middleButton = dateButtons.nth(9); // 端にないボタンを取得 await middleButton.focus(); // 上矢印をテスト（1週間上に移動するべき） await page.keyboard.press(\"ArrowUp\"); const focusedElement = page.locator(\":focus\"); await expect(focusedElement).toHaveText(\"3\"); }); test(\"月をまたいでナビゲートするべき\", async ({ page }) => { await setupCalendar(page); // 現在の月の最後の日付にフォーカス const dateButtons = page.getByRole(\"gridcell\").getByRole(\"button\"); const lastButton = dateButtons.last(); await lastButton.focus(); // 初期月を取得 const currentMonth = page.locator(\"[data-js-current-month]\"); const initialMonth = await currentMonth.textContent(); // 右矢印を押して次の月に移動 await page.keyboard.press(\"ArrowRight\"); // 日付ボタンにフォーカスが残っているべき（おそらく次の月） const focusedElement = page.locator(\":focus\"); await expect(focusedElement).toHaveText(\"1\"); // 月が変更されるべき const newMonth = await currentMonth.textContent(); expect(newMonth).not.toBe(initialMonth); }); test(\"キーボードナビゲーションで範囲制限を尊重するべき\", async ({ page, }) => { const today = new Date(); const minDate = new Date(today.getFullYear(), today.getMonth(), 15); const maxDate = new Date(today.getFullYear(), today.getMonth(), 20); await setupCalendar(page, { minDate: getYmd(minDate), maxDate: getYmd(maxDate), }); // 最初の有効な日付にフォーカス const enabledButton = page .getByRole(\"gridcell\") .getByRole(\"button\") .and(page.locator(\":not([disabled])\")) .first(); await enabledButton.focus(); // 範囲を超えてナビゲートしてみる for (let i = 0; i < 10; i++) { await page.keyboard.press(\"ArrowLeft\"); } // まだ有効な日付にいるべき const focusedElement = page.locator(\":focus\"); await expect(focusedElement).toHaveAttribute(\"data-js-date-button\"); await expect(focusedElement).not.toBeDisabled(); }); }); test.describe(\"特別な操作\", () => { test(\"今日ボタンがクリックされた時に今日を選択するべき\", async ({ page, }) => { await setupCalendar(page); const todayButton = page.getByRole(\"button\", { name: \"今日\" }); await todayButton.click(); // 今日が選択されるべき const selectedButton = page.locator('[data-selected=\"true\"]'); await expect(selectedButton).toBeVisible(); await expect(selectedButton).toHaveText(new Date().getDate().toString()); }); test(\"範囲外の場合は今日を選択しないべき\", async ({ page }) => { const yesterday = new Date(); yesterday.setDate(yesterday.getDate() - 1); const maxDate = getYmd(yesterday); await setupCalendar(page, { maxDate }); const todayButton = page.getByRole(\"button\", { name: \"今日\" }); await todayButton.click(); // 日付が選択されるべきではない const selectedButton = page.locator('[data-selected=\"true\"]'); await expect(selectedButton).toHaveCount(0); }); test(\"削除ボタンがクリックされた時に選択をクリアするべき\", async ({ page, }) => { await setupCalendar(page); // まず日付を選択 const dateButton = page.getByRole(\"gridcell\").getByRole(\"button\").first(); await dateButton.click(); await expect(dateButton).toHaveAttribute(\"data-selected\", \"true\"); // 削除ボタンをクリック const deleteButton = page.getByRole(\"button\", { name: \"削除\" }); await deleteButton.click(); // 選択がクリアされるべき const selectedButton = page.locator('[data-selected=\"true\"]'); await expect(selectedButton).toHaveCount(0); }); }); test.describe(\"外部API\", () => { test(\"setSelectedDateメソッドで選択日付を設定するべき\", async ({ page, }) => { await setupCalendar(page, { minDate: \"2024-06-01\", maxDate: \"2024-06-30\", }); // APIで選択日付を設定 await page.evaluate(() => { const calendar = document.querySelector(\"dads-calendar\"); calendar.setSelectedDate(new Date(2024, 5, 15)); // June 15, 2024 }); // 日付が選択され表示されるべき const selectedButton = page.locator('[data-selected=\"true\"]'); await expect(selectedButton).toBeVisible(); await expect(selectedButton).toContainText(\"15\"); }); test(\"setSelectedDateで無効な日付を設定しないべき\", async ({ page }) => { await setupCalendar(page, { minDate: \"2024-06-01\", maxDate: \"2024-06-30\", }); // 範囲外の日付を設定してみる await page.evaluate(() => { const calendar = document.querySelector(\"dads-calendar\"); calendar.setSelectedDate(new Date(2024, 11, 25)); // December 25, 2024 (out of range) }); // 日付が選択されるべきではない const selectedButton = page.locator('[data-selected=\"true\"]'); await expect(selectedButton).toHaveCount(0); }); test(\"setDisplayMonthメソッドで表示月を変更するべき\", async ({ page }) => { await setupCalendar(page, { minDate: \"2023-06-01\", maxDate: \"2025-06-30\" }); // APIで表示月を設定 await page.evaluate(() => { const calendar = document.querySelector(\"dads-calendar\"); calendar.setDisplayMonth(2024, 5); // June 2024 }); // 2024年6月が表示されるべき const currentMonth = page.locator(\"[data-js-current-month]\"); await expect(currentMonth).toContainText(\"6月\"); const yearSelect = page.getByRole(\"combobox\", { name: \"年\" }); await expect(yearSelect).toHaveValue(\"2024\"); }); test(\"focusメソッドでカレンダーにフォーカスするべき\", async ({ page }) => { await setupCalendar(page); // APIでカレンダーにフォーカス await page.evaluate(() => { const calendar = document.querySelector(\"dads-calendar\"); calendar.focus(); }); // 日付ボタンがフォーカスされるべき const focusedElement = page.locator(\":focus\"); await expect(focusedElement).toHaveAttribute(\"data-js-date-button\"); }); }); test.describe(\"アクセシビリティ\", () => { test(\"適切なARIA属性を持つべき\", async ({ page }) => { await setupCalendar(page); const calendar = page.locator(\"dads-calendar\"); await expect(calendar).toHaveAttribute(\"role\", \"application\"); const calendarTable = page.getByRole(\"grid\"); await expect(calendarTable).toBeVisible(); // グリッドセルをチェック const gridCells = page.getByRole(\"gridcell\"); await expect(gridCells.first()).toBeVisible(); }); test(\"tabindexを正しく管理するべき\", async ({ page }) => { await setupCalendar(page); // 一つの日付ボタンのみがtabindex=\"0\"を持つべき const focusableButtons = page.locator( '[data-js-date-button][tabindex=\"0\"]', ); await expect(focusableButtons).toHaveCount(1); }); test(\"適切なスクリーンリーダーラベルを持つべき\", async ({ page }) => { await setupCalendar(page); // 日付ボタンは説明的なaria-labelを持つべき const dateButton = page.getByRole(\"gridcell\").getByRole(\"button\").first(); const ariaLabel = await dateButton.getAttribute(\"aria-label\"); expect(ariaLabel).toMatch(/\\d{4}年\\d{1,2}月\\d{1,2}日/); }); }); test.describe(\"エラーハンドリング・エッジケース\", () => { test(\"無効な日付文字列を処理するべき\", async ({ page }) => { // 無効な日付文字列でカレンダーをセットアップ await setupCalendar(page, { minDate: \"invalid-date\", maxDate: \"2024-13-45\", // 存在しない月日 }); // デフォルトの日付範囲（今日±1年）にフォールバックしていることを確認 const yearSelect = page.getByRole(\"combobox\", { name: \"年\" }); const options = await yearSelect.locator(\"option\").count(); expect(options).toBeGreaterThan(0); // 年選択肢が存在する // テスト日当日の月が表示されていることを確認 const today = new Date(); const expectedMonth = new Intl.DateTimeFormat(\"ja-JP\", { month: \"long\", }).format(today); const currentMonth = page.locator(\"[data-js-current-month]\"); await expect(currentMonth).toContainText(expectedMonth); // 年選択も当日の年になっていることを確認 await expect(yearSelect).toHaveValue(today.getFullYear().toString()); }); test(\"min-date > max-dateの場合を処理するべき\", async ({ page }) => { // min-dateがmax-dateより後の日付 await setupCalendar(page, { minDate: \"2024-12-31\", maxDate: \"2024-01-01\", }); // カレンダーがクラッシュせずに表示されることを確認 const calendarTable = page.getByRole(\"grid\"); await expect(calendarTable).toBeVisible(); // デフォルトの日付範囲（今日±1年）にフォールバックしていることを確認 const yearSelect = page.getByRole(\"combobox\", { name: \"年\" }); const options = await yearSelect.locator(\"option\").count(); expect(options).toBeGreaterThan(0); // テスト日当日の月が表示されていることを確認 const today = new Date(); const expectedMonth = new Intl.DateTimeFormat(\"ja-JP\", { month: \"long\", }).format(today); const currentMonth = page.locator(\"[data-js-current-month]\"); await expect(currentMonth).toContainText(expectedMonth); // 年選択も当日の年になっていることを確認 await expect(yearSelect).toHaveValue(today.getFullYear().toString()); }); }); });","link":"/design-system/src/components/calendar/calendar.test.js"},{"title":"","text":"Calendar 日 月 火 水 木 金 土 削除 今日 選択中の日付： // 動作デモのためのスクリプト const output = document.querySelector(\"#playground-output\"); const calendar = document.querySelector(\"[data-js-calendar]\"); calendar.addEventListener(\"date-selected\", (e) => { const date = e.detail.date; if (date) { const options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' }; output.textContent = new Intl.DateTimeFormat('ja-JP', options).format(date); } else { output.textContent = \"\"; } });","link":"/design-system/src/components/calendar/playground.html"},{"title":"","text":"export class Calendar extends HTMLElement { constructor() { super(); this.subscriptions = []; this.displayYear = new Date().getFullYear(); this.displayMonth = new Date().getMonth(); this.selectedDate = null; this.minDate = null; this.maxDate = null; } connectedCallback() { this.initializeCalendar(); this.setupEventListeners(); } disconnectedCallback() { for (const subscription of this.subscriptions) subscription.remove(); this.subscriptions = []; } static observedAttributes = [\"min-date\", \"max-date\"]; attributeChangedCallback(name) { if (name === \"min-date\" || name === \"max-date\") { this.initializeDateRange(); this.populateYearSelect(); this.renderCalendar(); } } initializeCalendar() { this.initializeDateRange(); this.populateYearSelect(); this.renderCalendar(); } setupEventListeners() { this.subscriptions.push( subscribe(this.calendarTable, \"click\", (e) => this.handleDateClick(e)), subscribe(this.calendarTable, \"keydown\", (e) => this.handleKeydown(e)), subscribe(this.prevMonthButton, \"click\", () => this.navigateMonth(-1)), subscribe(this.nextMonthButton, \"click\", () => this.navigateMonth(1)), subscribe(this.yearSelect, \"change\", (e) => this.handleYearChange(e)), subscribe(this.deleteButton, \"click\", () => this.deleteSelectedDate()), subscribe(this.todayButton, \"click\", () => this.selectToday()), ); } initializeDateRange() { const now = new Date(); const nowYear = now.getFullYear(); const nowMonth = now.getMonth(); const nowDate = now.getDate(); let minDateAttr = this.getAttribute(\"min-date\"); let maxDateAttr = this.getAttribute(\"max-date\"); if (minDateAttr > maxDateAttr) { minDateAttr = null; maxDateAttr = null; } if (/^\\d{4}-\\d{2}-\\d{2}$/.test(minDateAttr)) { const [year, month, date] = minDateAttr.split(\"-\"); this.minDate = new Date(year, month - 1, date); } else { this.minDate = new Date(nowYear - 1, nowMonth, nowDate); } if (/^\\d{4}-\\d{2}-\\d{2}$/.test(maxDateAttr)) { const [year, month, date] = maxDateAttr.split(\"-\"); this.maxDate = new Date(year, month - 1, Number(date) + 1); } else { this.maxDate = new Date(nowYear + 1, nowMonth, nowDate); } const closestDate = this.getClosestDateInRange(now); this.displayYear = closestDate.getFullYear(); this.displayMonth = closestDate.getMonth(); } populateYearSelect() { const startYear = this.minDate.getFullYear(); const endYear = this.previousMaxDate.getFullYear(); this.yearSelect.innerHTML = \"\"; for (let year = startYear; year part.type === \"era\")?.value || \"\"; const yearValue = parts.find((part) => part.type === \"year\")?.value || \"\"; return `${year}年(${era}${yearValue}年)`; } isDateInRange(date) { // Invalid Date if (Number.isNaN(date.getTime())) { return false; } // 時刻部分を無視して日付のみで比較 const dateOnly = new Date( date.getFullYear(), date.getMonth(), date.getDate(), ); return dateOnly >= this.minDate && dateOnly < this.maxDate; } getClosestDateInRange(date) { if (date < this.minDate) { return new Date(this.minDate); } if (date >= this.maxDate) { return new Date(this.previousMaxDate); } return new Date(date); } renderCalendar() { const { displayYear, displayMonth, yearSelect, prevMonthButton, isPreviousMonthAvailable, currentMonth, nextMonthButton, isNextMonthAvailable, calendarHeadingForAnnouncement, calendarTable, selectedDate, tbody, calendarHasSelectedDate, calendarHasToday, } = this; /* コントロール要素の更新 */ yearSelect.value = displayYear; prevMonthButton.setAttribute(\"aria-disabled\", !isPreviousMonthAvailable); nextMonthButton.setAttribute(\"aria-disabled\", !isNextMonthAvailable); /* カレンダーテーブルの描画 */ const now = new Date(); const today = new Date(now.getFullYear(), now.getMonth(), now.getDate()); for (const row of tbody.querySelectorAll(\"tr\")) row.remove(); const firstDay = new Date(displayYear, displayMonth, 1); const lastDay = new Date(displayYear, displayMonth + 1, 0); const startDate = new Date(firstDay); // 日曜日から開始 startDate.setDate(startDate.getDate() - firstDay.getDay()); const currentDate = new Date(startDate); let weekCount = 0; const maxWeeks = 6; while (weekCount++ < maxWeeks) { const row = document.createElement(\"tr\"); let weekContainsLastDay = false; for (let dayOfWeek = 0; dayOfWeek < 7; dayOfWeek++) { const date = new Date(currentDate); const isCurrentMonth = date.getMonth() === displayMonth; const isInRange = this.isDateInRange(date); const isToday = date.getTime() === today.getTime(); const isDisabled = !isCurrentMonth || !isInRange; const isSelected = selectedDate && date.getTime() === selectedDate.getTime(); const isFocusable = isSelected || (!calendarHasSelectedDate && isToday && !isDisabled); const cell = this.createDateCell(date, { isDisabled, isSelected, isFocusable, }); row.appendChild(cell); weekContainsLastDay ||= lastDay.getTime() === date.getTime(); currentDate.setDate(currentDate.getDate() + 1); } tbody.appendChild(row); if (weekContainsLastDay) { break; } } // 選択済み日付も今日も表示されていない場合、どのセルにもtabindex=0がついていないため、 // 最初のenabledな日付にtabindex=0を設定 if (!calendarHasSelectedDate && !calendarHasToday) { const buttons = tbody.querySelectorAll( \"[data-js-date-button]:not(:disabled)\", ); buttons[0]?.setAttribute(\"tabindex\", \"0\"); } /* 見出しとラベルの更新 */ const formatter = new Intl.DateTimeFormat(\"ja-JP\", { year: \"numeric\", month: \"long\", }); const heading = formatter.format(firstDay); this.setAttribute(\"aria-label\", heading); calendarHeadingForAnnouncement.textContent = heading; calendarTable.setAttribute(\"aria-label\", heading); currentMonth.textContent = new Intl.DateTimeFormat(\"ja-JP\", { month: \"long\", }).format(firstDay); } createDateCell(date, { isDisabled, isSelected, isFocusable }) { const cell = this.cellTemplate.content.cloneNode(true).firstElementChild; const button = cell.querySelector(\"button\"); button.textContent = date.getDate(); const formatter = new Intl.DateTimeFormat(\"ja-JP\", { year: \"numeric\", month: \"long\", day: \"numeric\", weekday: \"long\", }); const ariaLabel = formatter.format(date); if (isDisabled) { cell.setAttribute(\"aria-disabled\", \"true\"); button.disabled = true; } if (isSelected) { cell.setAttribute(\"aria-selected\", \"true\"); button.setAttribute(\"aria-label\", `選択中 ${ariaLabel}`); button.setAttribute(\"data-selected\", \"true\"); } else { button.setAttribute(\"aria-label\", ariaLabel); } button.tabIndex = isFocusable ? 0 : -1; button.dataset.year = date.getFullYear(); button.dataset.month = date.getMonth(); button.dataset.date = date.getDate(); return cell; } handleDateClick(e) { const button = e.target.matches(\"[data-js-date-button]\") ? e.target : null; if (!button || button.disabled) return; const year = Number.parseInt(button.dataset.year); const month = Number.parseInt(button.dataset.month); const date = Number.parseInt(button.dataset.date); this.selectDate(new Date(year, month, date)); } handleKeydown(e) { const button = e.target.matches(\"[data-js-date-button]\") ? e.target : null; if (!button) return; const year = Number.parseInt(button.dataset.year); const month = Number.parseInt(button.dataset.month); const date = Number.parseInt(button.dataset.date); const currentDate = new Date(year, month, date); const targetDate = new Date(currentDate); switch (e.key) { case \"ArrowUp\": e.preventDefault(); targetDate.setDate(targetDate.getDate() - 7); this.navigateToDate(targetDate); break; case \"ArrowDown\": e.preventDefault(); targetDate.setDate(targetDate.getDate() + 7); this.navigateToDate(targetDate); break; case \"ArrowLeft\": e.preventDefault(); targetDate.setDate(targetDate.getDate() - 1); this.navigateToDate(targetDate); break; case \"ArrowRight\": e.preventDefault(); targetDate.setDate(targetDate.getDate() + 1); this.navigateToDate(targetDate); break; } } navigateToDate(targetDate) { if (!this.isDateInRange(targetDate)) { return; } this.setDisplayMonth(targetDate.getFullYear(), targetDate.getMonth()); const targetButton = this.calendarTable.querySelector( `[data-year=\"${targetDate.getFullYear()}\"][data-month=\"${targetDate.getMonth()}\"][data-date=\"${targetDate.getDate()}\"]`, ); if (targetButton) { for (const el of this.calendarTable.querySelectorAll('[tabindex=\"0\"]')) { el.setAttribute(\"tabindex\", \"-1\"); } targetButton.setAttribute(\"tabindex\", \"0\"); targetButton.focus(); } } selectDate(date) { this.selectedDate = date; this.renderCalendar(); this.dispatchEvent( new CustomEvent(\"date-selected\", { detail: { date }, bubbles: true, }), ); } navigateMonth(direction) { if (direction === -1 && !this.isPreviousMonthAvailable) return; if (direction === 1 && !this.isNextMonthAvailable) return; this.setDisplayMonth(this.displayYear, this.displayMonth + direction); } handleYearChange(e) { this.setDisplayMonth(Number.parseInt(e.target.value), this.displayMonth); } deleteSelectedDate() { this.selectDate(null); } selectToday() { const now = new Date(); const today = new Date(now.getFullYear(), now.getMonth(), now.getDate()); if (this.isDateInRange(today)) { this.setDisplayMonth(today.getFullYear(), today.getMonth()); this.selectDate(today); } } setSelectedDate(date) { if (date && this.isDateInRange(date)) { this.selectedDate = date; } else { this.selectedDate = null; } this.renderCalendar(); } setDisplayMonth(y, m) { const monthToDisplay = this.getClosestDateInRange(new Date(y, m, 1)); const year = monthToDisplay.getFullYear(); const month = monthToDisplay.getMonth(); const changed = this.displayYear !== year || this.displayMonth !== month; this.displayYear = year; this.displayMonth = month; if (changed) this.renderCalendar(); } focus() { const focusableElement = this.calendarTable.querySelector('[tabindex=\"0\"]'); if (focusableElement) { focusableElement.focus(); } } get previousMaxDate() { return new Date( this.maxDate.getFullYear(), this.maxDate.getMonth(), this.maxDate.getDate() - 1, ); } get isPreviousMonthAvailable() { const prevMonthLastDay = new Date(this.displayYear, this.displayMonth, 0); return this.isDateInRange(prevMonthLastDay); } get isNextMonthAvailable() { const nextMonthFirstDay = new Date( this.displayYear, this.displayMonth + 1, 1, ); return this.isDateInRange(nextMonthFirstDay); } get calendarHasSelectedDate() { return ( this.selectedDate && this.displayYear === this.selectedDate.getFullYear() && this.displayMonth === this.selectedDate.getMonth() ); } get calendarHasToday() { const now = new Date(); const today = new Date(now.getFullYear(), now.getMonth(), now.getDate()); return ( this.displayYear === today.getFullYear() && this.displayMonth === today.getMonth() && this.isDateInRange(today) ); } get calendarHeadingForAnnouncement() { return this.querySelector(\"[data-js-calendar-heading]\"); } get yearSelect() { return this.querySelector(\"[data-js-year-select]\"); } get prevMonthButton() { return this.querySelector(\"[data-js-prev-month-button]\"); } get nextMonthButton() { return this.querySelector(\"[data-js-next-month-button]\"); } get currentMonth() { return this.querySelector(\"[data-js-current-month]\"); } get calendarTable() { return this.querySelector(\"[data-js-calendar-table]\"); } get tbody() { return this.querySelector(\"[data-js-calendar-tbody]\"); } _cellTemplate = null; get cellTemplate() { if (!this._cellTemplate) { this._cellTemplate = this.querySelector(\"[data-js-cell-template]\"); } return this._cellTemplate; } get deleteButton() { return this.querySelector(\"[data-js-delete-button]\"); } get todayButton() { return this.querySelector(\"[data-js-today-button]\"); } } function subscribe(el, ...args) { el.addEventListener(...args); return { remove: () => el.removeEventListener(...args) }; } customElements.define(\"dads-calendar\", Calendar);","link":"/design-system/src/components/calendar/calendar.js"},{"title":"","text":".dads-card-example-1-list { margin: 0; display: flex; flex-wrap: wrap; gap: calc(24 / 16 * 1rem); padding: 0; list-style: none; } .dads-card-example-1-list > li { display: flex; min-width: 0; } .dads-card-example-1 { position: relative; z-index: 0; display: flex; flex-direction: column; box-sizing: border-box; min-width: 0; width: 352px; max-width: 100%; font-family: var(--font-family-sans); text-decoration: none; overflow-wrap: anywhere; } .dads-card-example-1:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); border-radius: calc(16 / 16 * 1rem); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-card-example-1__image { position: relative; box-sizing: content-box; aspect-ratio: 3 / 2; border: 1px solid var(--color-neutral-solid-gray-420); border-radius: calc(16 / 16 * 1rem) calc(16 / 16 * 1rem) 0 0; background: linear-gradient( 0deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.1) 100% ), linear-gradient( 114deg, var(--color-primitive-cyan-400) 0%, var(--color-primitive-purple-500) 100% ); } .dads-card-example-1__image svg { position: absolute; inset: 0; margin: auto; width: calc(64 / 16 * 1rem); height: calc(64 / 16 * 1rem); z-index: 0; translate: 0 calc(-12 / 16 * 1rem); } .dads-card-example-1__main { flex-grow: 1; position: relative; margin-top: calc(-24 / 16 * 1rem); display: grid; align-content: start; row-gap: calc(16 / 16 * 1rem); border: 1px solid var(--color-neutral-solid-gray-420); border-radius: calc(16 / 16 * 1rem); background-color: var(--color-neutral-white); padding: calc(16 / 16 * 1rem) calc(24 / 16 * 1rem); } .dads-card-example-1__main h2 { margin: 0; min-width: 0; color: var(--color-neutral-solid-gray-900); font-weight: bold; font-size: calc(20 / 16 * 1rem); line-height: 1.5; letter-spacing: 0.02em; text-decoration: underline; text-decoration-thickness: calc(1 / 16 * 1rem); text-underline-offset: calc(3 / 16 * 1rem); } @media (hover: hover) { .dads-card-example-1:hover .dads-card-example-1__main h2 { text-decoration-thickness: calc(3 / 16 * 1rem); } } .dads-card-example-1__main p { margin-top: 0; margin-bottom: 0; color: var(--color-neutral-solid-gray-800); font-weight: normal; font-size: calc(16 / 16 * 1rem); line-height: 1.7; letter-spacing: 0.02em; }","link":"/design-system/src/components/card/card-example-1.css"},{"title":"","text":".dads-card-example-2-list { margin: 0; display: grid; gap: calc(24 / 16 * 1rem); padding: 0; list-style: none; } .dads-card-example-2-list > li { min-width: 0; } .dads-card-example-2 { position: relative; z-index: 0; box-sizing: border-box; display: grid; grid-template: \"image main\" auto / minmax(auto, min(50%, calc(352 / 16 * 1rem))) 1fr; max-width: calc(1024 / 16 * 1rem); border: 1px solid var(--color-neutral-solid-gray-420); background-color: var(--color-neutral-white); color: var(--color-neutral-solid-gray-800); font-weight: normal; font-size: calc(16 / 16 * 1rem); font-family: var(--font-family-sans); line-height: 1.7; letter-spacing: 0.02em; overflow-wrap: anywhere; } .dads-card-example-2__main { position: relative; grid-area: main; display: grid; row-gap: calc(16 / 16 * 1rem); min-width: 0; padding: calc(16 / 16 * 1rem) calc(24 / 16 * 1rem); } .dads-card-example-2__main-header { display: flex; justify-content: space-between; column-gap: calc(16 / 16 * 1rem); min-width: 0; } .dads-card-example-2__heading { margin: 0; min-width: 0; padding-top: calc(4 / 16 * 1rem); color: var(--color-neutral-solid-gray-900); font-weight: bold; font-size: calc(20 / 16 * 1rem); line-height: 1.5; letter-spacing: 0.02em; } .dads-card-example-2__function { margin-right: calc(-24 / 16 * 1rem); flex-shrink: 0; } .dads-card-example-2__function > button { display: flex; align-items: center; justify-content: center; width: calc(44 / 16 * 1rem); height: calc(44 / 16 * 1rem); border: 1px solid transparent; border-radius: calc(6 / 16 * 1rem); background-color: var(--color-neutral-white); padding: 0; color: var(--color-neutral-solid-gray-800); } @media (hover: hover) { .dads-card-example-2__function > button:hover { border-color: var(--color-neutral-black); background-color: var(--color-neutral-solid-gray-50); } } .dads-card-example-2__function > button:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-card-example-2__contents { margin-top: 0; margin-bottom: 0; min-width: 0; } .dads-card-example-2__block-link { grid-area: 1 / 1 / -1 / -1; display: grid; grid-template: subgrid / subgrid; color: inherit; text-decoration: inherit; } .dads-card-example-2__divider { margin-top: calc(8 / 16 * 1rem); margin-bottom: calc(8 / 16 * 1rem); border-top: 1px solid var(--color-neutral-solid-gray-536); } .dads-card-example-2__links { display: flex; column-gap: calc(16 / 16 * 1rem); justify-content: end; } .dads-card-example-2__learn-more:any-link { background: var(--color-primitive-light-blue-900); display: flex; border: 4px double transparent; padding: calc(6 / 16 * 1rem) calc(8 / 16 * 1rem); color: var(--color-neutral-white); font-weight: normal; font-size: calc(16 / 16 * 1rem); line-height: 1; letter-spacing: 0.02em; text-decoration: none; } @media (hover: hover) { .dads-card-example-2__learn-more:hover { background: var(--color-primitive-light-blue-1000); text-decoration: underline; text-decoration-thickness: calc(1 / 16 * 1rem); text-underline-offset: calc(3 / 16 * 1rem); } } .dads-card-example-2__learn-more:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); border-radius: calc(4 / 16 * 1rem); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-card-example-2__image { position: relative; grid-area: image; border-right: 1px solid var(--color-neutral-solid-gray-420); } .dads-card-example-2__image-img { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; }","link":"/design-system/src/components/card/card-example-2.css"},{"title":"","text":".dads-card-example-4-list { margin: 0; display: flex; flex-wrap: wrap; align-items: start; gap: calc(24 / 16 * 1rem); padding: 0; list-style: none; } .dads-card-example-4-list > li { min-width: 0; } .dads-card-example-4 { position: relative; z-index: 0; display: grid; grid-template-columns: 1fr auto; row-gap: calc(16 / 16 * 1rem); box-sizing: border-box; width: 465px; max-width: 100%; border: 1px solid var(--color-neutral-solid-gray-420); padding: calc(16 / 16 * 1rem) calc(24 / 16 * 1rem); color: var(--color-neutral-solid-gray-800); font-weight: normal; font-size: calc(16 / 16 * 1rem); font-family: var(--font-family-sans); line-height: 1.7; letter-spacing: 0.02em; overflow-wrap: anywhere; } .dads-card-example-4__heading { margin: 0; display: flex; flex-direction: column; row-gap: calc(4 / 16 * 1rem); min-width: 0; padding-top: calc(4 / 16 * 1rem); color: var(--color-neutral-solid-gray-900); font-weight: bold; font-size: calc(20 / 16 * 1rem); line-height: 1.5; letter-spacing: 0.02em; } .dads-card-example-4__function { flex-shrink: 0; } .dads-card-example-4__function button { display: flex; align-items: center; justify-content: center; width: calc(44 / 16 * 1rem); height: calc(44 / 16 * 1rem); border: 1px solid transparent; border-radius: calc(6 / 16 * 1rem); background-color: var(--color-neutral-white); padding: 0; color: var(--color-neutral-solid-gray-800); } @media (hover: hover) { .dads-card-example-4__function button:hover { border-color: var(--color-neutral-black); background-color: var(--color-neutral-solid-gray-50); } } .dads-card-example-4__function button:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-card-example-4__contents { grid-column: 1 / -1; min-width: 0; } .dads-card-example-4__contents img { display: block; } .dads-card-example-4__actions { grid-column: 1 / -1; margin: 0; display: flex; flex-wrap: wrap; gap: calc(16 / 16 * 1rem); align-items: center; justify-content: flex-end; min-width: 0; padding: 0; list-style: none; } .dads-card-example-4 .dads-button { border-radius: 0; } .dads-card-example-4 .dads-button:focus-visible { border-radius: calc(4 / 16 * 1rem); }","link":"/design-system/src/components/card/card-example-4.css"},{"title":"","text":".dads-card-example-3-list { margin: 0; display: grid; grid-template-columns: repeat(auto-fill, minmax(auto, 354px)); gap: calc(32 / 16 * 1rem) calc(24 / 16 * 1rem); padding: 0; list-style: none; } .dads-card-example-3-list > li { display: grid; grid-row: span 2; grid-template-rows: subgrid; min-width: 0; } .dads-card-example-3 { position: relative; z-index: 0; box-sizing: border-box; display: grid; grid-row: span 2; grid-template-rows: subgrid; row-gap: 0; border-radius: calc(16 / 16 * 1rem); border: 1px solid var(--color-neutral-solid-gray-420); color: var(--color-neutral-solid-gray-800); font-weight: normal; font-size: calc(16 / 16 * 1rem); font-family: var(--font-family-sans); line-height: 1.7; letter-spacing: 0.02em; overflow-wrap: anywhere; } .dads-card-example-3__main { display: grid; align-content: start; row-gap: calc(16 / 16 * 1rem); min-width: 0; padding: calc(16 / 16 * 1rem) calc(24 / 16 * 1rem); padding-bottom: 0; } .dads-card-example-3__main-header { display: flex; align-items: start; column-gap: calc(16 / 16 * 1rem); min-width: 0; } .dads-card-example-3__avatar { order: -1; flex-shrink: 0; } .dads-card-example-3__heading { display: flex; flex-direction: column; row-gap: calc(8 / 16 * 1rem); min-width: 0; font-weight: normal; font-size: calc(16 / 16 * 1rem); line-height: 1.7; letter-spacing: 0.02em; } .dads-card-example-3__title { margin: 0; color: var(--color-neutral-solid-gray-900); font-weight: bold; font-size: calc(20 / 16 * 1rem); line-height: 1.5; letter-spacing: 0.02em; } .dads-card-example-3__label { order: -1; } .dads-card-example-3__contents { display: flex; flex-direction: column; row-gap: calc(16 / 16 * 1rem); min-width: 0; } .dads-card-example-3__contents > p { margin: 0; } .dads-card-example-3__contents img { display: block; max-width: 100%; height: auto; } .dads-card-example-3__sub { display: grid; gap: calc(16 / 16 * 1rem); min-width: 0; padding: calc(16 / 16 * 1rem) calc(24 / 16 * 1rem); } .dads-card-example-3__sub > * { min-width: 0; } .dads-card-example-3__actions { margin: 0; display: flex; flex-wrap: wrap; gap: calc(16 / 16 * 1rem); align-items: center; justify-content: flex-end; padding: 0; list-style: none; }","link":"/design-system/src/components/card/card-example-3.css"},{"title":"","text":".dads-card-example-5-list { margin: 0; display: flex; flex-wrap: wrap; gap: calc(24 / 16 * 1rem); padding: 0; list-style: none; } .dads-card-example-5-list > li { display: flex; min-width: 0; } .dads-card-example-5 { position: relative; z-index: 0; display: flex; flex-direction: column; box-sizing: border-box; width: 400px; max-width: 100%; border-radius: calc(16 / 16 * 1rem); border: 1px solid var(--color-neutral-solid-gray-420); background-color: var(--color-neutral-white); color: var(--color-neutral-solid-gray-800); font-weight: normal; font-size: calc(16 / 16 * 1rem); font-family: var(--font-family-sans); line-height: 1.7; letter-spacing: 0.02em; overflow-wrap: anywhere; } .dads-card-example-5__link:any-link { display: block; border-radius: calc((16 - 1) / 16 * 1rem) calc((16 - 1) / 16 * 1rem) 0 0; padding-bottom: calc(16 / 16 * 1rem); color: inherit; text-decoration: inherit; } .dads-card-example-5__link:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-card-example-5__heading { margin: 0; font: inherit; } .dads-card-example-5__image-img { display: block; width: 100%; height: auto; border-radius: calc((16 - 1) / 16 * 1rem) calc((16 - 1) / 16 * 1rem) 0 0; } .dads-card-example-5__image-label { position: absolute; top: calc(16 / 16 * 1rem); left: calc(16 / 16 * 1rem); box-sizing: border-box; margin: 0; display: flex; flex-direction: column; align-items: center; row-gap: calc(4 / 16 * 1rem); width: calc(58 / 16 * 1rem); border-radius: calc(8 / 16 * 1rem); background-color: var(--color-neutral-white); padding: calc(8 / 16 * 1rem); } .dads-card-example-5__month { color: var(--color-primitive-cyan-900); font-weight: bold; font-size: calc(14 / 16 * 1rem); line-height: 1; letter-spacing: 0.02em; } .dads-card-example-5__date { font-weight: bold; font-size: calc(24 / 16 * 1rem); line-height: 1; letter-spacing: 0.02em; } .dads-card-example-5__label { margin: calc(16 / 16 * 1rem) calc(24 / 16 * 1rem) calc(8 / 16 * 1rem); display: block; } .dads-card-example-5__title { margin: 0 calc(24 / 16 * 1rem); display: block; color: var(--color-neutral-solid-gray-900); font-weight: bold; font-size: calc(20 / 16 * 1rem); line-height: 1.5; letter-spacing: 0.02em; text-decoration: underline; text-decoration-thickness: calc(1 / 16 * 1rem); text-underline-offset: calc(3 / 16 * 1rem); } @media (hover: hover) { .dads-card-example-5__link:hover .dads-card-example-5__title { text-decoration-thickness: calc(3 / 16 * 1rem); } } .dads-card-example-5__sub { flex-grow: 1; display: grid; grid-template-rows: 1fr auto; gap: calc(32 / 16 * 1rem); padding: 0 calc(24 / 16 * 1rem) calc(16 / 16 * 1rem); } .dads-card-example-5__sub > * { min-width: 0; } .dads-card-example-5__actions { margin: 0; display: flex; flex-wrap: wrap; gap: calc(16 / 16 * 1rem); align-items: center; justify-content: flex-end; padding: 0; list-style: none; } .dads-card-example-5 .dads-button { --button-color: var(--color-primitive-cyan-900); --button-hover-color: var(--color-primitive-cyan-1000); --button-active-color: var(--color-primitive-cyan-1200); --button-outline-hover-bg-color: var(--color-primitive-cyan-50); --button-outline-active-bg-color: var(--color-primitive-cyan-100); }","link":"/design-system/src/components/card/card-example-5.css"},{"title":"","text":".dads-card-example-6-list { margin: 0; display: flex; flex-wrap: wrap; gap: calc(24 / 16 * 1rem); padding: 0; list-style: none; } .dads-card-example-6-list > li { display: flex; min-width: 0; } .dads-card-example-6 { position: relative; z-index: 0; box-sizing: border-box; display: grid; grid-template-areas: \"image\" \"main\"; grid-template-rows: auto 1fr; width: 354px; max-width: 100%; border-radius: calc(16 / 16 * 1rem); border: 1px solid var(--color-neutral-solid-gray-420); color: var(--color-neutral-solid-gray-800); font-weight: normal; font-size: calc(16 / 16 * 1rem); font-family: var(--font-family-sans); line-height: 1.7; letter-spacing: 0.02em; overflow-wrap: anywhere; } .dads-card-example-6:has(:checked) { background-color: var(--color-primitive-blue-50); } .dads-card-example-6__main { grid-area: main; padding: calc(16 / 16 * 1rem) calc(24 / 16 * 1rem); } .dads-card-example-6__heading { margin: 0; color: var(--color-neutral-solid-gray-900); font-weight: bold; font-size: calc(20 / 16 * 1rem); line-height: 1.5; letter-spacing: 0.02em; } .dads-card-example-6__heading label::before { position: absolute; inset: 0; z-index: 1; content: \"\"; } .dads-card-example-6__contents { margin: calc(16 / 16 * 1rem) 0 0; } .dads-card-example-6__image { position: relative; grid-area: image; min-width: 0; border-bottom: 1px solid var(--color-neutral-solid-gray-420); } .dads-card-example-6__checkbox { position: absolute; top: calc(16 / 16 * 1rem); right: calc(16 / 16 * 1rem); display: flex; align-items: center; justify-content: center; box-sizing: border-box; width: calc(48 / 16 * 1rem); height: calc(48 / 16 * 1rem); background-color: var(--color-neutral-white); border-radius: calc(6 / 16 * 1rem); border: 1px solid var(--color-neutral-solid-gray-420); } .dads-card-example-6__image-img { display: block; width: 100%; height: auto; border-radius: calc((16 - 1) / 16 * 1rem) calc((16 - 1) / 16 * 1rem) 0 0; }","link":"/design-system/src/components/card/card-example-6.css"},{"title":"","text":"import path from \"node:path\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt(\"card-example-1\", path.join(dirname, \"example-1.html\")); resetCssVrt(\"card-example-2\", path.join(dirname, \"example-2.html\")); resetCssVrt(\"card-example-3\", path.join(dirname, \"example-3.html\")); resetCssVrt(\"card-example-4\", path.join(dirname, \"example-4.html\")); resetCssVrt(\"card-example-5\", path.join(dirname, \"example-5.html\")); resetCssVrt(\"card-example-6\", path.join(dirname, \"example-6.html\"));","link":"/design-system/src/components/card/card.test.js"},{"title":"","text":"Card 機内サービス 快適なシートや機内食で空の旅をより快適にお過ごしいただけます 乗り継ぎサポート お乗り継ぎ時の際に日本人のガイドがご案内いたします 機内持ち込み手荷物検査 機内にお持ち込みいただける手荷物について係員が検査いたします","link":"/design-system/src/components/card/example-1.html"},{"title":"","text":"Card 地域緑化事業 住民の皆さまが参加できる地域緑化事業を行っています。地域交流を促進するとともに、地域の景観美化を目的としています。 詳しくみる 子育て支援プログラム 子育て世代の皆さまを応援する包括的なサポートプログラムです。育児相談から保育サービスまで幅広い支援を提供しています。 詳しくみる デジタル化推進事業 市民サービスのデジタル化を推進し、より便利で効率的な行政サービスの提供を目指しています。オンライン申請やAI相談など最新技術を活用しています。 詳しくみる","link":"/design-system/src/components/card/example-2.html"},{"title":"","text":"Card 郵送する際のポイント お役立ち情報 重要な書類を郵送する際に注意すべきポイントをご紹介します お気に入り オンライン申請の手順 手続きガイド マイナンバーカードを使った各種オンライン申請の基本的な手順を分かりやすく解説します お気に入り よくある質問と回答 FAQ お客様からよくお寄せいただくご質問とその回答をまとめました お気に入り","link":"/design-system/src/components/card/example-3.html"},{"title":"","text":"Checkbox ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル","link":"/design-system/src/components/checkbox/all-checkboxes.html"},{"title":"","text":"Card アジア地域における交通問題 関連情報 詳しくみる 持続可能な都市開発の最新動向 関連情報 詳しくみる デジタル変革時代の教育改革 関連情報 詳しくみる","link":"/design-system/src/components/card/example-4.html"},{"title":"","text":".dads-checkbox { display: flex; align-items: start; gap: var(--_gap); width: fit-content; } .dads-checkbox:has(.dads-checkbox__label:not(:empty)) { padding-top: calc(8 / 16 * 1rem); padding-bottom: calc(8 / 16 * 1rem); } .dads-checkbox[data-size=\"sm\"] { --_gap: calc(4 / 16 * 1rem); --_checkbox-size: calc(24 / 16 * 1rem); --_checkbox-border-width: calc(2 / 16 * 1rem); --_checkbox-scale: 1; --_label-padding-top: calc(1 / 16 * 1rem); --_label-font-size: calc(16 / 16 * 1rem); } .dads-checkbox[data-size=\"md\"] { --_gap: calc(8 / 16 * 1rem); --_checkbox-size: calc(32 / 16 * 1rem); --_checkbox-border-width: calc(2 / 16 * 1rem); --_checkbox-scale: calc(20 / 14); --_label-padding-top: calc(4 / 16 * 1rem); --_label-font-size: calc(16 / 16 * 1rem); } .dads-checkbox[data-size=\"lg\"] { --_gap: calc(8 / 16 * 1rem); --_checkbox-size: calc(44 / 16 * 1rem); --_checkbox-border-width: calc(3 / 16 * 1rem); --_checkbox-scale: calc(27 / 14); --_label-padding-top: calc(10 / 16 * 1rem); --_label-font-size: calc(17 / 16 * 1rem); } .dads-checkbox__checkbox { display: flex; justify-content: center; align-items: center; flex-shrink: 0; width: var(--_checkbox-size); height: var(--_checkbox-size); border-radius: 12.5%; } @media (hover: hover) { .dads-checkbox__checkbox:has( :not(:focus, :disabled, [aria-disabled=\"true\"]):hover ) { background-color: var(--color-neutral-solid-gray-420); } } .dads-checkbox__input { --_base-color: var(--color-neutral-white); --_accent-color: var(--color-primitive-blue-900); --_accent-hover-color: var(--color-primitive-blue-1100); --_border-color: var(--color-neutral-solid-gray-600); --_border-hover-color: var(--color-neutral-black); --_check-color: var(--color-neutral-white); margin: 0; appearance: none; width: 75%; height: 75%; border-radius: calc(2 / 18 * 100%); background-color: var(--_base-color); background-clip: padding-box; border: var(--_checkbox-border-width) solid var(--_border-color); } .dads-checkbox__input:focus { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } @media (hover: hover) { .dads-checkbox__input:not(:disabled, [aria-disabled=\"true\"]):hover { border-color: var(--_border-hover-color); } } .dads-checkbox__input:is(:checked, :indeterminate) { border-color: var(--_accent-color); background-color: var(--_accent-color); } @media (hover: hover) { .dads-checkbox__input:is(:checked, :indeterminate):not( :disabled, [aria-disabled=\"true\"] ):hover { border-color: var(--_accent-hover-color); background-color: var(--_accent-hover-color); } } .dads-checkbox__input::before { display: none; width: calc(14 / 16 * 1rem); height: calc(14 / 16 * 1rem); background-color: var(--_check-color); transform-origin: left top; transform: scale(var(--_checkbox-scale, 1)); content: \"\"; } .dads-checkbox__input:checked::before { display: block; clip-path: path( \"M5.6,11.2L12.65,4.15L11.25,2.75L5.6,8.4L2.75,5.55L1.35,6.95L5.6,11.2Z\" ); } .dads-checkbox__input:indeterminate::before { display: block; clip-path: path(\"M2,6h10v2H2Z\"); } .dads-checkbox__input[aria-invalid=\"true\"] { --_accent-color: var(--color-semantic-error-1); --_accent-hover-color: var(--color-primitive-red-1000); --_border-color: var(--color-semantic-error-1); --_border-hover-color: var(--color-primitive-red-1000); } .dads-checkbox__input:is(:disabled, [aria-disabled=\"true\"]) { --_base-color: var(--color-neutral-solid-gray-50); --_accent-color: var(--color-neutral-solid-gray-300); --_accent-hover-color: var(--color-neutral-solid-gray-300); --_border-color: var(--color-neutral-solid-gray-300); --_border-hover-color: var(--color-neutral-solid-gray-300); } @media (forced-colors: active) { .dads-checkbox__input, .dads-checkbox__input[aria-invalid=\"true\"] { --_accent-color: Highlight; --_accent-hover-color: Highlight; --_border-color: ButtonText; --_border-hover-color: ButtonText; --_check-color: HighlightText; } .dads-checkbox__input:is(:disabled, [aria-disabled=\"true\"]) { --_accent-color: GrayText; --_accent-hover-color: GrayText; --_border-color: GrayText; --_border-hover-color: GrayText; --_check-color: Canvas; } } .dads-checkbox__label { padding-top: var(--_label-padding-top); color: var(--color-neutral-solid-gray-800); font-weight: normal; font-size: var(--_label-font-size); line-height: 1.3; font-family: var(--font-family-sans); letter-spacing: 0; }","link":"/design-system/src/components/checkbox/checkbox.css"},{"title":"","text":"Card 12月 27日 トラベル情報 鳥の野鳥観察ツアー 大自然の中で野鳥を観察できます。ガイド付きで安心してご参加いただけます。 共有する あとで読む 1月 15日 宿泊情報 温泉リゾート滞在プラン 美しい山間の温泉で心身ともにリフレッシュ。地元の食材を使った料理もお楽しみいただけます。 共有する あとで読む 2月 3日 文化体験 古都散策ウォーキング 歴史ある街並みをゆっくりと歩きながら、伝統文化と建築美を堪能できるコースです。 共有する あとで読む","link":"/design-system/src/components/card/example-5.html"},{"title":"","text":"import path from \"node:path\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt(\"all-checkboxes\", path.join(dirname, \"all-checkboxes.html\")); resetCssVrt(\"stacked\", path.join(dirname, \"stacked.html\"));","link":"/design-system/src/components/checkbox/checkbox.test.js"},{"title":"","text":"Checkbox 東京23区 ※必須 該当するすべての区を選択してください。 足立区 荒川区 板橋区 江戸川区 ＊エラーテキストが入ります。","link":"/design-system/src/components/checkbox/errored.html"},{"title":"","text":"Checkbox 全てのスポーツ サッカー バスケットボール テニス スイミング document.querySelectorAll(\"[data-js-indeterminate-example]\").forEach((el) => { const checkAll = el.querySelector(\"[data-js-check-all]\"); const checks = [...el.querySelectorAll(\"[data-js-check]\")]; function checkOrUncheckAll(e) { const checked = e.target.checked; checks.forEach((check) => check.checked = checked); } function updateCheckAll() { const allChecked = checks.every((check) => check.checked); const noneChecked = checks.every((check) => !check.checked); checkAll.checked = allChecked; checkAll.indeterminate = !allChecked && !noneChecked; } checkAll.addEventListener(\"change\", checkOrUncheckAll); checks.forEach((check) => check.addEventListener(\"change\", updateCheckAll)); updateCheckAll(); });","link":"/design-system/src/components/checkbox/indeterminate.html"},{"title":"","text":"Checkbox 東京23区 ※必須 該当するすべての区を選択してください。 足立区 荒川区 板橋区 江戸川区","link":"/design-system/src/components/checkbox/stacked.html"},{"title":"","text":"Checkbox ラベル","link":"/design-system/src/components/checkbox/playground.html"},{"title":"","text":"Card 新卒採用向けセミナー 人事から業務内容やキャリアパスについてご説明します 中途採用者向け研修 経験者向けのスキルアップ研修とチーム連携について学習します マネジメント講座 リーダーシップとプロジェクト管理の基礎を学ぶ実践的な講座です","link":"/design-system/src/components/card/example-6.html"},{"title":"","text":"Checkbox","link":"/design-system/src/components/checkbox/standalone.html"},{"title":"","text":".dads-description-list { margin-top: calc(16 / 16 * 1rem); margin-bottom: calc(16 / 16 * 1rem); display: grid; gap: calc(8 / 16 * 1rem) 0; overflow-wrap: anywhere; } .dads-description-list dt { font-weight: bold; } .dads-description-list[data-marker=\"bullet\"] dt { margin-left: calc(32 / 16 * 1rem); display: list-item; list-style-type: disc; } .dads-description-list[data-marker=\"custom\"] dt > span:first-child { display: inline-block; min-width: calc(32 / 16 * 1rem); } .dads-description-list dd { margin-left: calc(32 / 16 * 1rem); }","link":"/design-system/src/components/description-list/description-list.css"},{"title":"","text":"Description List 項目名1 これは項目1の説明文です。説明リストは用語とその説明をセットで表示するのに適しています。 項目名2 これは項目2の説明文です。マーカーの種類を変更することで、ブレットや連番を表示できます。 項目名3 これは項目3の説明文です。HTMLのdl、dt、dd要素に対応したコンポーネントです。","link":"/design-system/src/components/description-list/playground.html"},{"title":"","text":".dads-date-picker { display: inline-block; vertical-align: middle; color: var(--color-neutral-solid-gray-800); font-weight: normal; font-size: calc(16 / 16 * 1rem); line-height: 1.7; font-family: var(--font-family-sans); letter-spacing: 0.02em; } .dads-date-picker__controls { position: relative; display: flex; align-items: end; column-gap: calc(16 / 16 * 1rem); } .dads-date-picker__inputs { --_background-color: var(--color-neutral-white); display: inline-flex; box-sizing: border-box; border-radius: calc(8 / 16 * 1rem); border: 1px solid var(--color-neutral-solid-gray-600); background-color: var(--_background-color); padding: calc(2 / 16 * 1rem) 0 calc(2 / 16 * 1rem) calc(2 / 16 * 1rem); } .dads-date-picker__controls[data-size=\"sm\"] .dads-date-picker__inputs { height: calc(40 / 16 * 1rem); } .dads-date-picker__controls[data-size=\"md\"] .dads-date-picker__inputs { height: calc(48 / 16 * 1rem); } .dads-date-picker__controls[data-size=\"lg\"] .dads-date-picker__inputs { height: calc(56 / 16 * 1rem); } .dads-date-picker__inputs:focus-within { border-color: var(--color-neutral-black); } @media (hover: hover) { .dads-date-picker__inputs:hover { border-color: var(--color-neutral-solid-gray-900); } } .dads-date-picker__inputs[data-error] { border-color: var(--color-semantic-error-1); } .dads-date-picker__inputs[data-error]:focus-within { border-color: var(--color-primitive-red-1000); } .dads-date-picker__inputs[data-disabled] { --_background-color: var(--color-neutral-solid-gray-50); border-color: var(--color-neutral-solid-gray-300); color: var(--color-neutral-solid-gray-420); } .dads-date-picker__inputs[data-readonly] { border-style: dashed; border-color: var(--color-neutral-solid-gray-600); } @media (forced-colors: active) { .dads-date-picker__inputs:focus-within { border-color: Highlight; } @media (hover: hover) { .dads-date-picker__inputs:hover { border-color: Highlight; } } .dads-date-picker__inputs[data-disabled] { --_background-color: ButtonFace; border-color: GrayText; color: GrayText; } .dads-date-picker__inputs[data-readonly] { border-color: currentcolor; } } .dads-date-picker__year, .dads-date-picker__month, .dads-date-picker__day { position: relative; z-index: 0; display: inline-flex; flex-direction: row-reverse; } :is(.dads-date-picker__month, .dads-date-picker__day):not(:first-child) { margin-left: calc(-4 / 16 * 1rem); } :is(.dads-date-picker__month, .dads-date-picker__day):last-child { padding-right: calc(16 / 16 * 1rem); } .dads-date-picker__label { position: relative; z-index: 1; align-self: center; background-color: var(--_background-color); padding: calc(4 / 16 * 1rem); line-height: 1; } .dads-date-picker__input { margin-right: calc(-4 / 16 * 1rem); box-sizing: border-box; width: calc(64 / 16 * 1rem); border-radius: calc(8 / 16 * 1rem); border: 1px solid transparent; background-color: transparent; padding-right: calc(12 / 16 * 1rem); color: inherit; text-align: right; font: inherit; letter-spacing: inherit; } .dads-date-picker__input:focus { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); border: 1px solid var(--color-neutral-solid-gray-600); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } :is(.dads-date-picker__month, .dads-date-picker__day) .dads-date-picker__input { width: calc(44 / 16 * 1rem); } .dads-date-picker__separated-inputs { display: inline-flex; column-gap: calc(16 / 16 * 1rem); box-sizing: content-box; padding-top: calc(12 / 16 * 1rem); } .dads-date-picker__controls[data-size=\"sm\"] .dads-date-picker__separated-inputs { height: calc(40 / 16 * 1rem); } .dads-date-picker__controls[data-size=\"md\"] .dads-date-picker__separated-inputs { height: calc(48 / 16 * 1rem); } .dads-date-picker__controls[data-size=\"lg\"] .dads-date-picker__separated-inputs { height: calc(56 / 16 * 1rem); } .dads-date-picker__separated-year, .dads-date-picker__separated-month, .dads-date-picker__separated-day { position: relative; } .dads-date-picker__separated-label { position: absolute; top: calc(-12 / 16 * 1rem); right: 0; left: 0; margin: 0 auto; box-sizing: border-box; width: calc(24 / 16 * 1rem); background-color: var(--color-neutral-white); padding: calc(4 / 16 * 1rem); line-height: 1; } .dads-date-picker__separated-label:has(+ :disabled) { color: var(--color-neutral-solid-gray-420); } @media (forced-colors: active) { .dads-date-picker__separated-label:has(+ :disabled) { color: GrayText; } } .dads-date-picker__separated-input { box-sizing: border-box; width: calc(72 / 16 * 1rem); height: 100%; border-radius: calc(8 / 16 * 1rem); border: 1px solid var(--color-neutral-solid-gray-600); background-color: var(--color-neutral-white); color: inherit; text-align: center; font: inherit; letter-spacing: inherit; } .dads-date-picker__separated-input:read-only:not(:disabled) { border-style: dashed; } .dads-date-picker__separated-input[aria-invalid=\"true\"] { border-color: var(--color-semantic-error-1); } @media (hover: hover) { .dads-date-picker__separated-input:not(:read-only):hover { border-color: var(--color-neutral-solid-gray-900); } .dads-date-picker__separated-input[aria-invalid=\"true\"]:hover { border-color: var(--color-primitive-red-1000); } } .dads-date-picker__separated-input:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-date-picker__separated-input:disabled { border-color: var(--color-neutral-solid-gray-600); background-color: var(--color-neutral-solid-gray-50); color: var(--color-neutral-solid-gray-420); } :is(.dads-date-picker__separated-month, .dads-date-picker__separated-day) .dads-date-picker__separated-input { width: calc(56 / 16 * 1rem); } @media (forced-colors: active) { .dads-date-picker__separated-input:disabled { border-color: GrayText; color: GrayText; } } .dads-date-picker__calendar-button { display: flex; align-items: center; justify-content: center; column-gap: calc(4 / 16 * 1rem); border-radius: calc(6 / 16 * 1rem); border: 1px solid; background-color: var(--color-neutral-white); padding-right: calc(12 / 16 * 1rem); padding-left: calc(12 / 16 * 1rem); color: var(--color-primitive-blue-900); } .dads-date-picker__controls[data-size=\"sm\"] .dads-date-picker__calendar-button { height: calc(40 / 16 * 1rem); } .dads-date-picker__controls[data-size=\"md\"] .dads-date-picker__calendar-button { height: calc(48 / 16 * 1rem); } .dads-date-picker__controls[data-size=\"lg\"] .dads-date-picker__calendar-button { height: calc(56 / 16 * 1rem); } @media (hover: hover) { .dads-date-picker__calendar-button:enabled:hover { border-width: calc(3 / 16 * 1rem); padding-right: calc(10 / 16 * 1rem); padding-left: calc(10 / 16 * 1rem); } } .dads-date-picker__calendar-button:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); border-radius: calc(4 / 16 * 1rem); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-date-picker__calendar-button:disabled { cursor: default; background-color: var(--color-neutral-white); color: var(--color-neutral-solid-gray-300); text-decoration: none; } @media (forced-colors: active) { .dads-date-picker__calendar-button:disabled { border-color: GrayText; color: GrayText; } } .dads-date-picker__calendar-icon { width: calc(24 / 16 * 1rem); height: calc(24 / 16 * 1rem); } .dads-date-picker__calendar-chevron { width: calc(16 / 16 * 1rem); height: calc(16 / 16 * 1rem); } .dads-date-picker__calendar-button[aria-expanded=\"true\"] .dads-date-picker__calendar-chevron { rotate: 180deg; } .dads-date-picker__backdrop { position: fixed; inset: 0; z-index: -1; } .dads-date-picker__calendar-popover { position: absolute; top: 100%; left: 0; z-index: 1; border-radius: calc(8 / 16 * 1rem); border: 1px solid var(--color-neutral-solid-gray-420); background-color: var(--color-neutral-white); box-shadow: var(--elevation-1); } .dads-date-picker__error-text { margin: calc(8 / 16 * 1rem) 0 0 0; color: var(--color-semantic-error-1); line-height: 1.7; }","link":"/design-system/src/components/date-picker/date-picker.css"},{"title":"","text":"export class DatePicker extends HTMLElement { constructor() { super(); this.subscriptions = []; } connectedCallback() { this.setupEventListeners(); } disconnectedCallback() { for (const subscription of this.subscriptions) subscription.remove(); this.subscriptions = []; } setupEventListeners() { if (this.isConsolidated) { if (this.yearInput) { this.subscriptions.push( subscribe(this.yearInput, \"keydown\", (e) => this.handleInputKeydown(e, \"year\"), ), ); } if (this.monthInput) { this.subscriptions.push( subscribe(this.monthInput, \"keydown\", (e) => this.handleInputKeydown(e, \"month\"), ), ); } if (this.dayInput) { this.subscriptions.push( subscribe(this.dayInput, \"keydown\", (e) => this.handleInputKeydown(e, \"day\"), ), ); } } if (this.isCalendar) { this.subscriptions.push( subscribe(this, \"date-selected\", (e) => this.handleDateSelected(e)), subscribe(this.calendarButton, \"click\", () => this.toggleCalendar()), subscribe(this.calendarPopover, \"keydown\", (e) => this.handlePopoverKeydown(e), ), subscribe(this.backdrop, \"click\", () => this.closeCalendar()), ); } } handleDateSelected(e) { const { date } = e.detail; this.syncToInputs(date); this.closeCalendar(); } clearInputs() { if (this.yearInput) this.yearInput.value = \"\"; if (this.monthInput) this.monthInput.value = \"\"; if (this.dayInput) this.dayInput.value = \"\"; } syncToInputs(date) { if (!date) { this.clearInputs(); return; } if (this.yearInput) { this.yearInput.value = String(date.getFullYear()).padStart(4, \"0\"); } if (this.monthInput) { this.monthInput.value = String(date.getMonth() + 1).padStart(2, \"0\"); } if (this.dayInput) { this.dayInput.value = String(date.getDate()).padStart(2, \"0\"); } } toggleCalendar() { if (this.isCalendarOpen) { this.closeCalendar(); } else { this.openCalendar(); } } openCalendar() { const year = this.yearInput ? Number.parseInt(this.yearInput.value) : null; const month = this.monthInput ? Number.parseInt(this.monthInput.value) : null; const day = this.dayInput ? Number.parseInt(this.dayInput.value) : null; this.calendar.setSelectedDate(new Date(year, month - 1, day)); if (year && month && !Number.isNaN(year) && !Number.isNaN(month)) { this.calendar.setDisplayMonth(year, month - 1); } this.calendarPopover.style.display = \"block\"; this.calendarButton.setAttribute(\"aria-expanded\", \"true\"); this.calendar.focus(); } closeCalendar() { this.calendarPopover.style.display = \"none\"; this.calendarButton.setAttribute(\"aria-expanded\", \"false\"); this.calendarButton.focus(); } handleInputKeydown(e, fieldType) { if (e.key === \"ArrowLeft\" || e.key === \"ArrowRight\") { const input = e.target; const cursorPosition = input.selectionStart; const isAtStart = cursorPosition === 0; const isAtEnd = cursorPosition === input.value.length; if (e.key === \"ArrowLeft\" && isAtStart) { e.preventDefault(); this.focusPreviousField(fieldType); } else if (e.key === \"ArrowRight\" && isAtEnd) { e.preventDefault(); this.focusNextField(fieldType); } } } focusPreviousField(currentField) { if (currentField === \"month\" && this.yearInput) { this.yearInput.focus(); } else if (currentField === \"day\" && this.monthInput) { this.monthInput.focus(); } } focusNextField(currentField) { if (currentField === \"year\" && this.monthInput) { this.monthInput.focus(); } else if (currentField === \"month\" && this.dayInput) { this.dayInput.focus(); } } handlePopoverKeydown(e) { if (e.key === \"Escape\") { e.preventDefault(); this.closeCalendar(); return; } if (e.key === \"Tab\") { const focusableElements = this.getFocusableElements(); const firstElement = focusableElements[0]; const lastElement = focusableElements[focusableElements.length - 1]; if (e.shiftKey) { if (document.activeElement === firstElement) { e.preventDefault(); lastElement.focus(); } } else { if (document.activeElement === lastElement) { e.preventDefault(); firstElement.focus(); } } } } getFocusableElements() { const selectors = [ \"button:not([disabled])\", \"select:not([disabled])\", '[tabindex]:not([tabindex=\"-1\"])', ].join(\",\"); return Array.from(this.calendarPopover.querySelectorAll(selectors)); } get isCalendar() { return Boolean(this.calendarButton); } get isCalendarOpen() { return this.calendarButton.getAttribute(\"aria-expanded\") === \"true\"; } get isConsolidated() { return this.getAttribute(\"data-type\") === \"consolidated\"; } get yearInput() { return this.querySelector(\"[data-js-year-input]\"); } get monthInput() { return this.querySelector(\"[data-js-month-input]\"); } get dayInput() { return this.querySelector(\"[data-js-day-input]\"); } get calendarButton() { return this.querySelector(\"[data-js-calendar-button]\"); } get calendarPopover() { return this.querySelector(\"[data-js-calendar-popover]\"); } get calendar() { return this.querySelector(\"[data-js-calendar]\"); } get backdrop() { return this.querySelector(\"[data-js-backdrop]\"); } } function subscribe(el, ...args) { el.addEventListener(...args); return { remove: () => el.removeEventListener(...args) }; } customElements.define(\"dads-date-picker\", DatePicker);","link":"/design-system/src/components/date-picker/date-picker.js"},{"title":"","text":"import path from \"node:path\"; import { test, expect } from \"@playwright/test\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt( \"date-picker-consolidated\", path.join(dirname, \"playground-consolidated.html\"), ); resetCssVrt( \"date-picker-separated\", path.join(dirname, \"playground-separated.html\"), ); // オプション付きでデートピッカーをセットアップするヘルパー関数 const setupDatePicker = async (page, type = \"consolidated\", options = {}) => { const { minDate, maxDate } = options; const fileName = type === \"consolidated\" ? \"playground-consolidated.html\" : \"playground-separated.html\"; await page.goto(`file://${path.join(dirname, fileName)}`); // 提供されている場合はmin-dateとmax-date属性を設定 if (minDate || maxDate) { await page.evaluate( (attrs) => { const calendar = document.querySelector(\"dads-calendar\"); if (attrs.minDate) calendar.setAttribute(\"min-date\", attrs.minDate); if (attrs.maxDate) calendar.setAttribute(\"max-date\", attrs.maxDate); }, { minDate, maxDate }, ); } }; // 機能テスト test.describe(\"DatePicker 機能テスト\", () => { test.describe(\"基本的な初期化とライフサイクル\", () => { test(\"適切に初期化されるべき\", async ({ page }) => { await setupDatePicker(page, \"consolidated\"); const datePicker = page.locator(\"dads-date-picker\"); await expect(datePicker).toBeVisible(); const yearInput = page.getByRole(\"textbox\", { name: \"年\" }); const monthInput = page.getByRole(\"textbox\", { name: \"月\" }); const dayInput = page.getByRole(\"textbox\", { name: \"日\" }); const calendarButton = page.getByRole(\"button\", { name: /カレンダー/ }); await expect(yearInput).toBeVisible(); await expect(monthInput).toBeVisible(); await expect(dayInput).toBeVisible(); await expect(calendarButton).toBeVisible(); await expect(calendarButton).toHaveAttribute(\"aria-expanded\", \"false\"); }); }); test.describe(\"Consolidatedタイプのキーボードナビゲーション\", () => { test(\"右矢印キーで前方にナビゲートするべき\", async ({ page }) => { await setupDatePicker(page, \"consolidated\"); const yearInput = page.getByRole(\"textbox\", { name: \"年\" }); const monthInput = page.getByRole(\"textbox\", { name: \"月\" }); const dayInput = page.getByRole(\"textbox\", { name: \"日\" }); // 年入力にフォーカスして末尾に移動 await yearInput.focus(); await yearInput.fill(\"2024\"); await page.keyboard.press(\"End\"); // 右矢印で月入力に移動するべき await page.keyboard.press(\"ArrowRight\"); await expect(monthInput).toBeFocused(); // 月を入力して末尾に移動 await monthInput.fill(\"12\"); await page.keyboard.press(\"End\"); // 右矢印で日入力に移動するべき await page.keyboard.press(\"ArrowRight\"); await expect(dayInput).toBeFocused(); }); test(\"左矢印キーで後方にナビゲートするべき\", async ({ page }) => { await setupDatePicker(page, \"consolidated\"); const yearInput = page.getByRole(\"textbox\", { name: \"年\" }); const monthInput = page.getByRole(\"textbox\", { name: \"月\" }); const dayInput = page.getByRole(\"textbox\", { name: \"日\" }); // 日入力にフォーカスして先頭に移動 await dayInput.focus(); await dayInput.fill(\"15\"); await page.keyboard.press(\"Home\"); // 左矢印で月入力に移動するべき await page.keyboard.press(\"ArrowLeft\"); await expect(monthInput).toBeFocused(); // 月を入力して先頭に移動 await monthInput.fill(\"12\"); await page.keyboard.press(\"Home\"); // 左矢印で年入力に移動するべき await page.keyboard.press(\"ArrowLeft\"); await expect(yearInput).toBeFocused(); }); test(\"カーソルが入力の中央にある時はナビゲートしないべき\", async ({ page, }) => { await setupDatePicker(page, \"consolidated\"); const yearInput = page.getByRole(\"textbox\", { name: \"年\" }); await yearInput.focus(); await yearInput.fill(\"2024\"); // カーソルを中央に移動 await page.keyboard.press(\"Home\"); await page.keyboard.press(\"ArrowRight\"); await page.keyboard.press(\"ArrowRight\"); // 右矢印はカーソルを移動するべきで、フォーカスは移動しない await page.keyboard.press(\"ArrowRight\"); await expect(yearInput).toBeFocused(); }); }); test.describe(\"Separatedタイプの動作\", () => { test(\"キーボードナビゲーションを持たないべき\", async ({ page }) => { await setupDatePicker(page, \"separated\"); const yearInput = page.getByRole(\"textbox\", { name: \"年\" }); const monthInput = page.getByRole(\"textbox\", { name: \"月\" }); await yearInput.focus(); await yearInput.fill(\"2024\"); await page.keyboard.press(\"End\"); // separatedタイプでは右矢印で月入力に移動するべきではない await page.keyboard.press(\"ArrowRight\"); await expect(yearInput).toBeFocused(); }); }); test.describe(\"カレンダーを開く\", () => { test(\"ボタンクリックでカレンダーを切り替えるべき\", async ({ page }) => { await setupDatePicker(page, \"consolidated\"); const calendarButton = page.getByRole(\"button\", { name: /カレンダー/ }); const calendarDialog = page.getByRole(\"dialog\", { name: \"カレンダー\" }); // 初期状態では閉じている await expect(calendarButton).toHaveAttribute(\"aria-expanded\", \"false\"); await expect(calendarDialog).not.toBeVisible(); // クリックして開く await calendarButton.click(); await expect(calendarButton).toHaveAttribute(\"aria-expanded\", \"true\"); await expect(calendarDialog).toBeVisible(); }); test(\"背景クリックでカレンダーを閉じるべき\", async ({ page }) => { await setupDatePicker(page, \"consolidated\"); const calendarButton = page.getByRole(\"button\", { name: /カレンダー/ }); const calendarDialog = page.getByRole(\"dialog\", { name: \"カレンダー\" }); const backdrop = page.locator(\"[data-js-backdrop]\"); // カレンダーを開く await calendarButton.click(); await expect(calendarDialog).toBeVisible(); // 背景をクリックして閉じる await backdrop.click(); await expect(calendarDialog).not.toBeVisible(); await expect(calendarButton).toHaveAttribute(\"aria-expanded\", \"false\"); await expect(calendarButton).toBeFocused(); }); test(\"Escapeキーでカレンダーを閉じるべき\", async ({ page }) => { await setupDatePicker(page, \"consolidated\"); const calendarButton = page.getByRole(\"button\", { name: /カレンダー/ }); const calendarDialog = page.getByRole(\"dialog\", { name: \"カレンダー\" }); // カレンダーを開く await calendarButton.click(); await expect(calendarDialog).toBeVisible(); // Escapeキーを押して閉じる await page.keyboard.press(\"Escape\"); await expect(calendarDialog).not.toBeVisible(); await expect(calendarButton).toHaveAttribute(\"aria-expanded\", \"false\"); await expect(calendarButton).toBeFocused(); }); }); test.describe(\"日付選択シナリオ\", () => { test(\"選択した日付を入力フィールドに同期するべき\", async ({ page }) => { await setupDatePicker(page, \"consolidated\"); const calendarButton = page.getByRole(\"button\", { name: /カレンダー/ }); const yearInput = page.getByRole(\"textbox\", { name: \"年\" }); const monthInput = page.getByRole(\"textbox\", { name: \"月\" }); const dayInput = page.getByRole(\"textbox\", { name: \"日\" }); // カレンダーを開く await calendarButton.click(); // カレンダーの準備ができるまで待って日付をクリック const dateButton = page.getByRole(\"gridcell\").getByRole(\"button\").first(); await dateButton.click(); // 入力フィールドが適切な形式で埋められていることを確認 const yearValue = await yearInput.inputValue(); const monthValue = await monthInput.inputValue(); const dayValue = await dayInput.inputValue(); expect(yearValue).toMatch(/^\\d{4}$/); expect(monthValue).toMatch(/^\\d{2}$/); expect(dayValue).toMatch(/^\\d{2}$/); // カレンダーが閉じられるべき const calendarDialog = page.getByRole(\"dialog\", { name: \"カレンダー\" }); await expect(calendarDialog).not.toBeVisible(); }); }); test.describe(\"フォーカストラップ\", () => { test(\"Tabキーでフォーカスをトラップするべき\", async ({ page }) => { await setupDatePicker(page, \"consolidated\"); const calendarButton = page.getByRole(\"button\", { name: /カレンダー/ }); // カレンダーを開く await calendarButton.click(); // カレンダー内のフォーカス可能な要素を取得 const yearSelect = page.getByRole(\"combobox\", { name: \"年\" }); const deleteButton = page.getByRole(\"button\", { name: \"削除\" }); const todayButton = page.getByRole(\"button\", { name: \"今日\" }); // Tabキーでフォーカス可能な要素を循環するべき await page.keyboard.press(\"Tab\"); await expect(deleteButton).toBeFocused(); await page.keyboard.press(\"Tab\"); await expect(todayButton).toBeFocused(); await page.keyboard.press(\"Tab\"); await expect(yearSelect).toBeFocused(); // Tabキーで最後のフォーカス可能な要素に戻るべき await page.keyboard.press(\"Shift+Tab\"); await expect(todayButton).toBeFocused(); }); }); test.describe(\"DatePickerとCalendarの統合\", () => { test(\"年と月が入力された時に正しい月を表示するべき\", async ({ page }) => { await setupDatePicker(page, \"consolidated\", { minDate: \"2025-01-01\", maxDate: \"2025-12-31\", }); const yearInput = page.getByRole(\"textbox\", { name: \"年\" }); const monthInput = page.getByRole(\"textbox\", { name: \"月\" }); const calendarButton = page.getByRole(\"button\", { name: /カレンダー/ }); // 年と月を入力 await yearInput.fill(\"2025\"); await monthInput.fill(\"03\"); // カレンダーを開く await calendarButton.click(); // 2025年3月が表示されていることを確認 const currentMonth = page.locator(\"[data-js-current-month]\"); await expect(currentMonth).toContainText(\"3月\"); const yearSelect = page.getByRole(\"combobox\", { name: \"年\" }); await expect(yearSelect).toHaveValue(\"2025\"); }); test(\"範囲外の日付が入力された時に最も近い有効な月を表示するべき\", async ({ page, }) => { await setupDatePicker(page, \"consolidated\", { minDate: \"2025-01-01\", maxDate: \"2025-12-31\", }); const yearInput = page.getByRole(\"textbox\", { name: \"年\" }); const monthInput = page.getByRole(\"textbox\", { name: \"月\" }); const calendarButton = page.getByRole(\"button\", { name: /カレンダー/ }); // 範囲外の日付を入力（遠い未来） await yearInput.fill(\"2030\"); await monthInput.fill(\"12\"); // カレンダーを開く await calendarButton.click(); // 2025年12月が表示されていることを確認 const currentMonth = page.locator(\"[data-js-current-month]\"); await expect(currentMonth).toContainText(\"12月\"); const yearSelect = page.getByRole(\"combobox\", { name: \"年\" }); const yearValue = await yearSelect.inputValue(); expect(Number.parseInt(yearValue)).toBe(2025); }); test(\"日付が入力されていない時に現在の月を表示するべき\", async ({ page, }) => { await setupDatePicker(page, \"consolidated\"); const calendarButton = page.getByRole(\"button\", { name: /カレンダー/ }); // 日付を入力せずにカレンダーを開く await calendarButton.click(); // 現在の月が表示されるべき const today = new Date(); const currentMonth = page.locator(\"[data-js-current-month]\"); await expect(currentMonth).toContainText(`${today.getMonth() + 1}月`); const yearSelect = page.getByRole(\"combobox\", { name: \"年\" }); const yearValue = await yearSelect.inputValue(); expect(Number.parseInt(yearValue)).toBe(today.getFullYear()); }); }); });","link":"/design-system/src/components/date-picker/date-picker.test.js"},{"title":"","text":"Date Picker 年 月 日 日 月 火 水 木 金 土 削除 今日 ＊正しい日付を入力してください。","link":"/design-system/src/components/date-picker/playground-consolidated.html"},{"title":"","text":"Date Picker 年 月 日 日 月 火 水 木 金 土 削除 今日 ＊正しい日付を入力してください。","link":"/design-system/src/components/date-picker/playground-separated.html"},{"title":"","text":"Date Picker 生年月日 編集不可 編集できない理由が入ります。 年 月 日","link":"/design-system/src/components/date-picker/readonly.html"},{"title":"","text":"Date Picker 生年月日 ※必須 西暦で記入してください。 例）2021年09月01日 年 月 日","link":"/design-system/src/components/date-picker/with-form-control-label.html"},{"title":"","text":"Chip Label ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル","link":"/design-system/src/components/chip-label/all-chip-labels.html"},{"title":"","text":".dads-chip-label { display: inline-grid; grid-template-columns: auto auto; align-items: baseline; align-content: center; box-sizing: border-box; min-height: calc(32 / 16 * 1rem); border-radius: calc(8 / 16 * 1rem); padding: calc(3 / 16 * 1rem) calc(7 / 16 * 1rem); font-weight: normal; font-size: calc(16 / 16 * 1rem); line-height: 1; font-family: var(--font-family-sans); letter-spacing: 0.02em; overflow-wrap: anywhere; } .dads-chip-label[data-style=\"text\"] { padding: calc(4 / 16 * 1rem) calc(8 / 16 * 1rem); color: var(--_text, #000); } .dads-chip-label[data-style=\"outline\"] { border: 1px solid var(--_non-text, #000); color: var(--_text, #000); } .dads-chip-label[data-style=\"filled-outline\"] { border: 1px solid var(--_non-text, #000); background-color: var(--_bg, #eee); color: var(--_text-dark, #000); } .dads-chip-label[data-style=\"fill\"] { border: 1px solid transparent; background-color: var(--_non-text, #000); color: var(--color-neutral-white, #fff); } .dads-chip-label[data-color=\"gray\"] { --_non-text: var(--color-neutral-solid-gray-700); --_bg: var(--color-neutral-solid-gray-50); --_text: var(--color-neutral-solid-gray-800); --_text-dark: var(--color-neutral-solid-gray-800); } .dads-chip-label[data-color=\"blue\"] { --_non-text: var(--color-primitive-blue-700); --_bg: var(--color-primitive-blue-50); --_text: var(--color-primitive-blue-700); --_text-dark: var(--color-primitive-blue-800); } .dads-chip-label[data-color=\"light-blue\"] { --_non-text: var(--color-primitive-light-blue-800); --_bg: var(--color-primitive-light-blue-50); --_text: var(--color-primitive-light-blue-800); --_text-dark: var(--color-primitive-light-blue-900); } .dads-chip-label[data-color=\"cyan\"] { --_non-text: var(--color-primitive-cyan-900); --_bg: var(--color-primitive-cyan-50); --_text: var(--color-primitive-cyan-900); --_text-dark: var(--color-primitive-cyan-1000); } .dads-chip-label[data-color=\"green\"] { --_non-text: var(--color-primitive-green-800); --_bg: var(--color-primitive-green-50); --_text: var(--color-primitive-green-800); --_text-dark: var(--color-primitive-green-900); } .dads-chip-label[data-color=\"lime\"] { --_non-text: var(--color-primitive-lime-900); --_bg: var(--color-primitive-lime-50); --_text: var(--color-primitive-lime-900); --_text-dark: var(--color-primitive-lime-1000); } .dads-chip-label[data-color=\"yellow\"] { --_non-text: var(--color-primitive-yellow-1000); --_bg: var(--color-primitive-yellow-50); --_text: var(--color-primitive-yellow-1000); --_text-dark: var(--color-primitive-yellow-1100); } .dads-chip-label[data-color=\"orange\"] { --_non-text: var(--color-primitive-orange-900); --_bg: var(--color-primitive-orange-50); --_text: var(--color-primitive-orange-900); --_text-dark: var(--color-primitive-orange-1000); } .dads-chip-label[data-color=\"red\"] { --_non-text: var(--color-primitive-red-900); --_bg: var(--color-primitive-red-50); --_text: var(--color-primitive-red-900); --_text-dark: var(--color-primitive-red-1000); } .dads-chip-label[data-color=\"magenta\"] { --_non-text: var(--color-primitive-magenta-800); --_bg: var(--color-primitive-magenta-50); --_text: var(--color-primitive-magenta-800); --_text-dark: var(--color-primitive-magenta-900); } .dads-chip-label[data-color=\"purple\"] { --_non-text: var(--color-primitive-purple-800); --_bg: var(--color-primitive-purple-50); --_text: var(--color-primitive-purple-800); --_text-dark: var(--color-primitive-purple-800); } .dads-chip-label__icon { --_icon-size: calc(24 / 16 * 1rem); --_offset: calc((var(--_icon-size) - 1cap) / 2); position: relative; top: var(--_offset); margin-top: calc(-1 * var(--_offset)); margin-right: calc(4 / 16 * 1rem); margin-bottom: var(--_offset); flex-shrink: 0; } @media (forced-colors: active) { .dads-chip-label__icon { fill: CanvasText; } } .dads-chip-label[data-style=\"filled-outline\"] .dads-chip-label__icon { color: var(--_non-text, #000); }","link":"/design-system/src/components/chip-label/chip-label.css"},{"title":"","text":".sb-story { padding: calc(6 / 16 * 1rem); }","link":"/design-system/src/components/date-picker/date-picker.stories.css"},{"title":"","text":"Chip Label ラベル","link":"/design-system/src/components/chip-label/playground.html"},{"title":"","text":"import path from \"node:path\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt(\"chip-label-normal\", path.join(dirname, \"playground.html\"));","link":"/design-system/src/components/chip-label/chip-label.test.js"},{"title":"","text":".dads-disclosure__summary { display: flex; align-items: start; justify-content: start; gap: calc(8 / 16 * 1rem); width: fit-content; cursor: default; list-style-type: none; } @media (hover: hover) { .dads-disclosure__summary:hover { text-decoration: underline; text-underline-offset: calc(3 / 16 * 1rem); } } .dads-disclosure__summary:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); border-radius: calc(4 / 16 * 1rem); background-color: var(--color-primitive-yellow-300); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-disclosure__summary::marker { content: \"\"; } .dads-disclosure__summary::-webkit-details-marker { display: none; } .dads-disclosure__icon { flex-shrink: 0; margin-top: calc((1lh - 24px) / 2); color: var(--color-primitive-blue-1000); } @media (forced-colors: active) { .dads-disclosure__icon { color: inherit; } } .dads-disclosure[open] .dads-disclosure__icon { rotate: 180deg; } .dads-disclosure__icon-hover { display: none; } @media (hover: hover) { .dads-disclosure__summary:hover .dads-disclosure__icon-circle { fill: Canvas; } .dads-disclosure__summary:hover .dads-disclosure__icon-triangle { fill: currentcolor; } } .dads-disclosure__content { padding-left: calc(32 / 16 * 1rem); margin: calc(16 / 16 * 1rem) 0; } .dads-disclosure__back-link:any-link { display: flex; align-items: start; gap: calc(6 / 16 * 1rem); width: fit-content; color: var(--color-primitive-blue-1000); text-decoration: underline; text-decoration-thickness: calc(1 / 16 * 1rem); text-underline-offset: calc(3 / 16 * 1rem); text-spacing-trim: trim-start; } @media (hover: hover) { .dads-disclosure__back-link:hover { color: var(--color-primitive-blue-900); text-decoration-thickness: calc(3 / 16 * 1rem); } } .dads-disclosure__back-link:active { color: var(--color-primitive-orange-800); text-decoration-thickness: calc(1 / 16 * 1rem); } .dads-disclosure__back-link:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); border-radius: calc(4 / 16 * 1rem); background-color: var(--color-primitive-yellow-300); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-disclosure__back-link-icon { margin-top: calc((1lh - 24 / 16 * 1rem) / 2); flex-shrink: 0; }","link":"/design-system/src/components/disclosure/disclosure.css"},{"title":"","text":"Divider","link":"/design-system/src/components/divider/all-dividers.html"},{"title":"","text":".dads-divider { margin: 0; border: 0; border-top: 1px solid; opacity: 1; } .dads-divider[data-color=\"solid-gray-420\"] { border-top-color: var(--color-neutral-solid-gray-420); } .dads-divider[data-color=\"solid-gray-536\"] { border-top-color: var(--color-neutral-solid-gray-536); } .dads-divider[data-color=\"black\"] { border-top-color: var(--color-neutral-black); } .dads-divider[data-style=\"solid\"] { border-top-style: solid; } .dads-divider[data-style=\"dashed\"] { border-top-style: dashed; } .dads-divider[data-width=\"1\"] { border-top-width: 1px; } .dads-divider[data-width=\"2\"] { border-top-width: 2px; } .dads-divider[data-width=\"3\"] { border-top-width: 3px; } .dads-divider[data-width=\"4\"] { border-top-width: 4px; }","link":"/design-system/src/components/divider/divider.css"},{"title":"","text":"Disclosure ダミーテキストとは何ですか？ これはダミーテキストです。 ダミーテキストは、デザインやレイアウトの作成時に使用される仮の文章です。ダミーテキストを使用すると、デザインの全体像を評価したり、テキストの配置や長さを確認したりすることができます。ダミーテキストは実際の文章ではないので、内容には意味がありません。 「ダミーテキストとは何ですか？」の先頭に戻る","link":"/design-system/src/components/disclosure/playground.html"},{"title":"","text":".dads-drawer { margin: unset; max-width: 100%; max-height: unset; box-sizing: border-box; width: calc(288 / 16 * 1rem); height: 100vh; height: 100dvh; box-shadow: var(--elevation-2); background-color: var(--color-neutral-white); border: 0; padding: 0; color: var(--color-neutral-solid-gray-800); font-weight: normal; font-size: calc(16 / 16 * 1rem); line-height: 1.7; font-family: var(--font-family-sans); letter-spacing: 0.02em; } .dads-drawer[data-placement=\"right\"] { left: auto; border-left: 1px solid transparent; } .dads-drawer[data-placement=\"left\"] { right: auto; border-right: 1px solid transparent; } .dads-drawer[open] { display: grid; grid-template: \"header\" auto \"body\" 1fr / 1fr; } .dads-drawer::backdrop { background-color: var(--color-neutral-opacity-gray-100); } @media (forced-colors: active) { .dads-drawer::backdrop { background-color: #000b; } } .dads-drawer__header { display: flex; grid-area: header; padding: calc(20 / 16 * 1rem) calc(16 / 16 * 1rem); } .dads-drawer[data-placement=\"right\"] .dads-drawer__header { justify-content: end; } .dads-drawer[data-placement=\"left\"] .dads-drawer__header { justify-content: start; } .dads-drawer__body { grid-area: body; overflow: auto; overscroll-behavior: contain; scrollbar-gutter: stable; }","link":"/design-system/src/components/drawer/drawer.css"},{"title":"","text":"import path from \"node:path\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt(\"playground\", path.join(dirname, \"playground.html\"));","link":"/design-system/src/components/drawer/drawer.test.js"},{"title":"","text":"import path from \"node:path\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt(\"all-dividers\", path.join(dirname, \"all-dividers.html\"));","link":"/design-system/src/components/divider/divider.test.js"},{"title":"","text":"Drawer window[\"dads-drawer\"].showModal(); メニュー メニュー 閉じる","link":"/design-system/src/components/drawer/playground.html"},{"title":"","text":"Divider","link":"/design-system/src/components/divider/playground.html"},{"title":"","text":".dads-emergency-banner { display: grid; row-gap: calc(8 / 16 * 1rem); border: 6px solid var(--color-semantic-warning-orange-1); background-color: var(--color-neutral-white); padding: calc(14 / 16 * 1rem) calc(10 / 16 * 1rem); color: var(--color-neutral-solid-gray-800); font-weight: normal; font-size: calc(16 / 16 * 1rem); line-height: 1.7; font-family: var(--font-family-sans); letter-spacing: 0.02em; } @media (min-width: 48rem) { .dads-emergency-banner { row-gap: calc(16 / 16 * 1rem); padding: calc(26 / 16 * 1rem); } } .dads-emergency-banner__header { display: grid; row-gap: calc(8 / 16 * 1rem); } .dads-emergency-banner__heading { margin-top: 0; margin-bottom: 0; font-weight: bold; font-size: calc(20 / 16 * 1rem); line-height: 1.5; text-spacing-trim: trim-start; } @media (min-width: 48rem) { .dads-emergency-banner__heading { font-size: calc(24 / 16 * 1rem); } } .dads-emergency-banner__timestamp { display: block; } .dads-emergency-banner__body { display: grid; row-gap: calc(8 / 16 * 1rem); } .dads-emergency-banner__body > * { margin-top: 0; margin-bottom: 0; } @media (min-width: 48rem) { .dads-emergency-banner__body { row-gap: calc(16 / 16 * 1rem); font-size: var(--font-size-20); line-height: var(--line-height-150); } } .dads-emergency-banner__action { padding-top: calc(8 / 16 * 1rem); } @media (min-width: 48rem) { .dads-emergency-banner__action { display: flex; justify-content: center; padding-top: calc(12 / 16 * 1rem); padding-bottom: calc(4 / 16 * 1rem); } } .dads-emergency-banner__button, .dads-emergency-banner__button:any-link { position: relative; display: block; box-sizing: border-box; width: 100%; border: 2px solid transparent; border-radius: calc(12 / 16 * 1rem); background-color: var(--color-semantic-error-1); padding: calc(18 / 16 * 1rem); color: var(--color-neutral-white); text-align: center; font-weight: bold; font-size: calc(16 / 16 * 1rem); line-height: 1; letter-spacing: 0.02em; text-decoration: none; } @media (min-width: 48rem) { .dads-emergency-banner__button, .dads-emergency-banner__button:any-link { width: fit-content; min-width: 50%; border-width: 4px; border-radius: calc(16 / 16 * 1rem); padding: calc(20 / 16 * 1rem); } } @media (hover: hover) { .dads-emergency-banner__button:hover { background-color: var(--color-semantic-error-2); text-decoration: underline; text-decoration-thickness: calc(1 / 16 * 1rem); text-underline-offset: calc(3 / 16 * 1rem); } } .dads-emergency-banner__button:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-emergency-banner__button::after { position: absolute; inset: 0; border: 2px solid var(--color-neutral-white); border-radius: calc(10 / 16 * 1rem); content: \"\"; } @media (min-width: 48rem) { .dads-emergency-banner__button::after { border-width: 4px; border-radius: calc(12 / 16 * 1rem); } } @media (forced-colors: active) { .dads-emergency-banner__button::after { inset: calc(4 / 16 * 1rem); border-width: 2px; border-radius: calc(8 / 16 * 1rem); } } .dads-emergency-banner__button-icon { display: inline-block; fill: currentcolor; vertical-align: -0.15em; } .dads-emergency-banner__button-icon::before { content: \" \"; } .dads-emergency-banner__button-icon-glyph { display: block; width: calc(16 / 16 * 1rem); height: calc(16 / 16 * 1rem); }","link":"/design-system/src/components/emergency-banner/emergency-banner.css"},{"title":"","text":"Emergency Banner 【緊急】〇〇地区に避難準備情報が発令されました 2024年1月1日 06:00更新 1時23分に○○地区に対して避難準備情報が発令されました。お年寄りの方等避難に時間がかかる方は、直ちに指定避難所へ避難してください。 指定避難所を確認する","link":"/design-system/src/components/emergency-banner/playground.html"},{"title":"","text":"import path from \"node:path\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt(\"playground\", path.join(dirname, \"playground.html\"));","link":"/design-system/src/components/emergency-banner/emergency-banner.test.js"},{"title":"","text":".dads-file-upload { display: block; color: var(--color-neutral-solid-gray-800); font-weight: normal; font-size: calc(16 / 16 * 1rem); line-height: 1.7; font-family: var(--font-family-sans); letter-spacing: 0.02em; overflow-wrap: anywhere; } .dads-form-control-label .dads-file-upload { margin-top: calc(8 / 16 * 1rem); } .dads-file-upload__input:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); border-radius: calc(4 / 16 * 1rem); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-file-upload:defined .dads-file-upload__input { display: none; } .dads-file-upload:not(:defined) .dads-file-upload__drop-area, .dads-file-upload:not(:defined) .dads-file-upload__empty-message, .dads-file-upload:not(:defined) .dads-file-upload__remove-button { display: none; } .dads-file-upload__drop-area { border: 1px solid var(--color-neutral-solid-gray-536); border-radius: calc(8 / 16 * 1rem); background-color: var(--color-neutral-solid-gray-50); padding: calc(32 / 16 * 1rem); } .dads-file-upload[data-has-error=\"true\"] .dads-file-upload__drop-area { border-color: var(--color-semantic-error-1); } .dads-file-upload__drop-area[data-dragover=\"true\"] { outline: 4px solid var(--color-semantic-success-1); outline-offset: -4px; background-color: var(--color-primitive-green-50); } .dads-file-upload__button-area { display: flex; flex-wrap: wrap; align-items: center; gap: calc(8 / 16 * 1rem) calc(16 / 16 * 1rem); } .dads-file-upload__button-area .dads-button { flex-shrink: 0; } .dads-file-upload__drop-area[data-dragover=\"true\"] .dads-button, .dads-button[data-dragover=\"true\"] { background-color: var(--button-outline-active-bg-color); color: var(--button-active-color); text-decoration: underline; } .dads-file-upload[data-has-error=\"true\"] .dads-button[data-type=\"outline\"] { border-color: var(--color-semantic-error-1); } .dads-file-upload__button-area p { margin: 0; width: 0; flex-grow: 1; min-width: 12em; } .dads-file-upload__select-summary { margin: calc(8 / 16 * 1rem) 0 0; } .dads-file-upload__select-summary:empty { margin-top: 0; } .dads-file-upload__error-messages { margin: calc(8 / 16 * 1rem) 0 0; padding: 0; list-style-type: none; } .dads-file-upload__error-messages:empty { margin-top: 0; } .dads-file-upload__error-messages > li { color: var(--color-semantic-error-1); } .dads-file-upload__drop-area .dads-file-upload__error-messages > li { color: var(--color-semantic-error-2); } .dads-file-upload__expand-drop-area { margin: calc(48 / 16 * 1rem) 0 calc(-16 / 16 * 1rem) calc(-4 / 16 * 1rem); } .dads-file-upload__empty-message { margin: calc(16 / 16 * 1rem) 0 0; } .dads-file-upload__file-list { margin: calc(16 / 16 * 1rem) 0 0; padding: 0; list-style-type: none; counter-reset: file-item; } .dads-file-upload__file-item { display: flex; align-items: baseline; counter-increment: file-item; } .dads-file-upload__remove-button { order: -1; } .dads-file-upload__file-item + .dads-file-upload__file-item { margin-top: calc(4 / 16 * 1rem); } .dads-file-upload__remove-button.dads-button[data-size=\"xs\"] { flex-shrink: 0; min-width: calc(48 / 16 * 1rem); min-height: calc(30 / 16 * 1rem); font-size: calc(16 / 16 * 1rem); } .dads-file-upload[data-multiple=\"false\"] .dads-file-upload__file-marker { display: flex; flex-shrink: 0; align-self: start; justify-content: center; align-items: center; width: calc(24 / 16 * 1rem); height: calc(30 / 16 * 1rem); } .dads-file-upload[data-multiple=\"false\"] .dads-file-upload__file-marker::before { width: calc(6 / 16 * 1rem); height: calc(6 / 16 * 1rem); border-radius: 50%; background-color: currentcolor; content: \"\"; } @media (forced-colors: active) { .dads-file-upload[data-multiple=\"false\"] .dads-file-upload__file-marker::before { background-color: CanvasText; } } .dads-file-upload[data-multiple=\"true\"] .dads-file-upload__file-marker { width: calc(32 / 16 * 1rem); } .dads-file-upload[data-multiple=\"true\"] .dads-file-upload__file-marker::before { content: counter(file-item) \".\"; } .dads-file-upload__file-info { flex: 1; min-width: 0; } .dads-file-upload__file-item[data-error=\"true\"] .dads-file-upload__file-info { border-left: 4px solid var(--color-semantic-error-1); padding-left: calc(8 / 16 * 1rem); color: var(--color-semantic-error-1); } .dads-file-upload__file-info > p { margin: 0; } .dads-file-upload__file-name { margin-right: calc(16 / 16 * 1rem); font-weight: bold; } .dads-file-upload__file-meta { color: var(--color-neutral-solid-gray-600); } .dads-file-upload__file-item[data-error=\"true\"] .dads-file-upload__file-meta { color: inherit; } .dads-file-upload__file-item input[type=\"file\"] { display: none; } .dads-file-upload__viewport-overlay { position: fixed; inset: 0; z-index: 9999; border: 4px solid var(--color-semantic-success-1); background-color: var(--color-primitive-green-50); } .dads-file-upload__viewport-overlay-message { display: flex; place-content: center; flex-wrap: wrap; box-sizing: border-box; width: 100%; height: 100%; padding: calc(32 / 16 * 1rem - 4px); /* @link https://utopia.fyi/type/calculator/?c=320,18,1.2,1920,48,1.25,0,0,&s=0.75|0.5|0.25,1.5|2|3|4|6,s-l&g=s,l,xl,12 */ font-size: clamp( calc(18 / 16 * 1rem), 0.75rem + 1.875vw, calc(48 / 16 * 1rem) ); font-weight: bold; pointer-events: none; } .dads-file-upload__viewport-overlay-message span { display: inline-block; }","link":"/design-system/src/components/file-upload/file-upload.css"},{"title":"","text":"File Upload 参照する画像・ドキュメント ※任意 対応ファイル：PNG/JPEG/GIF形式の画像、Excel/Word/PowerPoint/PDF形式のドキュメント 5ファイルまで選択可能。1ファイルあたり5MB（5,242,880バイト）まで、合計10MB（10,485,760バイト）まで ファイルを選択 または、このエリア内にドラッグ＆ドロップ ドラッグ＆ドロップの範囲をこのブラウザウィンドウ全体に広げる ファイルが選択されていません このエリア内にファイルをドラッグ＆ドロップ （バイト） 解除","link":"/design-system/src/components/file-upload/playground.html"},{"title":"","text":"let activeExpandedComponent = null; export class FileUpload extends HTMLElement { /** * @typedef {Object} FileInfo * @property {string} id * @property {string} name * @property {number} size * @property {boolean} isExisting * @property {HTMLElement} element * @property {File} [file] * @property {string[]} [errors] */ /** @type {FileInfo[]} */ files = []; /** @type {string[]} */ errors = []; #timers = {}; #dragCounter = 0; #viewportOverlay = null; #abort = null; static get defaultMessages() { return { error: { maxFiles: \"選択できるファイル数が上限を超過しています。\", maxTotalSize: \"選択できるファイルサイズの合計が上限を超過しています。\", invalidType: \"許可されていないファイル形式です。\", maxFileSize: \"ファイルサイズが上限を超過しています。\", hasFileErrors: \"選択したファイルにエラーがあります。該当ファイルをチェックしてください。\", }, announce: { dropAvailable: \"ここにドロップできます。\", dropUnavailable: \"ドロップエリア外。\", }, label: { selectedFiles: \"選択中：{count}個、{sizeFormatted}（{sizeBytes}バイト）\", }, }; } connectedCallback() { this.#abort = new AbortController(); this.#viewportOverlay = this.querySelector(\"[data-js-viewport-overlay]\"); if (this.#viewportOverlay) { document.body.appendChild(this.#viewportOverlay); } this.#loadExistingFiles(); this.#setupEventListeners(); this.#updateUI(); } disconnectedCallback() { this.#abort.abort(); this.#clearAllTimers(); if (this.#viewportOverlay) { this.appendChild(this.#viewportOverlay); } } addFiles(files) { const filesToAdd = this.isMultiple ? files : files.slice(0, 1); if (!this.isMultiple && this.files.length > 0) { this.files.forEach((file) => { if (file.element) { file.element.remove(); } }); this.files = []; } const newFiles = filesToAdd.map((file) => ({ id: `file-${Math.random().toString(36).slice(-8)}`, file: file, name: file.name, size: file.size, isExisting: false, errors: [], })); this.files.push(...newFiles); this.#validateFiles(); this.#updateUI(); } removeFile(fileId) { const index = this.files.findIndex((f) => f.id === fileId); if (index === -1) return; const file = this.files[index]; if (file.element) { file.element.remove(); } this.files.splice(index, 1); this.#validateFiles(); this.#updateUI(); } setExpandedDropArea(expanded) { if (this.expandDropAreaCheckbox) { this.expandDropAreaCheckbox.checked = expanded; } } #clearAllTimers() { for (const key in this.#timers) { clearTimeout(this.#timers[key]); clearInterval(this.#timers[key]); } this.#timers = {}; } #setupEventListeners() { const signal = this.#abort.signal; this.selectButton.addEventListener( \"click\", (e) => { e.preventDefault(); this.fallbackInput.click(); }, { signal }, ); this.fallbackInput.addEventListener( \"change\", (e) => { const files = Array.from(e.target.files || []); this.addFiles(files); this.fallbackInput.value = \"\"; this.selectButton.focus(); }, { signal }, ); const dropZone = this.dropArea || this.selectButton; dropZone.addEventListener( \"dragenter\", () => { this.#dragCounter++; if (this.#dragCounter === 1) { dropZone.setAttribute(\"data-dragover\", \"true\"); this.#startDropAnnounce(); } }, { signal }, ); dropZone.addEventListener( \"dragover\", (e) => { e.preventDefault(); e.dataTransfer.dropEffect = \"copy\"; }, { signal }, ); dropZone.addEventListener( \"dragleave\", () => { this.#dragCounter--; if (this.#dragCounter === 0) { dropZone.removeAttribute(\"data-dragover\"); this.#stopDropAnnounce(); this.#announceText( this.#getMessage(\"announce\", \"dropUnavailable\"), true, ); } }, { signal }, ); dropZone.addEventListener( \"drop\", (e) => { e.preventDefault(); this.#dragCounter = 0; dropZone.removeAttribute(\"data-dragover\"); this.#stopDropAnnounce(); const files = Array.from(e.dataTransfer?.files || []); this.addFiles(files); this.selectButton.focus(); }, { signal }, ); this.expandDropAreaCheckbox?.addEventListener( \"change\", (e) => { if (e.target.checked) { if (activeExpandedComponent && activeExpandedComponent !== this) { activeExpandedComponent.setExpandedDropArea(false); } activeExpandedComponent = this; } else { if (activeExpandedComponent === this) { activeExpandedComponent = null; } } }, { signal }, ); document.documentElement.addEventListener( \"dragover\", (e) => { if (this.expandDropAreaCheckbox?.checked) { e.preventDefault(); this.#showViewportOverlay(); } }, { signal }, ); this.#viewportOverlay?.addEventListener( \"dragenter\", () => { this.#dragCounter++; if (this.#dragCounter === 1) { this.#startDropAnnounce(); } }, { signal }, ); this.#viewportOverlay?.addEventListener( \"dragover\", (e) => { e.preventDefault(); e.stopPropagation(); this.#resetDragOverTimeout(); e.dataTransfer.dropEffect = \"copy\"; }, { signal }, ); this.#viewportOverlay?.addEventListener( \"dragleave\", () => { this.#dragCounter--; if (this.#dragCounter === 0) { this.#hideViewportOverlay(); this.#stopDropAnnounce(); this.#announceText( this.#getMessage(\"announce\", \"dropUnavailable\"), true, ); } }, { signal }, ); this.#viewportOverlay?.addEventListener( \"drop\", (e) => { e.preventDefault(); this.#dragCounter = 0; this.#hideViewportOverlay(); this.#stopDropAnnounce(); const files = Array.from(e.dataTransfer?.files || []); this.addFiles(files); this.selectButton.focus(); }, { signal }, ); // Remove button delegation this.addEventListener( \"click\", ({ target }) => { if (!target.closest(\"[data-js-remove-button]\")) return; const listItem = target.closest(\"li\"); const fileId = listItem?.dataset.id; const fileIndex = this.files.findIndex((f) => f.id === fileId); this.removeFile(fileId); this.#focusAfterFileRemoval(fileIndex); }, { signal }, ); } #startDropAnnounce() { this.#stopDropAnnounce(); const message = this.#getMessage(\"announce\", \"dropAvailable\"); this.#announceText(message, true); this.#timers.drop = setInterval(() => { this.#announceText(message); }, 3000); } #stopDropAnnounce() { clearInterval(this.#timers.drop); } #announceText(text, assertive = false) { const announcer = assertive ? this.announcerAssertive : this.announcer; if (!announcer || !text) return; const timerKey = `announce_${assertive ? \"assertive\" : \"polite\"}`; clearTimeout(this.#timers[timerKey]); announcer.textContent = \"\"; this.#timers[timerKey] = setTimeout(() => { announcer.textContent = text; this.#timers[timerKey] = setTimeout(() => { announcer.textContent = \"\"; }, 1000); }, 100); } #resetDragOverTimeout() { clearTimeout(this.#timers.dragover); this.#timers.dragover = setTimeout(() => { if ( this.#viewportOverlay && !this.#viewportOverlay.hasAttribute(\"hidden\") ) { this.#dragCounter = 0; this.#hideViewportOverlay(); } }, 300); } #showViewportOverlay() { this.#viewportOverlay.removeAttribute(\"hidden\"); } #hideViewportOverlay() { this.#viewportOverlay.setAttribute(\"hidden\", \"\"); } #focusAfterFileRemoval(index) { const totalCount = this.files.length; if (totalCount === 0) { this.selectButton.focus(); } else if (index < this.files.length) { const nextFile = this.files[index]; nextFile.element.querySelector(\"[data-js-remove-button]\")?.focus(); } else { const lastFile = this.files[this.files.length - 1]; lastFile.element.querySelector(\"[data-js-remove-button]\")?.focus(); } } #getMessage(category, key, variables = {}) { const datasetKey = `${category}${key.charAt(0).toUpperCase()}${key.slice(1)}`; let template = this.dataset[datasetKey]; if (!template) { template = FileUpload.defaultMessages[category]?.[key] || \"\"; } return template.replace(/\\{(\\w+)\\}/g, (match, variable) => { return variables[variable] !== undefined ? variables[variable] : match; }); } #loadExistingFiles() { const existingItems = this.fileList.querySelectorAll(\":scope > li\"); existingItems.forEach((item) => { const fileId = `file-${Math.random().toString(36).slice(-8)}`; item.dataset.id = fileId; const fileNameEl = item.querySelector('[data-slot=\"fileName\"]'); const fileSizeEl = item.querySelector('[data-slot=\"fileSizeBytes\"]'); const fileSizeText = fileSizeEl?.textContent.trim() ?? \"0\"; const removeButton = item.querySelector(\"[data-js-remove-button]\"); if (fileNameEl && removeButton) { const nameId = `${fileId}-name`; const buttonId = `${fileId}-remove`; fileNameEl.id = nameId; removeButton.id = buttonId; removeButton.setAttribute(\"aria-labelledby\", `${buttonId} ${nameId}`); } const fileInfo = { id: fileId, name: fileNameEl?.textContent.trim() ?? \"\", size: Number.parseInt(fileSizeText.replace(/,/g, \"\"), 10), isExisting: true, element: item, }; this.files.push(fileInfo); }); } #validateFiles() { this.errors = []; this.files.forEach((fileInfo) => { if (!fileInfo.isExisting) { fileInfo.errors = []; } }); const newFiles = this.files.filter((f) => !f.isExisting); const maxFiles = Number.parseInt(this.getAttribute(\"max-files\"), 10); if (!Number.isNaN(maxFiles) && this.files.length > maxFiles) { this.errors.push( this.#getMessage(\"error\", \"maxFiles\", { max: maxFiles, current: this.files.length, }), ); } const accept = this.fallbackInput.accept; const allowedExtensions = this.#parseAcceptAttribute(accept); const maxFileSize = this.#parseSize(this.getAttribute(\"max-file-size\")); const maxTotalSize = this.#parseSize(this.getAttribute(\"max-total-size\")); const totalSize = this.files.reduce((sum, fileInfo) => { return sum + (fileInfo.size || 0); }, 0); newFiles.forEach((fileInfo) => { if (allowedExtensions.length > 0) { const ext = this.#getFileExtension(fileInfo.name); const mimeType = fileInfo.file.type; if (!this.#isFileTypeAllowed(ext, mimeType, allowedExtensions)) { fileInfo.errors.push(this.#getMessage(\"error\", \"invalidType\")); } } if (maxFileSize && fileInfo.size > maxFileSize) { const { size1: maxFormatted, size2: currentFormatted } = this.#formatSizeWithDiff(maxFileSize, fileInfo.size); fileInfo.errors.push( this.#getMessage(\"error\", \"maxFileSize\", { max: maxFormatted, current: currentFormatted, }), ); } }); if (maxTotalSize && totalSize > maxTotalSize) { const { size1: maxFormatted, size2: currentFormatted } = this.#formatSizeWithDiff(maxTotalSize, totalSize); this.errors.push( this.#getMessage(\"error\", \"maxTotalSize\", { max: maxFormatted, current: currentFormatted, }), ); } const hasFileErrors = this.files.some((f) => f.errors?.length > 0); if (hasFileErrors) { this.errors.unshift(this.#getMessage(\"error\", \"hasFileErrors\")); } } #parseAcceptAttribute(accept) { if (!accept) return []; return accept.split(\",\").map((s) => s.trim().toLowerCase()); } #getFileExtension(filename) { const match = filename.match(/\\.([^.]+)$/); return match ? `.${match[1].toLowerCase()}` : \"\"; } #isFileTypeAllowed(ext, mimeType, allowedExtensions) { return allowedExtensions.some((allowed) => { if (allowed.includes(\"/*\")) { const [category] = allowed.split(\"/\"); return mimeType.startsWith(`${category}/`); } if (allowed.startsWith(\".\")) { return ext === allowed; } return mimeType === allowed; }); } #parseSize(sizeStr) { if (!sizeStr) return null; const units = { b: 1, kb: 1024, mb: 1024 * 1024, gb: 1024 * 1024 * 1024, }; const match = sizeStr .toLowerCase() .match(/^(\\d+(?:\\.\\d+)?)\\s*(b|kb|mb|gb)?$/); if (!match) return null; const value = parseFloat(match[1]); const unit = match[2] || \"b\"; return value * units[unit]; } #formatSize(bytes, precision = null) { if (bytes === 0) return \"0B\"; const units = [\"B\", \"KB\", \"MB\", \"GB\"]; const k = 1024; const i = Math.floor(Math.log(bytes) / Math.log(k)); const decimals = precision !== null ? precision : i > 0 ? 1 : 0; return `${parseFloat((bytes / k ** i).toFixed(decimals))}${units[i]}`; } #formatSizeWithDiff(bytes1, bytes2) { if (bytes1 === 0) return { size1: \"0B\", size2: this.#formatSize(bytes2) }; if (bytes2 === 0) return { size1: this.#formatSize(bytes1), size2: \"0B\" }; const units = [\"B\", \"KB\", \"MB\", \"GB\"]; const k = 1024; const i1 = Math.floor(Math.log(bytes1) / Math.log(k)); const i2 = Math.floor(Math.log(bytes2) / Math.log(k)); const i = Math.max(i1, i2); const value1 = bytes1 / k ** i; const value2 = bytes2 / k ** i; if (i === 0 || value1 === value2) { const precision = i > 0 ? 1 : 0; return { size1: this.#formatSize(bytes1, precision), size2: this.#formatSize(bytes2, precision), }; } let precision = 1; while (true) { const formatted1 = value1.toFixed(precision); const formatted2 = value2.toFixed(precision); if (formatted1 !== formatted2) { return { size1: `${parseFloat(formatted1)}${units[i]}`, size2: `${parseFloat(formatted2)}${units[i]}`, }; } precision++; } } #updateUI() { this.#updateSelectedFilesMessage(); this.#updateErrorMessages(); this.#updateFileList(); if (this.files.length === 0) { this.emptyMessage.removeAttribute(\"hidden\"); this.fileList.setAttribute(\"hidden\", \"\"); } else { this.emptyMessage.setAttribute(\"hidden\", \"\"); this.fileList.removeAttribute(\"hidden\"); } this.setAttribute(\"data-multiple\", this.isMultiple ? \"true\" : \"false\"); if (this.errors.length > 0) { this.setAttribute(\"data-has-error\", \"true\"); } else { this.removeAttribute(\"data-has-error\"); } } #updateSelectedFilesMessage() { if (this.files.length === 0) { this.selectSummary.textContent = \"\"; return; } const currentFileCount = this.files.length; const currentTotalSize = this.files.reduce((sum, f) => sum + f.size, 0); const sizeFormatted = this.#formatSize(currentTotalSize); const sizeBytes = currentTotalSize.toLocaleString(); const message = this.#getMessage(\"label\", \"selectedFiles\", { count: currentFileCount, sizeFormatted: sizeFormatted, sizeBytes: sizeBytes, }); this.selectSummary.textContent = message; } #updateErrorMessages() { this.errorMessagesContainer.innerHTML = \"\"; for (const errorText of this.errors) { const li = document.createElement(\"li\"); li.textContent = `＊${errorText}`; this.errorMessagesContainer.appendChild(li); } } #updateFileList() { const newFiles = this.files.filter((f) => !f.element); newFiles.forEach((fileInfo) => { const li = this.#createFileItem(fileInfo); fileInfo.element = li; this.fileList.appendChild(li); }); } #createFileItem(fileInfo) { const hasErrors = fileInfo.errors && fileInfo.errors.length > 0; const clone = this.fileItemTemplate.content.cloneNode(true); const slots = { fileName: fileInfo.name, fileSize: this.#formatSize(fileInfo.size), fileSizeBytes: fileInfo.size.toLocaleString(), }; Object.entries(slots).forEach(([key, value]) => { const elements = clone.querySelectorAll(`[data-slot=\"${key}\"]`); elements.forEach((element) => { element.textContent = value; }); }); const li = clone.firstElementChild; li.dataset.id = fileInfo.id; const fileNameElement = li.querySelector('[data-slot=\"fileName\"]'); const removeButton = li.querySelector(\"[data-js-remove-button]\"); if (fileNameElement && removeButton) { const nameId = `${fileInfo.id}-name`; const removeId = `${fileInfo.id}-remove`; fileNameElement.id = nameId; removeButton.id = removeId; removeButton.setAttribute(\"aria-labelledby\", `${removeId} ${nameId}`); } if (hasErrors) { li.setAttribute(\"data-error\", \"true\"); const infoDiv = li.querySelector(\"[data-js-file-info]\"); if (infoDiv) { fileInfo.errors.forEach((errorText) => { const errorP = document.createElement(\"p\"); errorP.textContent = `＊${errorText}`; infoDiv.appendChild(errorP); }); } } const fileInput = document.createElement(\"input\"); fileInput.type = \"file\"; fileInput.name = this.fallbackInput.name; const dataTransfer = new DataTransfer(); dataTransfer.items.add(fileInfo.file); fileInput.files = dataTransfer.files; li.appendChild(fileInput); return li; } get dropArea() { return this.querySelector(\"[data-js-drop-area]\"); } get fallbackInput() { return this.querySelector(\"[data-js-input]\"); } get selectButton() { return this.querySelector(\"[data-js-select-button]\"); } get emptyMessage() { return this.querySelector(\"[data-js-empty-message]\"); } get fileList() { return this.querySelector(\"[data-js-file-list]\"); } get errorMessagesContainer() { return this.querySelector(\"[data-js-error-messages]\"); } get fileItemTemplate() { return this.querySelector(\"[data-js-template]\"); } get expandDropAreaCheckbox() { return this.querySelector(\"[data-js-expand-drop-area]\"); } get announcer() { return this.querySelector(\"[data-js-announcer]\"); } get announcerAssertive() { return this.querySelector(\"[data-js-announcer-assertive]\"); } get selectSummary() { return this.querySelector(\"[data-js-select-summary]\"); } get isMultiple() { return this.fallbackInput.hasAttribute(\"multiple\"); } } customElements.define(\"dads-file-upload\", FileUpload); /* Utility Functions */ export function parseSize(sizeStr) { if (!sizeStr) return null; const units = { b: 1, kb: 1024, mb: 1024 * 1024, gb: 1024 * 1024 * 1024, }; const match = sizeStr .toLowerCase() .match(/^(\\d+(?:\\.\\d+)?)\\s*(b|kb|mb|gb)?$/); if (!match) return null; const value = parseFloat(match[1]); const unit = match[2] || \"b\"; return value * units[unit]; } export function formatSize(bytes, precision = null) { if (bytes === 0) return \"0B\"; const units = [\"B\", \"KB\", \"MB\", \"GB\"]; const k = 1024; const i = Math.floor(Math.log(bytes) / Math.log(k)); const decimals = precision !== null ? precision : i > 0 ? 1 : 0; return `${parseFloat((bytes / k ** i).toFixed(decimals))}${units[i]}`; } export function formatSizeWithDiff(bytes1, bytes2) { if (bytes1 === 0) return { size1: \"0B\", size2: formatSize(bytes2) }; if (bytes2 === 0) return { size1: formatSize(bytes1), size2: \"0B\" }; const units = [\"B\", \"KB\", \"MB\", \"GB\"]; const k = 1024; const i1 = Math.floor(Math.log(bytes1) / Math.log(k)); const i2 = Math.floor(Math.log(bytes2) / Math.log(k)); const i = Math.max(i1, i2); const value1 = bytes1 / k ** i; const value2 = bytes2 / k ** i; if (i === 0 || value1 === value2) { const precision = i > 0 ? 1 : 0; return { size1: formatSize(bytes1, precision), size2: formatSize(bytes2, precision), }; } let precision = 1; while (true) { const formatted1 = value1.toFixed(precision); const formatted2 = value2.toFixed(precision); if (formatted1 !== formatted2) { return { size1: `${parseFloat(formatted1)}${units[i]}`, size2: `${parseFloat(formatted2)}${units[i]}`, }; } precision++; } } export function parseAcceptAttribute(accept) { if (!accept) return []; return accept.split(\",\").map((s) => s.trim().toLowerCase()); } export function getFileExtension(filename) { const match = filename.match(/\\.([^.]+)$/); return match ? `.${match[1].toLowerCase()}` : \"\"; } export function isFileTypeAllowed(ext, mimeType, allowedExtensions) { return allowedExtensions.some((allowed) => { if (allowed.includes(\"/*\")) { const [category] = allowed.split(\"/\"); return mimeType.startsWith(`${category}/`); } if (allowed.startsWith(\".\")) { return ext === allowed; } return mimeType === allowed; }); }","link":"/design-system/src/components/file-upload/file-upload.js"},{"title":"","text":"File Upload 参照する画像・ドキュメント ※任意 対応ファイル：PNG/JPEG/GIF形式の画像、Excel/Word/PowerPoint/PDF形式のドキュメント 5ファイルまで選択可能。1ファイルあたり5MB（5,242,880バイト）まで、合計10MB（10,485,760バイト）まで ファイルを選択 または、このエリア内にドラッグ＆ドロップ ドラッグ＆ドロップの範囲をこのブラウザウィンドウ全体に広げる ファイルが選択されていません 運転免許証_表面.jpg 1.8MB（1,887,436バイト） 解除 健康保険証.pdf 842KB（862,208バイト） 解除 マイナンバーカード_両面.pdf 2.3MB（2,411,724バイト） 解除 このエリア内にファイルをドラッグ＆ドロップ （バイト） 解除","link":"/design-system/src/components/file-upload/with-existing-files.html"},{"title":"","text":".dads-global-menu { margin: 0; display: flex; align-items: stretch; border-bottom: 1px solid var(--color-neutral-solid-gray-420); padding: 0; color: var(--color-neutral-solid-gray-900); list-style-type: none; font-weight: bold; font-size: calc(16 / 16 * 1rem); line-height: 1.3; font-family: var(--font-family-sans); letter-spacing: 0; } .dads-global-menu__item { display: flex; align-items: stretch; position: relative; } .dads-global-menu__item-inner, .dads-global-menu__item-inner:any-link { position: relative; display: flex; align-items: center; gap: calc(4 / 16 * 1rem); box-sizing: border-box; min-height: calc(64 / 16 * 1rem); border: 0; background-color: transparent; padding: calc(16 / 16 * 1rem) calc(20 / 16 * 1rem); color: inherit; font: inherit; text-decoration: none; cursor: pointer; } .dads-global-menu__front-icon { flex-shrink: 0; width: calc(24 / 16 * 1rem); height: calc(24 / 16 * 1rem); } .dads-global-menu__chevron { margin-top: calc(4 / 16 * 1rem); box-sizing: content-box; flex-shrink: 0; width: calc(16 / 16 * 1rem); height: calc(16 / 16 * 1rem); } @media (hover: hover) { .dads-global-menu__item-inner:hover { background-color: var(--color-neutral-solid-gray-50); } .dads-global-menu__item-inner:hover::after { position: absolute; right: 0; bottom: 0; left: 0; border-bottom: 2px solid var(--color-neutral-black); content: \"\"; } } .dads-global-menu__item-inner[aria-current] { background-color: var(--color-neutral-white); color: var(--color-primitive-blue-1000); } .dads-global-menu__item-inner[aria-current]::after { position: absolute; right: 0; bottom: 0; left: 0; border-bottom: 4px solid var(--color-primitive-blue-900); content: \"\"; } @media (hover: hover) { .dads-global-menu__item-inner[aria-current]:hover { color: var(--color-primitive-blue-900); text-decoration: underline; text-decoration-thickness: calc(1 / 16 * 1rem); text-underline-offset: calc(3 / 16 * 1rem); } } .dads-global-menu__item-inner:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); border-radius: calc(4 / 16 * 1rem); background-color: var(--color-primitive-yellow-300); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-global-menu__item-inner[aria-current]:focus-visible { background-color: var(--color-neutral-white); } .dads-global-menu__item-inner[aria-expanded=\"true\"] .dads-global-menu__chevron { transform: rotate(180deg); }","link":"/design-system/src/components/global-menu/global-menu.css"},{"title":"","text":"import path from \"node:path\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt(\"global-menu-playground\", path.join(dirname, \"playground.html\"));","link":"/design-system/src/components/global-menu/global-menu.test.js"},{"title":"","text":"Global Menu メニュー1","link":"/design-system/src/components/global-menu/playground.html"},{"title":"","text":".dads-form-control-label { margin: 0; display: flex; flex-direction: column; border: 0; padding: 0; color: var(--color-neutral-solid-gray-800); font-weight: normal; font-size: calc(16 / 16 * 1rem); line-height: 1.7; font-family: var(--font-family-sans); letter-spacing: 0.02em; } .dads-form-control-label[data-size=\"sm\"] { gap: calc(4 / 16 * 1rem); } .dads-form-control-label[data-size=\"md\"] { gap: calc(8 / 16 * 1rem); } .dads-form-control-label[data-size=\"lg\"] { gap: calc(8 / 16 * 1rem); } .dads-form-control-label__label { align-self: start; padding: 0; font-weight: bold; } .dads-form-control-label[data-size=\"sm\"] .dads-form-control-label__label { font-size: calc(16 / 16 * 1rem); } .dads-form-control-label[data-size=\"md\"] .dads-form-control-label__label { font-size: calc(17 / 16 * 1rem); } .dads-form-control-label[data-size=\"lg\"] .dads-form-control-label__label { font-size: calc(18 / 16 * 1rem); } legend.dads-form-control-label__label { margin-bottom: calc(8 / 16 * 1rem); float: none; } .dads-form-control-label__requirement { margin-left: calc(4 / 16 * 1rem); font-weight: normal; font-size: calc(16 / 16 * 1rem); } .dads-form-control-label__requirement[data-required=\"true\"] { color: var(--color-semantic-error-1); } .dads-form-control-label__requirement::before { content: \" \"; } .dads-form-control-label__status { margin-left: calc(4 / 16 * 1rem); display: inline-block; outline: 1px solid transparent; border-radius: calc(8 / 16 * 1rem); background-color: var(--color-neutral-solid-gray-536); padding: calc(8 / 16 * 1rem); color: var(--color-neutral-white); font-weight: normal; font-size: calc(16 / 16 * 1rem); line-height: 1; letter-spacing: 0.02em; } .dads-form-control-label__support-text { margin-top: 0; margin-bottom: 0; color: var(--color-neutral-solid-gray-600); } .dads-form-control-label__error-text { margin-top: 0; margin-bottom: 0; color: var(--color-semantic-error-1); line-height: 1.3; letter-spacing: 0; }","link":"/design-system/src/components/form-control-label/form-control-label.css"},{"title":"","text":"import path from \"node:path\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt(\"form-control-label-single\", path.join(dirname, \"single.html\")); resetCssVrt(\"form-control-label-multiple\", path.join(dirname, \"multiple.html\"));","link":"/design-system/src/components/form-control-label/form-control-label.test.js"},{"title":"","text":"Form Control Label 東京23区 ※必須 該当するすべての区を選択してください。 足立区 荒川区 板橋区 江戸川区 ＊エラーテキストが入ります。","link":"/design-system/src/components/form-control-label/multiple.html"},{"title":"","text":"Form Control Label ラベル ※必須 サポートテキスト ＊エラーテキストが入ります。","link":"/design-system/src/components/form-control-label/single.html"},{"title":"","text":"Hamburger Menu Button メニュー 閉じる","link":"/design-system/src/components/hamburger-menu-button/desktop-and-mobile.html"},{"title":"","text":".dads-hamburger-menu-button { display: flex; align-items: center; column-gap: calc(4 / 16 * 1rem); width: fit-content; border: 0; border-radius: calc(6 / 16 * 1rem); background: transparent; padding: calc(4 / 16 * 1rem) calc(12 / 16 * 1rem) calc(6 / 16 * 1rem) calc(12 / 16 * 1rem); color: var(--color-neutral-solid-gray-800); font-weight: normal; font-size: calc(16 / 16 * 1rem); line-height: 1; font-family: var(--font-family-sans); letter-spacing: 0.02em; touch-action: manipulation; } @media (hover: hover) { .dads-hamburger-menu-button:hover { background-color: var(--color-neutral-solid-gray-50); text-decoration: underline; text-underline-offset: calc(3 / 16 * 1rem); } } .dads-hamburger-menu-button:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); background-color: var(--color-primitive-yellow-300); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-hamburger-menu-button__icon { margin-top: calc(2 / 16 * 1rem); width: calc(24 / 16 * 1rem); height: calc(24 / 16 * 1rem); flex-shrink: 0; color: var(--color-neutral-black); } @media (forced-colors: active) { .dads-hamburger-menu-button__icon { color: currentcolor; } }","link":"/design-system/src/components/hamburger-menu-button/hamburger-menu-button.css"},{"title":"","text":"import path from \"node:path\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt( \"hamburger-menu-button-desktop-and-mobile\", path.join(dirname, \"desktop-and-mobile.html\"), ); resetCssVrt( \"hamburger-menu-button-mobile\", path.join(dirname, \"mobile-conditional.html\"), );","link":"/design-system/src/components/hamburger-menu-button/hamburger-menu-button.test.js"},{"title":"","text":".dads-hamburger-menu-icon-button { display: block; width: fit-content; border: 0; border-radius: calc(4 / 16 * 1rem); background: transparent; padding: 0; color: var(--color-neutral-black); touch-action: manipulation; } @media (hover: hover) { .dads-hamburger-menu-icon-button:hover { outline: 1px solid; background-color: var(--color-neutral-solid-gray-50); } } .dads-hamburger-menu-icon-button:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); background-color: var(--color-primitive-yellow-300); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-hamburger-menu-icon-button__icon { display: block; width: calc(44 / 16 * 1rem); height: calc(44 / 16 * 1rem); }","link":"/design-system/src/components/hamburger-menu-button/hamburger-menu-icon-button.css"},{"title":"","text":"Hamburger Menu Button","link":"/design-system/src/components/hamburger-menu-button/mobile-conditional-en.html"},{"title":"","text":"Hamburger Menu Button","link":"/design-system/src/components/hamburger-menu-button/mobile-conditional.html"},{"title":"","text":".dads-heading { color: var(--color-neutral-solid-gray-800); font-family: var(--font-family-sans); } .dads-heading[data-size=\"64\"] { --_shoulder-size: calc(28 / 16 * 1rem); --_shoulder-line-height: 1.5; --_shoulder-letter-spacing: 0.01em; font-weight: bold; font-size: calc(64 / 16 * 1rem); line-height: 1.4; letter-spacing: 0; } .dads-heading[data-size=\"57\"] { --_shoulder-size: calc(24 / 16 * 1rem); --_shoulder-line-height: 1.5; --_shoulder-letter-spacing: 0.02em; font-weight: bold; font-size: calc(57 / 16 * 1rem); line-height: 1.4; letter-spacing: 0; } .dads-heading[data-size=\"45\"] { --_shoulder-size: calc(22 / 16 * 1rem); --_shoulder-line-height: 1.5; --_shoulder-letter-spacing: 0.02em; font-weight: bold; font-size: calc(45 / 16 * 1rem); line-height: 1.4; letter-spacing: 0; } .dads-heading[data-size=\"36\"] { --_shoulder-size: calc(20 / 16 * 1rem); --_shoulder-line-height: 1.5; --_shoulder-letter-spacing: 0.02em; font-weight: bold; font-size: calc(36 / 16 * 1rem); line-height: 1.4; letter-spacing: 0.01em; } .dads-heading[data-size=\"32\"] { --_shoulder-size: calc(18 / 16 * 1rem); --_shoulder-line-height: 1.6; --_shoulder-letter-spacing: 0.02em; font-weight: bold; font-size: calc(32 / 16 * 1rem); line-height: 1.5; letter-spacing: 0.01em; } .dads-heading[data-size=\"28\"] { --_shoulder-size: calc(16 / 16 * 1rem); --_shoulder-line-height: 1.7; --_shoulder-letter-spacing: 0.02em; font-weight: bold; font-size: calc(28 / 16 * 1rem); line-height: 1.5; letter-spacing: 0.01em; } .dads-heading[data-size=\"24\"] { --_shoulder-size: calc(16 / 16 * 1rem); --_shoulder-line-height: 1.7; --_shoulder-letter-spacing: 0.02em; font-weight: bold; font-size: calc(24 / 16 * 1rem); line-height: 1.5; letter-spacing: 0.02em; } .dads-heading[data-size=\"20\"] { --_shoulder-size: calc(16 / 16 * 1rem); --_shoulder-line-height: 1.7; --_shoulder-letter-spacing: 0.02em; font-weight: bold; font-size: calc(20 / 16 * 1rem); line-height: 1.5; letter-spacing: 0.02em; } .dads-heading[data-size=\"18\"] { --_shoulder-size: calc(16 / 16 * 1rem); --_shoulder-line-height: 1.7; --_shoulder-letter-spacing: 0.02em; font-weight: bold; font-size: calc(18 / 16 * 1rem); line-height: 1.6; letter-spacing: 0.02em; } .dads-heading[data-size=\"16\"] { --_shoulder-size: calc(16 / 16 * 1rem); --_shoulder-line-height: 1.7; --_shoulder-letter-spacing: 0.02em; font-weight: bold; font-size: calc(16 / 16 * 1rem); line-height: 1.7; letter-spacing: 0.02em; } .dads-heading[data-chip] { position: relative; padding-left: calc(1em / 3 + 0.5em); } .dads-heading[data-chip]::before { position: absolute; top: 0.2em; bottom: 0.1em; left: 0; width: calc(1em / 3); background-color: var(--color-primitive-blue-900); content: \"\"; } @supports (top: 1lh) { .dads-heading[data-chip]::before { top: calc(0.5lh - 0.45em); bottom: calc(0.5lh - 0.55em); } } .dads-heading[data-chip]:has(.dads-heading__shoulder)::before { top: calc((var(--_shoulder-size) * (var(--_shoulder-line-height) - 1)) / 2); } @media (forced-colors: active) { .dads-heading[data-chip]::before { background-color: CanvasText; } } .dads-heading[data-rule] { border-bottom: solid var(--color-primitive-blue-900); } .dads-heading[data-rule=\"8\"] { border-bottom-width: calc(8 / 16 * 1rem); padding-bottom: calc(32 / 16 * 1rem); } .dads-heading[data-rule=\"6\"] { border-bottom-width: calc(6 / 16 * 1rem); padding-bottom: calc(24 / 16 * 1rem); } .dads-heading[data-rule=\"4\"] { border-bottom-width: calc(4 / 16 * 1rem); padding-bottom: calc(16 / 16 * 1rem); } .dads-heading[data-rule=\"2\"] { border-bottom-width: calc(2 / 16 * 1rem); padding-bottom: calc(8 / 16 * 1rem); } .dads-heading__shoulder { margin: 0; font-weight: bold; font-size: var(--_shoulder-size); line-height: var(--_shoulder-line-height); letter-spacing: var(--_shoulder-letter-spacing); } .dads-heading__heading { margin: 0; font: inherit; } .dads-heading__icon { margin-right: calc(0.4em - 0.25em); } .dads-heading__icon::after { content: \" \"; } .dads-heading__icon-svg { display: inline-block; width: 1.25em; height: 1.25em; vertical-align: -0.25em; }","link":"/design-system/src/components/heading/heading.css"},{"title":"","text":".story-form-page { margin: 0; padding: 0; } .story-form-page__header { border-bottom: 1px solid var(--color-neutral-solid-gray-420); padding: calc(16 / 16 * 1rem) calc(24 / 16 * 1rem); margin-bottom: calc(40 / 16 * 1rem); } .story-form-page__header-title { margin: 0; font-size: calc(20 / 16 * 1rem); font-weight: bold; } .story-form-page__container { max-width: calc(800 / 16 * 1rem); margin: 0 auto; padding: 0 calc(24 / 16 * 1rem) calc(40 / 16 * 1rem); } .story-form-page__container .dads-heading { margin-bottom: calc(32 / 16 * 1rem); } .story-form-page__field { margin-bottom: calc(32 / 16 * 1rem); } .story-form-page__actions { margin-top: calc(48 / 16 * 1rem); text-align: center; } .story-form-page__actions .dads-button { min-width: calc(200 / 16 * 1rem); }","link":"/design-system/src/components/file-upload/file-upload.stories.css"},{"title":"","text":"import path from \"node:path\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt(\"heading-playground\", path.join(dirname, \"playground.html\"));","link":"/design-system/src/components/heading/heading.test.js"},{"title":"","text":"Heading ショルダーテキスト 見出しテキスト","link":"/design-system/src/components/heading/playground.html"},{"title":"","text":".dads-input-text { display: block; color: var(--color-neutral-solid-gray-800); font-weight: normal; font-size: calc(16 / 16 * 1rem); line-height: 1.7; font-family: var(--font-family-sans); letter-spacing: 0.02em; } .dads-input-text__input { box-sizing: border-box; max-width: 100%; border: 1px solid var(--color-neutral-solid-gray-600); background-color: var(--color-neutral-white); padding: calc(12 / 16 * 1rem) calc(16 / 16 * 1rem); border-radius: calc(8 / 16 * 1rem); color: var(--color-neutral-solid-gray-900); font: inherit; line-height: 1; } .dads-input-text__input[data-size=\"sm\"] { height: 2.5rem; } .dads-input-text__input[data-size=\"md\"] { height: 3rem; } .dads-input-text__input[data-size=\"lg\"] { height: 3.5rem; } .dads-input-text__input:read-only:not(:disabled) { border-style: dashed; } .dads-input-text__input:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } @media (hover: hover) { .dads-input-text__input:not(:read-only):hover { border-color: var(--color-neutral-black); } } .dads-input-text__input:is(:user-invalid, [aria-invalid=\"true\"]) { border-color: var(--color-semantic-error-1); } @media (hover: hover) { .dads-input-text__input:is(:user-invalid, [aria-invalid=\"true\"]):hover { border-color: var(--color-primitive-red-1000); } } .dads-input-text__input:is(:disabled, [aria-disabled=\"true\"]), .dads-input-text__input:is(:disabled, [aria-disabled=\"true\"]):hover { border-color: var(--color-neutral-solid-gray-300); background-color: var(--color-neutral-solid-gray-50); color: var(--color-neutral-solid-gray-420); } @media (forced-colors: active) { .dads-input-text__input[aria-disabled=\"true\"], .dads-input-text__input[aria-disabled=\"true\"]:hover { border-color: GrayText; color: GrayText; } } .dads-input-text__error-text { margin: calc(8 / 16 * 1rem) 0 0 0; display: block; color: var(--color-semantic-error-1); }","link":"/design-system/src/components/input-text/input-text.css"},{"title":"","text":"import path from \"node:path\"; import { test, expect } from \"@playwright/test\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt(\"file-upload-playground\", path.join(dirname, \"playground.html\")); resetCssVrt( \"file-upload-with-existing-files\", path.join(dirname, \"with-existing-files.html\"), ); // ヘルパー関数: FileUploadコンポーネントをセットアップ const setupFileUpload = async (page, fileName = \"playground.html\") => { await page.goto(`file://${path.join(dirname, fileName)}`); // デフォルトでバリデーション属性を削除 await page.evaluate(() => { const fileUpload = document.querySelector(\"dads-file-upload\"); fileUpload.removeAttribute(\"max-files\"); fileUpload.removeAttribute(\"max-file-size\"); fileUpload.removeAttribute(\"max-total-size\"); fileUpload.removeAttribute(\"data-error-invalid-type\"); const input = fileUpload.querySelector(\"[data-js-input]\"); input.removeAttribute(\"accept\"); }); }; // ヘルパー関数: addFilesメソッドを使用してファイルを追加 const addMockFiles = async (page, files) => { await page.evaluate((fileInfos) => { const fileUpload = document.querySelector(\"dads-file-upload\"); const mockFiles = fileInfos.map((info) => { const file = new File([new ArrayBuffer(info.size)], info.name, { type: info.type || \"application/octet-stream\", }); return file; }); fileUpload.addFiles(mockFiles); }, files); }; // ヘルパー関数: 既存ファイルのHTMLを動的に追加 const addExistingFileHTML = async (page, files) => { await page.evaluate((fileInfos) => { const fileList = document.querySelector(\"[data-js-file-list]\"); fileList.innerHTML = \"\"; fileInfos.forEach((info) => { const li = document.createElement(\"li\"); li.innerHTML = ` ${info.name} ${info.sizeBytes} 解除 `; fileList.appendChild(li); }); }, files); }; // ヘルパー関数: コンポーネントを再初期化（既存ファイルを読み込むため） const reinitializeComponent = async (page) => { await page.evaluate(() => { const fileUpload = document.querySelector(\"dads-file-upload\"); // disconnectedCallbackを呼び出してクリーンアップ fileUpload.remove(); // 再度DOMに追加してconnectedCallbackをトリガー document .querySelector(\".dads-form-control-label > div\") .appendChild(fileUpload); }); }; // 機能テスト test.describe(\"FileUpload 機能テスト\", () => { test.describe(\"基本的な初期化とライフサイクル\", () => { test(\"適切に初期化されるべき\", async ({ page }) => { await setupFileUpload(page); const fileUpload = page.locator(\"dads-file-upload\"); await expect(fileUpload).toBeVisible(); const fileInput = page.locator(\"[data-js-input]\"); const selectButton = page.getByRole(\"button\", { name: \"ファイルを選択\" }); const emptyMessage = page.locator(\"[data-js-empty-message]\"); const fileList = page.locator(\"[data-js-file-list]\"); await expect(fileInput).toBeAttached(); await expect(selectButton).toBeVisible(); await expect(emptyMessage).toBeVisible(); await expect(emptyMessage).toHaveText(\"ファイルが選択されていません\"); await expect(fileList).not.toBeVisible(); }); test(\"multiple属性がある場合にdata-multiple属性が設定されるべき\", async ({ page, }) => { await setupFileUpload(page); const fileUpload = page.locator(\"dads-file-upload\"); await expect(fileUpload).toHaveAttribute(\"data-multiple\", \"true\"); }); }); test.describe(\"ファイル選択機能\", () => { test(\"ボタンクリックでファイル入力がトリガーされるべき\", async ({ page, }) => { await setupFileUpload(page); const selectButton = page.getByRole(\"button\", { name: \"ファイルを選択\" }); // ファイル入力のクリックイベントを監視 const clickPromise = page.evaluate(() => { return new Promise((resolve) => { const input = document.querySelector(\"[data-js-input]\"); input.addEventListener(\"click\", () => resolve(true), { once: true }); }); }); await selectButton.click(); const wasClicked = await clickPromise; expect(wasClicked).toBe(true); }); test(\"単一ファイルを選択できるべき\", async ({ page }) => { await setupFileUpload(page); await addMockFiles(page, [ { name: \"test-file.png\", size: 1024, type: \"image/png\" }, ]); const fileList = page.locator(\"[data-js-file-list]\"); const emptyMessage = page.locator(\"[data-js-empty-message]\"); const fileItems = page.locator(\"[data-js-file-list] > li\"); await expect(fileList).toBeVisible(); await expect(emptyMessage).not.toBeVisible(); await expect(fileItems).toHaveCount(1); await expect(fileItems.locator('[data-slot=\"fileName\"]')).toHaveText( \"test-file.png\", ); }); test(\"複数ファイルを選択できるべき\", async ({ page }) => { await setupFileUpload(page); await addMockFiles(page, [ { name: \"file1.png\", size: 1024, type: \"image/png\" }, { name: \"file2.jpg\", size: 2048, type: \"image/jpeg\" }, { name: \"file3.pdf\", size: 4096, type: \"application/pdf\" }, ]); const fileItems = page.locator(\"[data-js-file-list] > li\"); await expect(fileItems).toHaveCount(3); }); test(\"選択ファイル数とサイズが表示されるべき\", async ({ page }) => { await setupFileUpload(page); await addMockFiles(page, [ { name: \"file1.png\", size: 1048576, type: \"image/png\" }, // 1MB { name: \"file2.jpg\", size: 2097152, type: \"image/jpeg\" }, // 2MB ]); const selectedFilesMessage = page.locator(\"[data-js-select-summary]\"); await expect(selectedFilesMessage).toContainText(\"選択中：2個\"); await expect(selectedFilesMessage).toContainText(\"3MB\"); await expect(selectedFilesMessage).toContainText(\"3,145,728バイト\"); }); test(\"ファイル選択後にボタンにフォーカスが戻るべき\", async ({ page }) => { await setupFileUpload(page); const selectButton = page.getByRole(\"button\", { name: \"ファイルを選択\" }); // setInputFilesを使用して実際のファイル選択をシミュレート const fileInput = page.locator(\"[data-js-input]\"); await fileInput.setInputFiles({ name: \"test.png\", mimeType: \"image/png\", buffer: Buffer.from(\"fake image content\"), }); await expect(selectButton).toBeFocused(); }); }); test.describe(\"ファイル削除機能\", () => { test(\"解除ボタンでファイルを削除できるべき\", async ({ page }) => { await setupFileUpload(page); await addMockFiles(page, [ { name: \"file1.png\", size: 1024, type: \"image/png\" }, { name: \"file2.jpg\", size: 2048, type: \"image/jpeg\" }, ]); const fileItems = page.locator(\"[data-js-file-list] > li\"); await expect(fileItems).toHaveCount(2); // 最初のファイルを削除 const removeButton = fileItems .first() .getByRole(\"button\", { name: /解除/ }); await removeButton.click(); await expect(fileItems).toHaveCount(1); await expect( fileItems.first().locator('[data-slot=\"fileName\"]'), ).toHaveText(\"file2.jpg\"); }); test(\"すべてのファイルを削除すると空メッセージが表示されるべき\", async ({ page, }) => { await setupFileUpload(page); await addMockFiles(page, [ { name: \"file1.png\", size: 1024, type: \"image/png\" }, ]); const removeButton = page.getByRole(\"button\", { name: /解除/ }); await removeButton.click(); const emptyMessage = page.locator(\"[data-js-empty-message]\"); const fileList = page.locator(\"[data-js-file-list]\"); await expect(emptyMessage).toBeVisible(); await expect(fileList).not.toBeVisible(); }); test(\"ファイル削除後に次のファイルの解除ボタンにフォーカスが移動するべき\", async ({ page, }) => { await setupFileUpload(page); await addMockFiles(page, [ { name: \"file1.png\", size: 1024, type: \"image/png\" }, { name: \"file2.jpg\", size: 2048, type: \"image/jpeg\" }, { name: \"file3.pdf\", size: 4096, type: \"application/pdf\" }, ]); const fileItems = page.locator(\"[data-js-file-list] > li\"); // 2番目のファイルを削除 const secondRemoveButton = fileItems .nth(1) .getByRole(\"button\", { name: /解除/ }); await secondRemoveButton.click(); // 次のファイル（元の3番目、現在の2番目）の解除ボタンにフォーカスが移動するべき const newSecondRemoveButton = fileItems .nth(1) .getByRole(\"button\", { name: /解除/ }); await expect(newSecondRemoveButton).toBeFocused(); }); test(\"最後のファイル削除後に前のファイルの解除ボタンにフォーカスが移動するべき\", async ({ page, }) => { await setupFileUpload(page); await addMockFiles(page, [ { name: \"file1.png\", size: 1024, type: \"image/png\" }, { name: \"file2.jpg\", size: 2048, type: \"image/jpeg\" }, ]); const fileItems = page.locator(\"[data-js-file-list] > li\"); // 最後のファイルを削除 const lastRemoveButton = fileItems .last() .getByRole(\"button\", { name: /解除/ }); await lastRemoveButton.click(); // 前のファイル（現在最後）の解除ボタンにフォーカスが移動するべき const remainingRemoveButton = fileItems .first() .getByRole(\"button\", { name: /解除/ }); await expect(remainingRemoveButton).toBeFocused(); }); test(\"全ファイル削除後に選択ボタンにフォーカスが移動するべき\", async ({ page, }) => { await setupFileUpload(page); await addMockFiles(page, [ { name: \"file1.png\", size: 1024, type: \"image/png\" }, ]); const removeButton = page.getByRole(\"button\", { name: /解除/ }); await removeButton.click(); const selectButton = page.getByRole(\"button\", { name: \"ファイルを選択\" }); await expect(selectButton).toBeFocused(); }); test(\"解除ボタンのaria-labelledbyが正しく設定されるべき\", async ({ page, }) => { await setupFileUpload(page); await addMockFiles(page, [ { name: \"test-file.png\", size: 1024, type: \"image/png\" }, ]); const removeButton = page.getByRole(\"button\", { name: /解除/ }); const ariaLabelledby = await removeButton.getAttribute(\"aria-labelledby\"); // aria-labelledbyにボタンIDとファイル名IDが含まれるべき expect(ariaLabelledby).toMatch(/file-\\w+-remove/); expect(ariaLabelledby).toMatch(/file-\\w+-name/); }); }); test.describe(\"バリデーション機能\", () => { test(\"max-files超過時にエラーメッセージが表示されるべき\", async ({ page, }) => { await setupFileUpload(page); // max-files属性を設定 await page.evaluate(() => { const fileUpload = document.querySelector(\"dads-file-upload\"); fileUpload.setAttribute(\"max-files\", \"5\"); }); // 6ファイル追加 await addMockFiles(page, [ { name: \"file1.png\", size: 1024, type: \"image/png\" }, { name: \"file2.png\", size: 1024, type: \"image/png\" }, { name: \"file3.png\", size: 1024, type: \"image/png\" }, { name: \"file4.png\", size: 1024, type: \"image/png\" }, { name: \"file5.png\", size: 1024, type: \"image/png\" }, { name: \"file6.png\", size: 1024, type: \"image/png\" }, ]); const errorMessages = page.locator(\"[data-js-error-messages]\"); await expect(errorMessages).toContainText( \"＊選択できるファイル数が上限を超過しています\", ); const fileUpload = page.locator(\"dads-file-upload\"); await expect(fileUpload).toHaveAttribute(\"data-has-error\", \"true\"); }); test(\"max-total-size超過時にエラーメッセージが表示されるべき\", async ({ page, }) => { await setupFileUpload(page); // max-total-size属性を設定 await page.evaluate(() => { const fileUpload = document.querySelector(\"dads-file-upload\"); fileUpload.setAttribute(\"max-total-size\", \"10MB\"); }); // 合計12MB追加 await addMockFiles(page, [ { name: \"large1.png\", size: 6 * 1024 * 1024, type: \"image/png\" }, // 6MB { name: \"large2.png\", size: 6 * 1024 * 1024, type: \"image/png\" }, // 6MB ]); const errorMessages = page.locator(\"[data-js-error-messages]\"); await expect(errorMessages).toContainText( \"＊選択できるファイルサイズの合計が上限を超過しています\", ); }); test(\"max-file-size超過時にファイルレベルエラーが表示されるべき\", async ({ page, }) => { await setupFileUpload(page); // max-file-size属性を設定 await page.evaluate(() => { const fileUpload = document.querySelector(\"dads-file-upload\"); fileUpload.setAttribute(\"max-file-size\", \"10MB\"); }); // 11MBファイル追加 await addMockFiles(page, [ { name: \"huge-file.png\", size: 11 * 1024 * 1024, type: \"image/png\" }, ]); const fileItem = page.locator(\"[data-js-file-list] > li\"); await expect(fileItem).toHaveAttribute(\"data-error\", \"true\"); const fileInfo = fileItem.locator(\"[data-js-file-info]\"); await expect(fileInfo).toContainText( \"＊ファイルサイズが上限を超過しています\", ); // グローバルエラーも表示されるべき const errorMessages = page.locator(\"[data-js-error-messages]\"); await expect(errorMessages).toContainText( \"＊選択したファイルにエラーがあります\", ); }); test(\"accept属性（拡張子指定）で許可されていないファイル形式でエラーが表示されるべき\", async ({ page, }) => { await setupFileUpload(page); // accept属性を設定（拡張子指定） await page.evaluate(() => { const input = document.querySelector(\"[data-js-input]\"); input.setAttribute(\"accept\", \".png,.jpg,.pdf\"); }); // 許可されていない形式 await addMockFiles(page, [ { name: \"malware.exe\", size: 1024, type: \"application/x-msdownload\" }, ]); const fileItem = page.locator(\"[data-js-file-list] > li\"); await expect(fileItem).toHaveAttribute(\"data-error\", \"true\"); const fileInfo = fileItem.locator(\"[data-js-file-info]\"); await expect(fileInfo).toContainText( \"＊許可されていないファイル形式です\", ); }); test(\"エラーがない場合はdata-has-error属性がないべき\", async ({ page }) => { await setupFileUpload(page); await addMockFiles(page, [ { name: \"valid.png\", size: 1024, type: \"image/png\" }, ]); const fileUpload = page.locator(\"dads-file-upload\"); await expect(fileUpload).not.toHaveAttribute(\"data-has-error\"); }); test(\"ファイル削除後にバリデーションが再実行されるべき\", async ({ page, }) => { await setupFileUpload(page); // max-files属性を設定 await page.evaluate(() => { const fileUpload = document.querySelector(\"dads-file-upload\"); fileUpload.setAttribute(\"max-files\", \"5\"); }); // 6ファイル追加（max-files超過） await addMockFiles(page, [ { name: \"file1.png\", size: 1024, type: \"image/png\" }, { name: \"file2.png\", size: 1024, type: \"image/png\" }, { name: \"file3.png\", size: 1024, type: \"image/png\" }, { name: \"file4.png\", size: 1024, type: \"image/png\" }, { name: \"file5.png\", size: 1024, type: \"image/png\" }, { name: \"file6.png\", size: 1024, type: \"image/png\" }, ]); const errorMessages = page.locator(\"[data-js-error-messages]\"); await expect(errorMessages).toContainText( \"＊選択できるファイル数が上限を超過しています\", ); // 1ファイル削除して5ファイルに const removeButton = page .locator(\"[data-js-file-list] > li\") .first() .getByRole(\"button\", { name: /解除/ }); await removeButton.click(); // エラーが解消されるべき await expect(errorMessages).toBeEmpty(); const fileUpload = page.locator(\"dads-file-upload\"); await expect(fileUpload).not.toHaveAttribute(\"data-has-error\"); }); }); test.describe(\"既存ファイルの読み込み\", () => { test(\"HTMLに記述された既存ファイルが読み込まれるべき\", async ({ page }) => { await setupFileUpload(page); // 既存ファイルのHTMLを動的に追加 await addExistingFileHTML(page, [ { name: \"既存ファイル1.jpg\", sizeBytes: \"1,572,864\", }, { name: \"既存ファイル2.pdf\", sizeBytes: \"2,411,724\", }, ]); // コンポーネントを再初期化して既存ファイルを読み込む await reinitializeComponent(page); const fileItems = page.locator(\"[data-js-file-list] > li\"); await expect(fileItems).toHaveCount(2); const firstFileName = fileItems.first().locator('[data-slot=\"fileName\"]'); await expect(firstFileName).toHaveText(\"既存ファイル1.jpg\"); const secondFileName = fileItems.last().locator('[data-slot=\"fileName\"]'); await expect(secondFileName).toHaveText(\"既存ファイル2.pdf\"); }); test(\"既存ファイルの選択数とサイズが表示されるべき\", async ({ page }) => { await setupFileUpload(page); await addExistingFileHTML(page, [ { name: \"file1.jpg\", sizeBytes: \"1,048,576\", }, { name: \"file2.pdf\", sizeBytes: \"2,097,152\", }, ]); await reinitializeComponent(page); const selectedFilesMessage = page.locator(\"[data-js-select-summary]\"); await expect(selectedFilesMessage).toContainText(\"選択中：2個\"); }); test(\"既存ファイルを削除できるべき\", async ({ page }) => { await setupFileUpload(page); await addExistingFileHTML(page, [ { name: \"file1.jpg\", sizeBytes: \"1,048,576\", }, { name: \"file2.pdf\", sizeBytes: \"2,097,152\", }, { name: \"file3.png\", sizeBytes: \"512,000\", }, ]); await reinitializeComponent(page); const fileItems = page.locator(\"[data-js-file-list] > li\"); await expect(fileItems).toHaveCount(3); const removeButton = fileItems .first() .getByRole(\"button\", { name: /解除/ }); await removeButton.click(); await expect(fileItems).toHaveCount(2); }); test(\"既存ファイルの解除ボタンにaria-labelledbyが設定されるべき\", async ({ page, }) => { await setupFileUpload(page); await addExistingFileHTML(page, [ { name: \"test-file.jpg\", sizeBytes: \"1,048,576\", }, ]); await reinitializeComponent(page); const removeButton = page .locator(\"[data-js-file-list] > li\") .first() .getByRole(\"button\", { name: /解除/ }); const ariaLabelledby = await removeButton.getAttribute(\"aria-labelledby\"); expect(ariaLabelledby).toMatch(/file-\\w+-remove/); expect(ariaLabelledby).toMatch(/file-\\w+-name/); }); test(\"既存ファイルに新規ファイルを追加できるべき\", async ({ page }) => { await setupFileUpload(page); await addExistingFileHTML(page, [ { name: \"existing.jpg\", sizeBytes: \"1,048,576\", }, ]); await reinitializeComponent(page); await addMockFiles(page, [ { name: \"new-file.png\", size: 1024, type: \"image/png\" }, ]); const fileItems = page.locator(\"[data-js-file-list] > li\"); await expect(fileItems).toHaveCount(2); const selectedFilesMessage = page.locator(\"[data-js-select-summary]\"); await expect(selectedFilesMessage).toContainText(\"選択中：2個\"); }); test(\"既存ファイルはバリデーションエラーが付与されないべき\", async ({ page, }) => { await setupFileUpload(page); // accept属性を設定 await page.evaluate(() => { const input = document.querySelector(\"[data-js-input]\"); input.setAttribute(\"accept\", \".png\"); }); // .jpgファイルを既存ファイルとして追加（accept制限に違反するが、既存ファイルなのでエラーにならないべき） await addExistingFileHTML(page, [ { name: \"existing.jpg\", sizeBytes: \"1,048,576\", }, ]); await reinitializeComponent(page); const fileItem = page.locator(\"[data-js-file-list] > li\"); await expect(fileItem).not.toHaveAttribute(\"data-error\", \"true\"); }); }); test.describe(\"UI更新とメッセージ\", () => { test(\"ファイルサイズが適切にフォーマットされるべき\", async ({ page }) => { await setupFileUpload(page); await addMockFiles(page, [ { name: \"small.png\", size: 500, type: \"image/png\" }, // 500B { name: \"medium.png\", size: 500 * 1024, type: \"image/png\" }, // 500KB { name: \"large.png\", size: 2 * 1024 * 1024, type: \"image/png\" }, // 2MB ]); const fileItems = page.locator(\"[data-js-file-list] > li\"); // 500B await expect( fileItems.nth(0).locator('[data-slot=\"fileSize\"]'), ).toHaveText(\"500B\"); // 500KB await expect( fileItems.nth(1).locator('[data-slot=\"fileSize\"]'), ).toHaveText(\"500KB\"); // 2MB await expect( fileItems.nth(2).locator('[data-slot=\"fileSize\"]'), ).toHaveText(\"2MB\"); }); test(\"ファイルサイズのバイト数がカンマ区切りで表示されるべき\", async ({ page, }) => { await setupFileUpload(page); await addMockFiles(page, [ { name: \"file.png\", size: 1234567, type: \"image/png\" }, ]); const fileItem = page.locator(\"[data-js-file-list] > li\"); await expect(fileItem.locator('[data-slot=\"fileSizeBytes\"]')).toHaveText( \"1,234,567\", ); }); test(\"複数エラーが同時に表示されるべき\", async ({ page }) => { await setupFileUpload(page); // max-files属性とaccept属性を設定 await page.evaluate(() => { const fileUpload = document.querySelector(\"dads-file-upload\"); fileUpload.setAttribute(\"max-files\", \"5\"); const input = document.querySelector(\"[data-js-input]\"); input.setAttribute(\"accept\", \".png,.jpg,.pdf\"); }); // max-files超過 + 不正な形式 await addMockFiles(page, [ { name: \"file1.png\", size: 1024, type: \"image/png\" }, { name: \"file2.png\", size: 1024, type: \"image/png\" }, { name: \"file3.png\", size: 1024, type: \"image/png\" }, { name: \"file4.png\", size: 1024, type: \"image/png\" }, { name: \"file5.png\", size: 1024, type: \"image/png\" }, { name: \"file6.png\", size: 1024, type: \"image/png\" }, // 6ファイル目でmax-files超過 { name: \"invalid.exe\", size: 1024, type: \"application/x-msdownload\" }, // 不正な形式 ]); const errorMessages = page.locator(\"[data-js-error-messages] li\"); await expect(errorMessages).toHaveCount(2); // max-files + hasFileErrors }); }); test.describe(\"単一ファイルモード\", () => { test(\"multipleがない場合は1ファイルのみ保持されるべき\", async ({ page, }) => { await setupFileUpload(page); // multiple属性を削除 await page.evaluate(() => { const input = document.querySelector(\"[data-js-input]\"); input.removeAttribute(\"multiple\"); }); await addMockFiles(page, [ { name: \"file1.png\", size: 1024, type: \"image/png\" }, ]); let fileItems = page.locator(\"[data-js-file-list] > li\"); await expect(fileItems).toHaveCount(1); // 2つ目のファイルを追加すると、最初のファイルが置き換わるべき await addMockFiles(page, [ { name: \"file2.png\", size: 2048, type: \"image/png\" }, ]); fileItems = page.locator(\"[data-js-file-list] > li\"); await expect(fileItems).toHaveCount(1); await expect(fileItems.locator('[data-slot=\"fileName\"]')).toHaveText( \"file2.png\", ); }); test(\"data-multiple属性がfalseになるべき\", async ({ page }) => { await setupFileUpload(page); // multiple属性を削除 await page.evaluate(() => { const input = document.querySelector(\"[data-js-input]\"); input.removeAttribute(\"multiple\"); // UIを更新するためにファイルを追加 const fileUpload = document.querySelector(\"dads-file-upload\"); fileUpload.addFiles([]); }); const fileUpload = page.locator(\"dads-file-upload\"); await expect(fileUpload).toHaveAttribute(\"data-multiple\", \"false\"); }); }); }); // ユニットテスト（ユーティリティ関数） test.describe(\"ユーティリティ関数のユニットテスト\", () => { test.describe(\"parseSize\", () => { test(\"nullまたは空文字列の場合はnullを返すべき\", async ({ page }) => { await setupFileUpload(page); const results = await page.evaluate(async () => { const { parseSize } = await import(\"./file-upload.js\"); return [parseSize(null), parseSize(\"\"), parseSize(undefined)]; }); expect(results).toEqual([null, null, null]); }); test(\"バイト単位を正しくパースするべき\", async ({ page }) => { await setupFileUpload(page); const results = await page.evaluate(async () => { const { parseSize } = await import(\"./file-upload.js\"); return [ parseSize(\"100\"), parseSize(\"100b\"), parseSize(\"100B\"), parseSize(\"0\"), ]; }); expect(results).toEqual([100, 100, 100, 0]); }); test(\"KB単位を正しくパースするべき\", async ({ page }) => { await setupFileUpload(page); const results = await page.evaluate(async () => { const { parseSize } = await import(\"./file-upload.js\"); return [ parseSize(\"1kb\"), parseSize(\"1KB\"), parseSize(\"10KB\"), parseSize(\"1.5KB\"), ]; }); expect(results).toEqual([1024, 1024, 10 * 1024, 1.5 * 1024]); }); test(\"MB単位を正しくパースするべき\", async ({ page }) => { await setupFileUpload(page); const results = await page.evaluate(async () => { const { parseSize } = await import(\"./file-upload.js\"); return [ parseSize(\"1mb\"), parseSize(\"1MB\"), parseSize(\"10MB\"), parseSize(\"1.5MB\"), ]; }); expect(results).toEqual([ 1024 * 1024, 1024 * 1024, 10 * 1024 * 1024, 1.5 * 1024 * 1024, ]); }); test(\"GB単位を正しくパースするべき\", async ({ page }) => { await setupFileUpload(page); const results = await page.evaluate(async () => { const { parseSize } = await import(\"./file-upload.js\"); return [parseSize(\"1gb\"), parseSize(\"1GB\"), parseSize(\"2.5GB\")]; }); expect(results).toEqual([ 1024 * 1024 * 1024, 1024 * 1024 * 1024, 2.5 * 1024 * 1024 * 1024, ]); }); test(\"スペースを含む文字列を正しくパースするべき\", async ({ page }) => { await setupFileUpload(page); const results = await page.evaluate(async () => { const { parseSize } = await import(\"./file-upload.js\"); return [parseSize(\"10 MB\"), parseSize(\"1 kb\")]; }); expect(results).toEqual([10 * 1024 * 1024, 1024]); }); test(\"不正な文字列の場合はnullを返すべき\", async ({ page }) => { await setupFileUpload(page); const results = await page.evaluate(async () => { const { parseSize } = await import(\"./file-upload.js\"); return [ parseSize(\"abc\"), parseSize(\"10TB\"), parseSize(\"-10MB\"), parseSize(\"10 20 MB\"), ]; }); expect(results).toEqual([null, null, null, null]); }); }); test.describe(\"formatSize\", () => { test(\"0バイトを正しくフォーマットするべき\", async ({ page }) => { await setupFileUpload(page); const result = await page.evaluate(async () => { const { formatSize } = await import(\"./file-upload.js\"); return formatSize(0); }); expect(result).toBe(\"0B\"); }); test(\"バイト単位を正しくフォーマットするべき\", async ({ page }) => { await setupFileUpload(page); const results = await page.evaluate(async () => { const { formatSize } = await import(\"./file-upload.js\"); return [formatSize(1), formatSize(500), formatSize(1023)]; }); expect(results).toEqual([\"1B\", \"500B\", \"1023B\"]); }); test(\"KB単位を正しくフォーマットするべき\", async ({ page }) => { await setupFileUpload(page); const results = await page.evaluate(async () => { const { formatSize } = await import(\"./file-upload.js\"); return [formatSize(1024), formatSize(1536), formatSize(500 * 1024)]; }); expect(results).toEqual([\"1KB\", \"1.5KB\", \"500KB\"]); }); test(\"MB単位を正しくフォーマットするべき\", async ({ page }) => { await setupFileUpload(page); const results = await page.evaluate(async () => { const { formatSize } = await import(\"./file-upload.js\"); return [ formatSize(1024 * 1024), formatSize(1.5 * 1024 * 1024), formatSize(2 * 1024 * 1024), ]; }); expect(results).toEqual([\"1MB\", \"1.5MB\", \"2MB\"]); }); test(\"GB単位を正しくフォーマットするべき\", async ({ page }) => { await setupFileUpload(page); const results = await page.evaluate(async () => { const { formatSize } = await import(\"./file-upload.js\"); return [ formatSize(1024 * 1024 * 1024), formatSize(2.5 * 1024 * 1024 * 1024), ]; }); expect(results).toEqual([\"1GB\", \"2.5GB\"]); }); test(\"precisionを指定した場合に正しくフォーマットするべき\", async ({ page, }) => { await setupFileUpload(page); const results = await page.evaluate(async () => { const { formatSize } = await import(\"./file-upload.js\"); return [ formatSize(1536, 0), formatSize(1536, 1), formatSize(1536, 2), formatSize(1024 * 1024, 2), ]; }); expect(results).toEqual([\"2KB\", \"1.5KB\", \"1.5KB\", \"1MB\"]); }); }); test.describe(\"formatSizeWithDiff\", () => { test(\"bytes1が0の場合を正しく処理するべき\", async ({ page }) => { await setupFileUpload(page); const result = await page.evaluate(async () => { const { formatSizeWithDiff } = await import(\"./file-upload.js\"); return formatSizeWithDiff(0, 1024); }); expect(result.size1).toBe(\"0B\"); expect(result.size2).toBe(\"1KB\"); }); test(\"bytes2が0の場合を正しく処理するべき\", async ({ page }) => { await setupFileUpload(page); const result = await page.evaluate(async () => { const { formatSizeWithDiff } = await import(\"./file-upload.js\"); return formatSizeWithDiff(1024, 0); }); expect(result.size1).toBe(\"1KB\"); expect(result.size2).toBe(\"0B\"); }); test(\"同じ単位で異なる値を正しくフォーマットするべき\", async ({ page }) => { await setupFileUpload(page); const result = await page.evaluate(async () => { const { formatSizeWithDiff } = await import(\"./file-upload.js\"); return formatSizeWithDiff(10 * 1024 * 1024, 11 * 1024 * 1024); }); expect(result.size1).toBe(\"10MB\"); expect(result.size2).toBe(\"11MB\"); }); test(\"同じ値の場合を正しく処理するべき\", async ({ page }) => { await setupFileUpload(page); const result = await page.evaluate(async () => { const { formatSizeWithDiff } = await import(\"./file-upload.js\"); return formatSizeWithDiff(1024, 1024); }); expect(result.size1).toBe(result.size2); }); test(\"丸めると同じになる値を精度を上げて区別するべき\", async ({ page }) => { await setupFileUpload(page); // 10.0000MBと10.0001MBのように、通常の精度では両方「10MB」になってしまう値 const result = await page.evaluate(async () => { const { formatSizeWithDiff } = await import(\"./file-upload.js\"); const bytes1 = 10.0 * 1024 * 1024; // 10.0000MB const bytes2 = 10.0001 * 1024 * 1024; // 10.0001MB return formatSizeWithDiff(bytes1, bytes2); }); // 両方が「10MB」ではなく、区別できる表示になっているべき expect(result.size1).not.toBe(result.size2); }); }); test.describe(\"parseAcceptAttribute\", () => { test(\"空またはnullの場合は空配列を返すべき\", async ({ page }) => { await setupFileUpload(page); const results = await page.evaluate(async () => { const { parseAcceptAttribute } = await import(\"./file-upload.js\"); return [ parseAcceptAttribute(\"\"), parseAcceptAttribute(null), parseAcceptAttribute(undefined), ]; }); expect(results).toEqual([[], [], []]); }); test(\"単一の拡張子をパースするべき\", async ({ page }) => { await setupFileUpload(page); const results = await page.evaluate(async () => { const { parseAcceptAttribute } = await import(\"./file-upload.js\"); return [parseAcceptAttribute(\".png\"), parseAcceptAttribute(\".PNG\")]; }); expect(results).toEqual([[\".png\"], [\".png\"]]); }); test(\"複数の拡張子をパースするべき\", async ({ page }) => { await setupFileUpload(page); const result = await page.evaluate(async () => { const { parseAcceptAttribute } = await import(\"./file-upload.js\"); return parseAcceptAttribute(\".png,.jpg,.gif\"); }); expect(result).toEqual([\".png\", \".jpg\", \".gif\"]); }); test(\"スペースを含む文字列を正しくパースするべき\", async ({ page }) => { await setupFileUpload(page); const results = await page.evaluate(async () => { const { parseAcceptAttribute } = await import(\"./file-upload.js\"); return [ parseAcceptAttribute(\".png, .jpg, .gif\"), parseAcceptAttribute(\" .png , .jpg \"), ]; }); expect(results).toEqual([ [\".png\", \".jpg\", \".gif\"], [\".png\", \".jpg\"], ]); }); test(\"MIMEタイプをパースするべき\", async ({ page }) => { await setupFileUpload(page); const result = await page.evaluate(async () => { const { parseAcceptAttribute } = await import(\"./file-upload.js\"); return parseAcceptAttribute(\"image/png,image/jpeg\"); }); expect(result).toEqual([\"image/png\", \"image/jpeg\"]); }); test(\"MIMEタイプワイルドカードをパースするべき\", async ({ page }) => { await setupFileUpload(page); const results = await page.evaluate(async () => { const { parseAcceptAttribute } = await import(\"./file-upload.js\"); return [ parseAcceptAttribute(\"image/*\"), parseAcceptAttribute(\"image/*,application/*\"), ]; }); expect(results).toEqual([[\"image/*\"], [\"image/*\", \"application/*\"]]); }); }); test.describe(\"getFileExtension\", () => { test(\"通常のファイル名から拡張子を取得するべき\", async ({ page }) => { await setupFileUpload(page); const results = await page.evaluate(async () => { const { getFileExtension } = await import(\"./file-upload.js\"); return [ getFileExtension(\"file.png\"), getFileExtension(\"document.pdf\"), getFileExtension(\"image.JPEG\"), ]; }); expect(results).toEqual([\".png\", \".pdf\", \".jpeg\"]); }); test(\"複数のドットを含むファイル名から拡張子を取得するべき\", async ({ page, }) => { await setupFileUpload(page); const results = await page.evaluate(async () => { const { getFileExtension } = await import(\"./file-upload.js\"); return [ getFileExtension(\"file.name.png\"), getFileExtension(\"my.document.v2.pdf\"), ]; }); expect(results).toEqual([\".png\", \".pdf\"]); }); test(\"拡張子がないファイル名の場合は空文字列を返すべき\", async ({ page, }) => { await setupFileUpload(page); const results = await page.evaluate(async () => { const { getFileExtension } = await import(\"./file-upload.js\"); return [getFileExtension(\"filename\"), getFileExtension(\"Makefile\")]; }); expect(results).toEqual([\"\", \"\"]); }); test(\"大文字の拡張子を小文字に変換するべき\", async ({ page }) => { await setupFileUpload(page); const results = await page.evaluate(async () => { const { getFileExtension } = await import(\"./file-upload.js\"); return [getFileExtension(\"FILE.PNG\"), getFileExtension(\"Document.PDF\")]; }); expect(results).toEqual([\".png\", \".pdf\"]); }); }); test.describe(\"isFileTypeAllowed\", () => { test(\"許可された拡張子の場合はtrueを返すべき\", async ({ page }) => { await setupFileUpload(page); const results = await page.evaluate(async () => { const { isFileTypeAllowed } = await import(\"./file-upload.js\"); return [ isFileTypeAllowed(\".png\", \"image/png\", [\".png\", \".jpg\"]), isFileTypeAllowed(\".jpg\", \"image/jpeg\", [\".png\", \".jpg\"]), ]; }); expect(results).toEqual([true, true]); }); test(\"許可されていない拡張子の場合はfalseを返すべき\", async ({ page }) => { await setupFileUpload(page); const results = await page.evaluate(async () => { const { isFileTypeAllowed } = await import(\"./file-upload.js\"); return [ isFileTypeAllowed(\".exe\", \"application/x-msdownload\", [ \".png\", \".jpg\", ]), isFileTypeAllowed(\".gif\", \"image/gif\", [\".png\", \".jpg\"]), ]; }); expect(results).toEqual([false, false]); }); test(\"許可されたMIMEタイプの場合はtrueを返すべき\", async ({ page }) => { await setupFileUpload(page); const result = await page.evaluate(async () => { const { isFileTypeAllowed } = await import(\"./file-upload.js\"); return isFileTypeAllowed(\".png\", \"image/png\", [ \"image/png\", \"image/jpeg\", ]); }); expect(result).toBe(true); }); test(\"許可されていないMIMEタイプの場合はfalseを返すべき\", async ({ page, }) => { await setupFileUpload(page); const result = await page.evaluate(async () => { const { isFileTypeAllowed } = await import(\"./file-upload.js\"); return isFileTypeAllowed(\".gif\", \"image/gif\", [ \"image/png\", \"image/jpeg\", ]); }); expect(result).toBe(false); }); test(\"image/*で画像ファイルを許可するべき\", async ({ page }) => { await setupFileUpload(page); const results = await page.evaluate(async () => { const { isFileTypeAllowed } = await import(\"./file-upload.js\"); return [ isFileTypeAllowed(\".png\", \"image/png\", [\"image/*\"]), isFileTypeAllowed(\".jpg\", \"image/jpeg\", [\"image/*\"]), isFileTypeAllowed(\".gif\", \"image/gif\", [\"image/*\"]), isFileTypeAllowed(\".webp\", \"image/webp\", [\"image/*\"]), ]; }); expect(results).toEqual([true, true, true, true]); }); test(\"image/*で非画像ファイルを拒否するべき\", async ({ page }) => { await setupFileUpload(page); const results = await page.evaluate(async () => { const { isFileTypeAllowed } = await import(\"./file-upload.js\"); return [ isFileTypeAllowed(\".pdf\", \"application/pdf\", [\"image/*\"]), isFileTypeAllowed(\".txt\", \"text/plain\", [\"image/*\"]), ]; }); expect(results).toEqual([false, false]); }); test(\"空の許可リストの場合はfalseを返すべき\", async ({ page }) => { await setupFileUpload(page); const result = await page.evaluate(async () => { const { isFileTypeAllowed } = await import(\"./file-upload.js\"); return isFileTypeAllowed(\".png\", \"image/png\", []); }); expect(result).toBe(false); }); }); });","link":"/design-system/src/components/file-upload/file-upload.test.js"},{"title":"","text":"import path from \"node:path\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt(\"input-text-playground\", path.join(dirname, \"playground.html\")); resetCssVrt( \"input-text-with-form-control-label\", path.join(dirname, \"with-form-control-label.html\"), );","link":"/design-system/src/components/input-text/input-text.test.js"},{"title":"","text":"Input Text ラベル 編集不可 編集できない理由が入ります。","link":"/design-system/src/components/input-text/readonly.html"},{"title":"","text":"Input Text ラベル ※必須 サポートテキスト ＊エラーテキストが入ります。","link":"/design-system/src/components/input-text/with-form-control-label.html"},{"title":"","text":"List 短いテキスト これは少し長めのテキストサンプルです。リストアイテムの中に含まれる文章の例として使用しています。 ネストされたリスト 順序付きリストの最初の項目 二番目の項目で、これは比較的長い説明文を含んでいます。ネストされた構造の例として作成されました。 三番目 複雑な入れ子構造の例 サブリストA サブリストBで更にネスト 順序付きサブアイテム1 順序付きサブアイテム2（長めの説明付き：この項目は複数レベルの入れ子構造を示すために作成されています） サブリストC 最初 二番目の項目として、長めの文章を含む例です。順序付きリストの中での文章の長さの違いを示しています。 三番目（ネスト含む） 無順序サブリスト項目A 無順序サブリスト項目B（詳細説明付き） 無順序サブリスト項目C 再び順序付きリスト 非常に長いテキストの例：この項目は複数レベルの入れ子構造における文章の長さの違いを示すために作成されたサンプルテキストです。実際の使用場面では、このような長い説明文が含まれることもあります。 四番目","link":"/design-system/src/components/list/all-lists.html"},{"title":"","text":"export class LanguageSelector extends HTMLElement { constructor() { super(); this.subscriptions = []; } connectedCallback() { this.setupEventListeners(); } disconnectedCallback() { for (const subscription of this.subscriptions) subscription.remove(); this.subscriptions = []; } setupEventListeners() { this.subscriptions.push( subscribe(this.opener, \"click\", (e) => this.handleOpenerClick(e)), subscribe(this.opener, \"keydown\", (e) => this.handleOpenerKeydown(e)), subscribe(this.menu, \"keydown\", (e) => this.handleMenuKeydown(e)), subscribe(this.menu, \"focusout\", (e) => this.handleMenuFocusOut(e)), subscribe(document, \"click\", (e) => this.handleClickOutside(e)), subscribe(document, \"keydown\", (e) => this.handleEscape(e)), ); this.menuItems.forEach((item) => { this.subscriptions.push( subscribe(item, \"click\", () => this.handleMenuItemClick()), ); }); } handleOpenerClick(event) { event.preventDefault(); this.toggleMenu(); } handleOpenerKeydown(event) { if (!this.isOpen) return; switch (event.key) { case \"ArrowDown\": event.preventDefault(); this.focusFirstMenuItem(); break; case \"ArrowUp\": event.preventDefault(); this.focusLastMenuItem(); break; } } handleMenuKeydown(event) { if (!this.isOpen) return; switch (event.key) { case \"ArrowDown\": event.preventDefault(); this.focusNextMenuItem(); break; case \"ArrowUp\": event.preventDefault(); this.focusPreviousMenuItem(); break; case \"Home\": event.preventDefault(); this.focusFirstMenuItem(); break; case \"End\": event.preventDefault(); this.focusLastMenuItem(); break; } } handleMenuItemClick() { this.closeMenu(); this.opener.focus(); } handleClickOutside(event) { if (!this.isOpen) return; if (!this.contains(event.target)) { this.closeMenu(); } } handleMenuFocusOut(event) { if (!this.isOpen) return; if (!event.relatedTarget) return; if (!this.contains(event.relatedTarget)) { this.closeMenu(); } } handleEscape(event) { if (event.key === \"Escape\" && this.isOpen) { event.preventDefault(); this.closeMenu(); this.opener.focus(); } } toggleMenu() { if (this.isOpen) { this.closeMenu(); } else { this.openMenu(); } } openMenu() { this.popup.hidden = false; this.opener.setAttribute(\"aria-expanded\", \"true\"); } closeMenu() { this.popup.hidden = true; this.opener.setAttribute(\"aria-expanded\", \"false\"); } focusFirstMenuItem() { this.focusItem(0); } focusLastMenuItem() { this.focusItem(this.menuItems.length - 1); } focusNextMenuItem() { if (this.currentIndex >= this.menuItems.length - 1) { this.focusItem(0); } else { this.focusItem(this.currentIndex + 1); } } focusPreviousMenuItem() { if (this.currentIndex item === document.activeElement); } } function subscribe(el, ...args) { el.addEventListener(...args); return { remove: () => el.removeEventListener(...args) }; } customElements.define(\"dads-language-selector\", LanguageSelector);","link":"/design-system/src/components/language-selector/language-selector.js"},{"title":"","text":"Input Text ＊エラーテキストが入ります。","link":"/design-system/src/components/input-text/playground.html"},{"title":"","text":".dads-language-selector { display: block; width: fit-content; } .dads-language-selector__check { visibility: hidden; } [aria-current] > .dads-language-selector__check { visibility: visible; }","link":"/design-system/src/components/language-selector/language-selector.css"},{"title":"","text":".dads-list { margin-top: 0; margin-bottom: 0; padding-left: calc(32 / 16 * 1rem); list-style-type: revert; } .dads-list > .dads-list__item { --_spacing: 0; padding-top: var(--_spacing); padding-bottom: var(--_spacing); } .dads-list > .dads-list__item > :first-child { margin-top: var(--_spacing); } .dads-list > .dads-list__item > :last-child { margin-bottom: calc(-1 * var(--_spacing)); } .dads-list[data-spacing=\"4\"] > .dads-list__item { --_spacing: calc(4 / 16 * 1rem); } .dads-list[data-spacing=\"8\"] > .dads-list__item { --_spacing: calc(8 / 16 * 1rem); } .dads-list[data-spacing=\"12\"] > .dads-list__item { --_spacing: calc(12 / 16 * 1rem); }","link":"/design-system/src/components/list/list.css"},{"title":"","text":"Language Selector Language 日本語 English 简体中文 繁体中文 한국어 Español Bahasa Indonesia Tiếng Việt テスト用ボタン","link":"/design-system/src/components/language-selector/playground.html"},{"title":"","text":".sb-story { padding: calc(6 / 16 * 1rem); }","link":"/design-system/src/components/language-selector/language-selector.stories.css"},{"title":"","text":"import path from \"node:path\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt(\"playground\", path.join(dirname, \"playground.html\"));","link":"/design-system/src/components/language-selector/language-selector.test.js"},{"title":"","text":"Link リンクテキスト","link":"/design-system/src/components/link/playground.html"},{"title":"","text":".dads-link:any-link { color: var(--color-primitive-blue-1000); text-decoration: underline; text-decoration-thickness: calc(1 / 16 * 1rem); text-underline-offset: calc(3 / 16 * 1rem); } .dads-link:visited { color: var(--color-primitive-magenta-900); } @media (hover: hover) { .dads-link:hover { color: var(--color-primitive-blue-900); text-decoration-thickness: calc(3 / 16 * 1rem); } } .dads-link:active { color: var(--color-primitive-orange-800); text-decoration-thickness: calc(1 / 16 * 1rem); } .dads-link:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); border-radius: calc(4 / 16 * 1rem); background-color: var(--color-primitive-yellow-300); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-link__icon { display: inline-block; width: calc(16 / 16 * 1rem); height: calc(16 / 16 * 1rem); vertical-align: -0.15em; }","link":"/design-system/src/components/link/link.css"},{"title":"","text":"Menu List メニュー項目1 メニュー項目2 メニュー項目2-1 メニュー項目2-2 メニュー項目2-3 メニュー項目3","link":"/design-system/src/components/menu-list/has-children.html"},{"title":"","text":".dads-menu-list { position: relative; z-index: 0; margin: 0; list-style-type: none; padding-left: 0; color: var(--color-neutral-solid-gray-800); font-weight: normal; font-size: calc(16 / 16 * 1rem); line-height: 1.3; font-family: var(--font-family-sans); letter-spacing: 0; } .dads-menu-list__item, .dads-menu-list__item:any-link { display: flex; align-items: center; column-gap: calc(8 / 16 * 1rem); box-sizing: border-box; width: -webkit-fill-available; width: -moz-available; width: stretch; border: 0; background-color: transparent; padding-right: calc(16 / 16 * 1rem); padding-left: calc(16 / 16 * 1rem); color: inherit; text-align: left; font: inherit; letter-spacing: inherit; text-decoration: none; text-decoration-thickness: calc(1 / 16 * 1rem); } .dads-menu-list__item[data-size=\"regular\"] { min-height: calc(44 / 16 * 1rem); padding-top: calc(10 / 16 * 1rem); padding-bottom: calc(10 / 16 * 1rem); line-height: 1.3; } .dads-menu-list__item[data-size=\"small\"] { min-height: calc(36 / 16 * 1rem); padding-top: calc(6 / 16 * 1rem); padding-bottom: calc(6 / 16 * 1rem); line-height: 1.2; } .dads-menu-list__item[data-type=\"standard\"] { margin-left: calc(1rem * var(--menu-list-indentation, 0)); } .dads-menu-list__item[data-type=\"standard\"][data-size=\"regular\"] { border-radius: calc(8 / 16 * 1rem); } .dads-menu-list__item[data-type=\"standard\"][data-size=\"small\"] { border-radius: calc(4 / 16 * 1rem); } .dads-menu-list__item[data-type=\"box\"] { border-radius: 0; } .dads-menu-list__item[data-type=\"box\"] { padding-left: calc(16 / 16 * 1rem + 1rem * var(--menu-list-indentation, 0)); } .dads-menu-list__item[data-current] { background-color: var(--color-primitive-blue-100); color: var(--color-primitive-blue-1000); font-weight: bold; } .dads-menu-list__item:has(+ * [data-current]) { background-color: var(--color-primitive-blue-50); color: var(--color-primitive-blue-1000); } @media (hover: hover) { .dads-menu-list__item:hover { background-color: var(--color-neutral-solid-gray-50); text-decoration: underline; text-underline-offset: calc(3 / 16 * 1rem); } .dads-menu-list__item[data-current]:hover, .dads-menu-list__item:has(+ * [data-current]):hover { background-color: var(--color-primitive-blue-50); color: var(--color-primitive-blue-900); } } .dads-menu-list__item:focus-visible { position: relative; z-index: 1; background-color: var(--color-primitive-yellow-300); } .dads-menu-list__item[data-type=\"standard\"]:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-menu-list__item[data-type=\"box\"]:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(-4 / 16 * 1rem); box-shadow: inset 0 0 0 calc(6 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-menu-list__item[data-current]:focus-visible { background-color: var(--color-primitive-blue-100); } .dads-menu-list__item:has(+ * [data-current]):focus-visible { background-color: var(--color-primitive-blue-50); } .dads-menu-list__front-icon { flex-shrink: 0; } .dads-menu-list__tail-icon { display: inline-block; vertical-align: -0.15em; } .dads-menu-list__end-icon { margin-top: calc(2 / 16 * 1rem); margin-right: calc(-4 / 16 * 1rem); margin-left: auto; flex-shrink: 0; } .dads-menu-list__item[data-expanded] .dads-menu-list__end-icon { transform: rotate(180deg); }","link":"/design-system/src/components/menu-list/menu-list.css"},{"title":"","text":"Menu List メニュー項目","link":"/design-system/src/components/menu-list/playground.html"},{"title":"","text":".dads-menu-list-box { position: relative; display: block; width: fit-content; color: var(--color-neutral-solid-gray-900); font-weight: normal; font-size: calc(16 / 16 * 1rem); line-height: 1.2; font-family: var(--font-family-sans); letter-spacing: 0.02em; } .dads-menu-list-box__opener { display: flex; align-items: center; box-sizing: border-box; border-radius: calc(8 / 16 * 1rem); border: 0; background: transparent; padding-top: calc(4 / 16 * 1rem); padding-bottom: calc(4 / 16 * 1rem); font: inherit; letter-spacing: inherit; } .dads-menu-list-box__opener[data-size=\"sm\"] { min-height: calc(36 / 16 * 1rem); padding-right: calc(4 / 16 * 1rem); padding-left: calc(4 / 16 * 1rem); column-gap: calc(4 / 16 * 1rem); } .dads-menu-list-box__opener[data-size=\"md\"] { min-height: calc(44 / 16 * 1rem); padding-right: calc(16 / 16 * 1rem); padding-left: calc(16 / 16 * 1rem); column-gap: calc(8 / 16 * 1rem); } .dads-menu-list-box__opener[data-style=\"outlined\"] { border: 1px solid var(--color-neutral-solid-gray-420); background-color: transparent; } .dads-menu-list-box__opener[data-style=\"filled\"] { background-color: var(--color-neutral-solid-gray-50); } .dads-menu-list-box__opener[data-text-weight=\"bold\"] { font-weight: bold; } @media (hover: hover) { .dads-menu-list-box__opener:hover { background-color: var(--color-neutral-solid-gray-50); text-decoration: underline; text-underline-offset: calc(3 / 16 * 1rem); } .dads-menu-list-box__opener[data-style=\"outlined\"]:hover { border-color: var(--color-neutral-black); } .dads-menu-list-box__opener[data-style=\"filled\"]:hover { background-color: var(--color-neutral-solid-gray-100); } } .dads-menu-list-box__opener:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); background-color: var(--color-primitive-yellow-300); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-menu-list-box__opener[data-style=\"filled\"]:focus-visible { background-color: var(--color-neutral-solid-gray-50); } .dads-menu-list-box__opener-icon { flex-shrink: 0; width: calc(20 / 16 * 1rem); height: calc(20 / 16 * 1rem); } .dads-menu-list-box__opener-arrow { margin-top: calc(4 / 16 * 1rem); flex-shrink: 0; width: calc(16 / 16 * 1rem); height: calc(16 / 16 * 1rem); } [aria-expanded=\"true\"] > .dads-menu-list-box__opener-arrow { transform: rotate(180deg); } .dads-menu-list-box__popup { position: absolute; top: 100%; left: 0; z-index: 1; box-sizing: border-box; width: max-content; max-height: calc((16 + 44 * 6.5) / 16 * 1rem); overflow-y: auto; border-radius: calc(8 / 16 * 1rem) 0 0 calc(8 / 16 * 1rem); border: 1px solid var(--color-neutral-solid-gray-420); background-color: var(--color-neutral-white); padding: calc(16 / 16 * 1rem) 0; box-shadow: var(--elevation-1); }","link":"/design-system/src/components/menu-list-box/menu-list-box.css"},{"title":"","text":"export class MenuListBox extends HTMLElement { constructor() { super(); this.subscriptions = []; } connectedCallback() { this.setupEventListeners(); } disconnectedCallback() { for (const subscription of this.subscriptions) subscription.remove(); this.subscriptions = []; } setupEventListeners() { this.subscriptions.push( subscribe(this.opener, \"click\", (e) => this.handleOpenerClick(e)), subscribe(this.opener, \"keydown\", (e) => this.handleOpenerKeydown(e)), subscribe(this.menu, \"keydown\", (e) => this.handleMenuKeydown(e)), subscribe(this.menu, \"focusout\", (e) => this.handleMenuFocusOut(e)), subscribe(document, \"click\", (e) => this.handleClickOutside(e)), subscribe(document, \"keydown\", (e) => this.handleEscape(e)), ); this.menuItems.forEach((item) => { this.subscriptions.push( subscribe(item, \"click\", (e) => this.handleMenuItemClick(e)), ); }); } handleOpenerClick(event) { event.preventDefault(); this.toggleMenu(); if (this.isOpen) { this.focusFirstMenuItem(); } } handleOpenerKeydown(event) { switch (event.key) { case \"ArrowDown\": event.preventDefault(); this.openMenu(); this.focusFirstMenuItem(); break; case \"ArrowUp\": event.preventDefault(); this.openMenu(); this.focusLastMenuItem(); break; } } handleMenuKeydown(event) { if (!this.isOpen) return; switch (event.key) { case \"ArrowDown\": event.preventDefault(); this.focusNextMenuItem(); break; case \"ArrowUp\": event.preventDefault(); this.focusPreviousMenuItem(); break; case \"Home\": event.preventDefault(); this.focusFirstMenuItem(); break; case \"End\": event.preventDefault(); this.focusLastMenuItem(); break; } } handleMenuItemClick(event) { const menuItem = event.currentTarget; this.selectMenuItem(menuItem); } handleClickOutside(event) { if (!this.isOpen) return; if (!this.contains(event.target)) { this.closeMenu(); } } handleMenuFocusOut(event) { if (!this.isOpen) return; if (!event.relatedTarget) return; if (!this.contains(event.relatedTarget)) { this.closeMenu(); } } handleEscape(event) { if (event.key === \"Escape\" && this.isOpen) { event.preventDefault(); this.closeMenu(); this.opener.focus(); } } toggleMenu() { if (this.isOpen) { this.closeMenu(); } else { this.openMenu(); } } openMenu() { this.popup.hidden = false; this.opener.setAttribute(\"aria-expanded\", \"true\"); } closeMenu() { this.popup.hidden = true; this.opener.setAttribute(\"aria-expanded\", \"false\"); } focusFirstMenuItem() { this.focusItem(0); } focusLastMenuItem() { this.focusItem(this.menuItems.length - 1); } focusNextMenuItem() { if (this.currentIndex >= this.menuItems.length - 1) { this.focusItem(0); } else { this.focusItem(this.currentIndex + 1); } } focusPreviousMenuItem() { if (this.currentIndex = 0 && index < menuItems.length) { menuItems.forEach((item) => { item.setAttribute(\"tabindex\", \"-1\"); }); menuItems[index].setAttribute(\"tabindex\", \"0\"); menuItems[index].focus(); } } selectMenuItem(menuItem) { const selectedText = menuItem.textContent.trim(); this.dispatchEvent( new CustomEvent(\"menuitemselect\", { bubbles: true, detail: { selectedItem: menuItem, selectedValue: selectedText, selectedIndex: this.menuItems.indexOf(menuItem), }, }), ); this.closeMenu(); this.opener.focus(); } get opener() { return this.querySelector(\".dads-menu-list-box__opener\"); } get popup() { return this.querySelector(\".dads-menu-list-box__popup\"); } get menu() { return this.querySelector('[role=\"menu\"]'); } get menuItems() { return Array.from(this.querySelectorAll('[role=\"menuitem\"]')); } get isOpen() { return this.opener.getAttribute(\"aria-expanded\") === \"true\"; } get currentIndex() { return this.menuItems.findIndex((item) => item === document.activeElement); } } function subscribe(el, ...args) { el.addEventListener(...args); return { remove: () => el.removeEventListener(...args) }; } customElements.define(\"dads-menu-list-box\", MenuListBox);","link":"/design-system/src/components/menu-list-box/menu-list-box.js"},{"title":"","text":".sb-story { padding: calc(6 / 16 * 1rem); }","link":"/design-system/src/components/menu-list-box/menu-list-box.stories.css"},{"title":"","text":"import path from \"node:path\"; import { test, expect } from \"@playwright/test\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt(\"menu-list-box\", path.join(dirname, \"playground.html\")); // メニューリストボックスをセットアップするヘルパー関数 const setupMenuListBox = async (page) => { await page.goto(`file://${path.join(dirname, \"./playground.html\")}`); return page.locator(\"dads-menu-list-box\"); }; test.describe(\"メニューリストボックス機能テスト\", () => { test.describe(\"メニューの開閉動作\", () => { test(\"クリックでメニューを開閉するべき\", async ({ page }) => { const menuListBox = await setupMenuListBox(page); const opener = menuListBox.locator(\".dads-menu-list-box__opener\"); const popup = menuListBox.locator(\".dads-menu-list-box__popup\"); // 初期状態ではメニューが閉じている await expect(opener).toHaveAttribute(\"aria-expanded\", \"false\"); await expect(popup).toBeHidden(); // クリックでメニューを開く await opener.click(); await expect(opener).toHaveAttribute(\"aria-expanded\", \"true\"); await expect(popup).toBeVisible(); // 再度クリックでメニューを閉じる await opener.click(); await expect(opener).toHaveAttribute(\"aria-expanded\", \"false\"); await expect(popup).toBeHidden(); }); test(\"外部クリックでメニューを閉じるべき\", async ({ page }) => { const menuListBox = await setupMenuListBox(page); const opener = menuListBox.locator(\".dads-menu-list-box__opener\"); const popup = menuListBox.locator(\".dads-menu-list-box__popup\"); // メニューを開く await opener.click(); await expect(popup).toBeVisible(); // 外部をクリック await page.locator(\"body\").click({ force: true }); await expect(popup).toBeHidden(); await expect(opener).toHaveAttribute(\"aria-expanded\", \"false\"); }); test(\"Escapeキーでメニューを閉じるべき\", async ({ page }) => { const menuListBox = await setupMenuListBox(page); const opener = menuListBox.locator(\".dads-menu-list-box__opener\"); const popup = menuListBox.locator(\".dads-menu-list-box__popup\"); // メニューを開く await opener.click(); await expect(popup).toBeVisible(); // Escapeキーを押す await page.keyboard.press(\"Escape\"); await expect(popup).toBeHidden(); await expect(opener).toHaveAttribute(\"aria-expanded\", \"false\"); await expect(opener).toBeFocused(); }); }); test.describe(\"キーボードナビゲーション - オープナー\", () => { test(\"下矢印キーでメニューを開いて最初の項目にフォーカスするべき\", async ({ page, }) => { const menuListBox = await setupMenuListBox(page); const opener = menuListBox.locator(\".dads-menu-list-box__opener\"); const popup = menuListBox.locator(\".dads-menu-list-box__popup\"); const firstMenuItem = menuListBox.locator('[role=\"menuitem\"]').first(); await opener.focus(); await page.keyboard.press(\"ArrowDown\"); await expect(popup).toBeVisible(); await expect(opener).toHaveAttribute(\"aria-expanded\", \"true\"); await expect(firstMenuItem).toBeFocused(); await expect(firstMenuItem).toHaveAttribute(\"tabindex\", \"0\"); }); test(\"上矢印キーでメニューを開いて最後の項目にフォーカスするべき\", async ({ page, }) => { const menuListBox = await setupMenuListBox(page); const opener = menuListBox.locator(\".dads-menu-list-box__opener\"); const popup = menuListBox.locator(\".dads-menu-list-box__popup\"); const lastMenuItem = menuListBox.locator('[role=\"menuitem\"]').last(); await opener.focus(); await page.keyboard.press(\"ArrowUp\"); await expect(popup).toBeVisible(); await expect(opener).toHaveAttribute(\"aria-expanded\", \"true\"); await expect(lastMenuItem).toBeFocused(); await expect(lastMenuItem).toHaveAttribute(\"tabindex\", \"0\"); }); test(\"Enterキーでメニューを開いて最初の項目にフォーカスするべき\", async ({ page, }) => { const menuListBox = await setupMenuListBox(page); const opener = menuListBox.locator(\".dads-menu-list-box__opener\"); const popup = menuListBox.locator(\".dads-menu-list-box__popup\"); const firstMenuItem = menuListBox.locator('[role=\"menuitem\"]').first(); await opener.focus(); await page.keyboard.press(\"Enter\"); await expect(popup).toBeVisible(); await expect(opener).toHaveAttribute(\"aria-expanded\", \"true\"); await expect(firstMenuItem).toBeFocused(); }); test(\"Spaceキーでメニューを開いて最初の項目にフォーカスするべき\", async ({ page, }) => { const menuListBox = await setupMenuListBox(page); const opener = menuListBox.locator(\".dads-menu-list-box__opener\"); const popup = menuListBox.locator(\".dads-menu-list-box__popup\"); const firstMenuItem = menuListBox.locator('[role=\"menuitem\"]').first(); await opener.focus(); await page.keyboard.press(\"Space\"); await expect(popup).toBeVisible(); await expect(opener).toHaveAttribute(\"aria-expanded\", \"true\"); await expect(firstMenuItem).toBeFocused(); }); }); test.describe(\"キーボードナビゲーション - メニュー内\", () => { test(\"下矢印キーで次の項目にフォーカスするべき\", async ({ page }) => { const menuListBox = await setupMenuListBox(page); const opener = menuListBox.locator(\".dads-menu-list-box__opener\"); const menuItems = menuListBox.locator('[role=\"menuitem\"]'); const firstMenuItem = menuItems.first(); const secondMenuItem = menuItems.nth(1); // メニューを開いて最初の項目にフォーカス await opener.click(); await expect(firstMenuItem).toBeFocused(); // 下矢印で次の項目へ await page.keyboard.press(\"ArrowDown\"); await expect(secondMenuItem).toBeFocused(); await expect(secondMenuItem).toHaveAttribute(\"tabindex\", \"0\"); await expect(firstMenuItem).toHaveAttribute(\"tabindex\", \"-1\"); }); test(\"上矢印キーで前の項目にフォーカスするべき\", async ({ page }) => { const menuListBox = await setupMenuListBox(page); const opener = menuListBox.locator(\".dads-menu-list-box__opener\"); const menuItems = menuListBox.locator('[role=\"menuitem\"]'); const firstMenuItem = menuItems.first(); const secondMenuItem = menuItems.nth(1); // メニューを開いて最初の項目にフォーカス await opener.click(); await page.keyboard.press(\"ArrowDown\"); // 2番目の項目へ await expect(secondMenuItem).toBeFocused(); // 上矢印で前の項目へ await page.keyboard.press(\"ArrowUp\"); await expect(firstMenuItem).toBeFocused(); await expect(firstMenuItem).toHaveAttribute(\"tabindex\", \"0\"); await expect(secondMenuItem).toHaveAttribute(\"tabindex\", \"-1\"); }); test(\"矢印キーでメニュー項目を循環するべき\", async ({ page }) => { const menuListBox = await setupMenuListBox(page); const opener = menuListBox.locator(\".dads-menu-list-box__opener\"); const menuItems = menuListBox.locator('[role=\"menuitem\"]'); const firstMenuItem = menuItems.first(); const lastMenuItem = menuItems.last(); // メニューを開く await opener.click(); // 最初の項目から上矢印で最後の項目へ循環 await page.keyboard.press(\"ArrowUp\"); await expect(lastMenuItem).toBeFocused(); // 最後の項目から下矢印で最初の項目へ循環 await page.keyboard.press(\"ArrowDown\"); await expect(firstMenuItem).toBeFocused(); }); test(\"Home/Endキーで最初/最後の項目にフォーカスするべき\", async ({ page, }) => { const menuListBox = await setupMenuListBox(page); const opener = menuListBox.locator(\".dads-menu-list-box__opener\"); const menuItems = menuListBox.locator('[role=\"menuitem\"]'); const firstMenuItem = menuItems.first(); const lastMenuItem = menuItems.last(); // メニューを開く await opener.click(); // Endキーで最後の項目へ await page.keyboard.press(\"End\"); await expect(lastMenuItem).toBeFocused(); // Homeキーで最初の項目へ await page.keyboard.press(\"Home\"); await expect(firstMenuItem).toBeFocused(); }); test(\"Tabキーでメニュー外にフォーカスが移動するとメニューを閉じるべき\", async ({ page, }) => { const menuListBox = await setupMenuListBox(page); const opener = menuListBox.locator(\".dads-menu-list-box__opener\"); const popup = menuListBox.locator(\".dads-menu-list-box__popup\"); // メニューを開く await opener.click(); await expect(popup).toBeVisible(); // Tabキーを押してメニュー外にフォーカスを移動 await page.keyboard.press(\"Tab\"); await expect(popup).toBeHidden(); await expect(opener).toHaveAttribute(\"aria-expanded\", \"false\"); }); }); test.describe(\"メニューアイテムの操作\", () => { test(\"クリックでメニューアイテムを選択してメニューを閉じるべき\", async ({ page, }) => { const menuListBox = await setupMenuListBox(page); const opener = menuListBox.locator(\".dads-menu-list-box__opener\"); const popup = menuListBox.locator(\".dads-menu-list-box__popup\"); const secondMenuItem = menuListBox.locator('[role=\"menuitem\"]').nth(1); // カスタムイベントをリッスン await page.evaluate(() => { window.selectedEventData = null; document.addEventListener(\"menuitemselect\", (e) => { window.selectedEventData = e.detail; }); }); // メニューを開いてアイテムをクリック await opener.click(); await secondMenuItem.click(); // メニューが閉じられ、イベントが発火されることを確認 await expect(popup).toBeHidden(); await expect(opener).toHaveAttribute(\"aria-expanded\", \"false\"); await expect(opener).toBeFocused(); const eventData = await page.evaluate(() => window.selectedEventData); expect(eventData).toBeTruthy(); expect(eventData.selectedValue).toBe(\"メニュー項目2\"); expect(eventData.selectedIndex).toBe(1); }); test(\"Enterキーでメニューアイテムを選択するべき\", async ({ page }) => { const menuListBox = await setupMenuListBox(page); const opener = menuListBox.locator(\".dads-menu-list-box__opener\"); const popup = menuListBox.locator(\".dads-menu-list-box__popup\"); // カスタムイベントをリッスン await page.evaluate(() => { window.selectedEventData = null; document.addEventListener(\"menuitemselect\", (e) => { window.selectedEventData = e.detail; }); }); // メニューを開いて2番目の項目にフォーカスしてEnterキー await opener.click(); await page.keyboard.press(\"ArrowDown\"); await page.keyboard.press(\"Enter\"); // メニューが閉じられ、イベントが発火されることを確認 await expect(popup).toBeHidden(); await expect(opener).toHaveAttribute(\"aria-expanded\", \"false\"); await expect(opener).toBeFocused(); const eventData = await page.evaluate(() => window.selectedEventData); expect(eventData).toBeTruthy(); expect(eventData.selectedValue).toBe(\"メニュー項目2\"); }); test(\"Spaceキーでメニューアイテムを選択するべき\", async ({ page }) => { const menuListBox = await setupMenuListBox(page); const opener = menuListBox.locator(\".dads-menu-list-box__opener\"); const popup = menuListBox.locator(\".dads-menu-list-box__popup\"); // メニューを開いて最初の項目でSpaceキー await opener.click(); await page.keyboard.press(\"Space\"); // メニューが閉じられることを確認 await expect(popup).toBeHidden(); await expect(opener).toHaveAttribute(\"aria-expanded\", \"false\"); await expect(opener).toBeFocused(); }); }); });","link":"/design-system/src/components/menu-list-box/menu-list-box.test.js"},{"title":"","text":"Radio ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル ラベル","link":"/design-system/src/components/radio/all-radios.html"},{"title":"","text":"Menu ListBox メニュー メニュー項目1 メニュー項目2 メニュー項目3 メニュー項目4 メニュー項目5 メニュー項目6 メニュー項目7 テスト用ボタン","link":"/design-system/src/components/menu-list-box/playground.html"},{"title":"","text":"Radio 東京23区 ※必須 該当する区を選択してください。 足立区 荒川区 板橋区 江戸川区 ＊エラーテキストが入ります。","link":"/design-system/src/components/radio/errored.html"},{"title":"","text":"Radio ラベル","link":"/design-system/src/components/radio/playground.html"},{"title":"","text":".dads-radio { display: flex; align-items: start; gap: var(--_gap); width: fit-content; } .dads-radio:has(.dads-radio__label:not(:empty)) { padding-top: calc(8 / 16 * 1rem); padding-bottom: calc(8 / 16 * 1rem); } .dads-radio[data-size=\"sm\"] { --_gap: calc(4 / 16 * 1rem); --_radio-size: calc(24 / 16 * 1rem); --_radio-outer-size: calc(20 / 16 * 1rem); --_radio-inner-size: calc(10 / 16 * 1rem); --_radio-border-width: calc(2 / 16 * 1rem); --_label-padding-top: 1px; --_label-font-size: calc(16 / 16 * 1rem); } .dads-radio[data-size=\"md\"] { --_gap: calc(8 / 16 * 1rem); --_radio-size: calc(32 / 16 * 1rem); --_radio-outer-size: calc(26 / 16 * 1rem); --_radio-inner-size: calc(12 / 16 * 1rem); --_radio-border-width: calc(2 / 16 * 1rem); --_label-padding-top: calc(4 / 16 * 1rem); --_label-font-size: calc(16 / 16 * 1rem); } .dads-radio[data-size=\"lg\"] { --_gap: calc(12 / 16 * 1rem); --_radio-size: calc(44 / 16 * 1rem); --_radio-outer-size: calc(36 / 16 * 1rem); --_radio-inner-size: calc(16 / 16 * 1rem); --_radio-border-width: calc(3 / 16 * 1rem); --_label-padding-top: calc(10 / 16 * 1rem); --_label-font-size: calc(17 / 16 * 1rem); } .dads-radio__radio { display: flex; justify-content: center; align-items: center; flex-shrink: 0; width: var(--_radio-size); height: var(--_radio-size); border-radius: 50%; } @media (hover: hover) { .dads-radio__radio:has( :not(:focus, :disabled, [aria-disabled=\"true\"]):hover ) { background-color: var(--color-neutral-solid-gray-420); } } .dads-radio__input { --_base-color: var(--color-neutral-white); --_accent-color: var(--color-primitive-blue-900); --_accent-hover-color: var(--color-primitive-blue-1100); --_border-color: var(--color-neutral-solid-gray-600); --_border-hover-color: var(--color-neutral-black); position: relative; margin: 0; appearance: none; width: var(--_radio-outer-size); height: var(--_radio-outer-size); border-radius: 51%; background-color: var(--_base-color); border: var(--_radio-border-width) solid var(--_border-color); } .dads-radio__input:focus { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } @media (hover: hover) { .dads-radio__input:not(:disabled, [aria-disabled=\"true\"]):hover { border-color: var(--_border-hover-color); } } .dads-radio__input:checked { border-color: var(--_accent-color); } @media (hover: hover) { .dads-radio__input:checked:not(:disabled, [aria-disabled=\"true\"]):hover { border-color: var(--_accent-hover-color); } } .dads-radio__input:checked::before { position: absolute; inset: 0; margin: auto; width: var(--_radio-inner-size); height: var(--_radio-inner-size); border-radius: 51%; background-color: var(--_accent-color); content: \"\"; } @media (hover: hover) { .dads-radio__input:checked:not( :disabled, [aria-disabled=\"true\"] ):hover::before { background-color: var(--_accent-hover-color); } } .dads-radio__input[aria-invalid=\"true\"] { --_accent-color: var(--color-semantic-error-1); --_accent-hover-color: var(--color-primitive-red-1000); --_border-color: var(--color-semantic-error-1); --_border-hover-color: var(--color-primitive-red-1000); } .dads-radio__input:is(:disabled, [aria-disabled=\"true\"]) { --_base-color: var(--color-neutral-solid-gray-50); --_accent-color: var(--color-neutral-solid-gray-300); --_accent-hover-color: var(--color-neutral-solid-gray-300); --_border-color: var(--color-neutral-solid-gray-300); --_border-hover-color: var(--color-neutral-solid-gray-300); } @media (forced-colors: active) { .dads-radio__input, .dads-radio__input[aria-invalid=\"true\"] { --_accent-color: Highlight; --_accent-hover-color: Highlight; --_border-color: ButtonText; --_border-hover-color: ButtonText; } .dads-radio__input:is(:disabled, [aria-disabled=\"true\"]) { --_accent-color: GrayText; --_accent-hover-color: GrayText; --_border-color: GrayText; --_border-hover-color: GrayText; } } .dads-radio__label { padding-top: var(--_label-padding-top); color: var(--color-neutral-solid-gray-800); font-weight: normal; font-size: var(--_label-font-size); line-height: 1.3; font-family: var(--font-family-sans); letter-spacing: 0; }","link":"/design-system/src/components/radio/radio.css"},{"title":"","text":"import path from \"node:path\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt(\"menu-list-playground\", path.join(dirname, \"playground.html\")); resetCssVrt(\"menu-list-has-children\", path.join(dirname, \"has-children.html\"));","link":"/design-system/src/components/menu-list/menu-list.test.js"},{"title":"","text":"import path from \"node:path\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt(\"all-radios\", path.join(dirname, \"all-radios.html\")); resetCssVrt(\"stacked\", path.join(dirname, \"stacked.html\"));","link":"/design-system/src/components/radio/radio.test.js"},{"title":"","text":"Notification Banner 操作を完了できませんでした 閉じる 2024年7月1日 ダミーテキストは、デザインの作成時に使用される仮の文章です。 アクションボタン アクションボタン","link":"/design-system/src/components/notification-banner/error.html"},{"title":"","text":"Radio 東京23区 ※必須 該当する区を選択してください。 足立区 荒川区 板橋区 江戸川区","link":"/design-system/src/components/radio/stacked.html"},{"title":"","text":"Radio","link":"/design-system/src/components/radio/standalone.html"},{"title":"","text":".dads-notification-banner { --_base-color: var(--color-primitive-blue-900); --_color-chip-color: var(--color-primitive-blue-900); display: grid; grid-template-columns: calc(24 / 16 * 1rem) 1fr auto; grid-template-rows: minmax(calc(36 / 16 * 1rem), auto); border: solid var(--_base-color); background-color: var(--color-neutral-white); padding-top: calc(8 / 16 * 1rem); padding-right: calc(16 / 16 * 1rem); padding-bottom: calc(24 / 16 * 1rem); padding-left: calc(16 / 16 * 1rem); gap: calc(16 / 16 * 1rem); color: var(--color-neutral-solid-gray-800); font-weight: normal; font-size: calc(16 / 16 * 1rem); line-height: 1.7; font-family: var(--font-family-sans); letter-spacing: 0.02em; } .dads-notification-banner[data-style=\"standard\"] { border-radius: calc(12 / 16 * 1rem); border-width: calc(3 / 16 * 1rem); } .dads-notification-banner[data-style=\"color-chip\"] { border-width: calc(2 / 16 * 1rem); padding-left: calc(24 / 16 * 1rem); box-shadow: inset calc(8 / 16 * 1rem) 0 0 0 var(--_color-chip-color); } @media (min-width: 48rem) { .dads-notification-banner { grid-template-columns: calc(36 / 16 * 1rem) 1fr auto; padding-top: calc(24 / 16 * 1rem); padding-right: calc(24 / 16 * 1rem); padding-bottom: calc(32 / 16 * 1rem); padding-left: calc(24 / 16 * 1rem); column-gap: calc(24 / 16 * 1rem); } .dads-notification-banner[data-style=\"color-chip\"] { padding-left: calc(40 / 16 * 1rem); box-shadow: inset calc(16 / 16 * 1rem) 0 0 0 var(--_color-chip-color); } } .dads-notification-banner[data-type=\"success\"] { --_base-color: var(--color-semantic-success-2); --_color-chip-color: var(--color-semantic-success-2); } .dads-notification-banner[data-type=\"error\"] { --_base-color: var(--color-semantic-error-1); --_color-chip-color: var(--color-semantic-error-1); } .dads-notification-banner[data-type=\"warning\"] { --_base-color: var(--color-semantic-warning-yellow-2); --_color-chip-color: var(--color-primitive-yellow-400); } .dads-notification-banner[data-type=\"info-1\"] { --_base-color: var(--color-primitive-blue-900); --_color-chip-color: var(--color-primitive-blue-900); } .dads-notification-banner[data-type=\"info-2\"] { --_base-color: var(--color-neutral-solid-gray-536); --_color-chip-color: var(--color-neutral-solid-gray-536); } .dads-notification-banner__icon { justify-self: center; width: calc(28 / 16 * 1rem); height: calc(28 / 16 * 1rem); max-width: none; max-height: none; padding-top: calc(3 / 16 * 1rem); color: var(--_base-color); } @media (min-width: 48rem) { .dads-notification-banner__icon { margin-top: calc(-4 / 16 * 1rem); margin-bottom: calc(-4 / 16 * 1rem); width: calc(44 / 16 * 1rem); height: calc(44 / 16 * 1rem); padding: 0; } } @media (forced-colors: active) { .dads-notification-banner__icon { color: currentcolor; } } .dads-notification-banner__heading { grid-column: span 2; margin-top: 0; margin-bottom: 0; display: grid; grid-template-columns: inherit; gap: inherit; } .dads-notification-banner__heading-text { padding-top: calc(3 / 16 * 1rem); color: var(--color-neutral-solid-gray-900); font-weight: bold; font-size: calc(17 / 16 * 1rem); line-height: 1.7; letter-spacing: 0.02em; } @media (min-width: 48rem) { .dads-notification-banner__heading-text { padding-top: calc(2 / 16 * 1rem); font-size: calc(20 / 16 * 1rem); line-height: 1.5; } } .dads-notification-banner__close { margin-right: calc(-12 / 16 * 1rem); display: flex; align-self: start; align-items: center; column-gap: calc(4 / 16 * 1rem); background: transparent; border-radius: calc(8 / 16 * 1rem); border: 0; padding-top: calc(4 / 16 * 1rem); padding-right: calc(12 / 16 * 1rem); padding-bottom: calc(6 / 16 * 1rem); padding-left: calc(12 / 16 * 1rem); color: var(--color-neutral-solid-gray-900); font: inherit; line-height: 1; letter-spacing: inherit; } @media (hover: hover) { .dads-notification-banner__close:hover { background-color: var(--color-neutral-solid-gray-50); text-decoration: underline; text-decoration-thickness: calc(1 / 16 * 1rem); text-underline-offset: calc(3 / 16 * 1rem); } } .dads-notification-banner__close:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); background-color: var(--color-primitive-yellow-300); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-notification-banner__close-icon { margin-top: calc(2 / 16 * 1rem); width: calc(24 / 16 * 1rem); height: calc(24 / 16 * 1rem); } .dads-notification-banner__mobile-close { margin-top: calc(4 / 16 * 1rem); border: 0; border-radius: calc(4 / 16 * 1rem); background: transparent; padding: 0; color: var(--color-neutral-black); touch-action: manipulation; } @media (hover: hover) { .dads-notification-banner__mobile-close:hover { outline: 1px solid; background-color: var(--color-neutral-solid-gray-50); } } .dads-notification-banner__mobile-close:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); background-color: var(--color-primitive-yellow-300); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-notification-banner__mobile-close-icon { display: block; width: calc(44 / 16 * 1rem); height: calc(44 / 16 * 1rem); } .dads-notification-banner__body { margin-top: calc(-4 / 16 * 1rem); display: grid; row-gap: calc(8 / 16 * 1rem); grid-column: 1 / 4; color: var(--color-neutral-solid-gray-800); } @media (min-width: 48rem) { .dads-notification-banner__body { margin-top: 0; grid-column: 2 / 4; } } .dads-notification-banner__body > * { margin-top: 0; margin-bottom: 0; } .dads-notification-banner__actions { margin-bottom: calc(-8 / 16 * 1rem); display: grid; gap: calc(8 / 16 * 1rem); grid-column: 1 / 4; } @media (min-width: 48rem) { .dads-notification-banner__actions { grid-auto-flow: column; gap: calc(16 / 16 * 1rem); grid-column: 2 / 4; justify-content: end; } } .dads-notification-banner .dads-button { width: auto; } .dads-notification-banner[data-type=\"success\"] .dads-button { --button-color: var(--color-semantic-success-2); --button-hover-color: var(--color-primitive-green-1000); --button-active-color: var(--color-primitive-green-1200); --button-outline-hover-bg-color: var(--color-primitive-green-200); --button-outline-active-bg-color: var(--color-primitive-green-300); } .dads-notification-banner[data-type=\"error\"] .dads-button { --button-color: var(--color-semantic-error-1); --button-hover-color: var(--color-primitive-red-1000); --button-active-color: var(--color-primitive-red-1200); --button-outline-hover-bg-color: var(--color-primitive-red-200); --button-outline-active-bg-color: var(--color-primitive-red-300); } .dads-notification-banner[data-type=\"warning\"] .dads-button { --button-color: var(--color-semantic-warning-yellow-2); --button-hover-color: var(--color-primitive-yellow-1000); --button-active-color: var(--color-primitive-yellow-1200); --button-outline-hover-bg-color: var(--color-primitive-yellow-200); --button-outline-active-bg-color: var(--color-primitive-yellow-300); } .dads-notification-banner[data-type=\"info-1\"] .dads-button { --button-color: var(--color-primitive-blue-900); --button-hover-color: var(--color-primitive-blue-1000); --button-active-color: var(--color-primitive-blue-1200); --button-outline-hover-bg-color: var(--color-primitive-blue-200); --button-outline-active-bg-color: var(--color-primitive-blue-300); } .dads-notification-banner[data-type=\"info-2\"] .dads-button { --button-color: var(--color-neutral-solid-gray-800); --button-hover-color: var(--color-neutral-solid-gray-900); --button-active-color: var(--color-neutral-black); --button-outline-hover-bg-color: var(--color-neutral-solid-gray-200); --button-outline-active-bg-color: var(--color-neutral-solid-gray-300); }","link":"/design-system/src/components/notification-banner/notification-banner.css"},{"title":"","text":"Notification Banner 登録期間が延長されました 閉じる 2024年7月1日 ダミーテキストは、デザインの作成時に使用される仮の文章です。 アクションボタン アクションボタン","link":"/design-system/src/components/notification-banner/info-1.html"},{"title":"","text":"Notification Banner iPhoneのマイナンバーカードは利用準備中です 2024年7月1日 ダミーテキストは、デザインの作成時に使用される仮の文章です。 アクションボタン アクションボタン","link":"/design-system/src/components/notification-banner/mobile-compact.html"},{"title":"","text":"import path from \"node:path\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt(\"notification-banner-success\", path.join(dirname, \"success.html\")); resetCssVrt( \"notification-banner-mobile-compact\", path.join(dirname, \"mobile-compact.html\"), );","link":"/design-system/src/components/notification-banner/notification-banner.test.js"},{"title":"","text":"Notification Banner 登録期間が延長されました 閉じる 2024年7月1日 ダミーテキストは、デザインの作成時に使用される仮の文章です。 アクションボタン アクションボタン","link":"/design-system/src/components/notification-banner/info-2.html"},{"title":"","text":"Notification Banner 登録手続きは全て完了しました 閉じる 2024年7月1日 ダミーテキストは、デザインの作成時に使用される仮の文章です。 アクションボタン アクションボタン","link":"/design-system/src/components/notification-banner/success.html"},{"title":"","text":"Notification Banner 偽SNSアカウントにご注意ください 閉じる 2024年7月1日 ダミーテキストは、デザインの作成時に使用される仮の文章です。 アクションボタン アクションボタン","link":"/design-system/src/components/notification-banner/warning.html"},{"title":"","text":".dads-search-box { display: flex; gap: calc(16 / 16 * 1rem); color: var(--color-neutral-solid-gray-900); font-weight: normal; font-size: calc(16 / 16 * 1rem); line-height: 1; font-family: var(--font-family-sans); letter-spacing: 0.02em; } .dads-search-box__fields { position: relative; z-index: 0; display: flex; flex-grow: 1; } .dads-search-box__select { position: relative; display: flex; flex-shrink: 0; } .dads-search-box__select > span { position: absolute; top: calc(50% - 1.25rem); left: calc(17 / 16 * 1rem); color: var(--color-neutral-solid-gray-700); pointer-events: none; z-index: 2; } .dads-search-box__select > select { appearance: none; display: flex; align-items: center; overflow: hidden; box-sizing: border-box; width: calc(160 / 16 * 1rem); border-radius: calc(8 / 16 * 1rem) 0 0 calc(8 / 16 * 1rem); border: 1px solid var(--color-neutral-solid-gray-600); background-color: var(--color-neutral-solid-gray-50); padding-top: calc(20 / 16 * 1rem); padding-right: calc(40 / 16 * 1rem); padding-bottom: 0; padding-left: calc(16 / 16 * 1rem); color: var(--color-neutral-solid-gray-900); font: inherit; font-size: calc(17 / 16 * 1rem); line-height: 1; letter-spacing: 0.02em; white-space: nowrap; text-overflow: ellipsis; } @supports (appearance: base-select) { .dads-search-box__select > select { appearance: base-select; } .dads-search-box__select > select::picker-icon { display: none; } .dads-search-box__select > select::picker(select) { appearance: base-select; border: 1px solid var(--color-neutral-solid-gray-420); box-shadow: var(--elevation-1); padding: calc(16 / 16 * 1rem) 0; } } .dads-search-box__select > svg { position: absolute; top: 0; right: calc(16 / 16 * 1rem); bottom: 0; z-index: 1; margin-top: auto; margin-bottom: auto; display: flex; align-items: center; width: calc(16 / 16 * 1rem); height: calc(16 / 16 * 1rem); pointer-events: none; } .dads-search-box__select > select:focus-visible { position: relative; z-index: 1; outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } @media (hover: hover) { .dads-search-box__select > select:hover { border-color: var(--color-neutral-black); } } .dads-search-box__select option { display: flex; align-items: center; box-sizing: border-box; min-height: calc(44 / 16 * 1rem); padding: calc(10 / 16 * 1rem) calc(16 / 16 * 1rem); color: var(--color-neutral-solid-gray-900); } .dads-search-box__select option::checkmark { display: none; } @media (hover: hover) { .dads-search-box__select option:hover { background-color: var(--color-neutral-solid-gray-50); text-decoration: underline; text-decoration-thickness: calc(1 / 16 * 1rem); text-underline-offset: calc(3 / 16 * 1rem); } } .dads-search-box__select option:checked { font-weight: bold; background-color: var(--color-primitive-blue-100); color: var(--color-primitive-blue-1000); } @media (hover: hover) { .dads-search-box__select option:checked:hover { background-color: var(--color-primitive-blue-50); color: var(--color-primitive-blue-900); } } .dads-search-box__select option:focus-visible { border-radius: 0; outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(-4 / 16 * 1rem); box-shadow: none; } .dads-search-box__select option:not(:checked):focus-visible { background-color: var(--color-primitive-yellow-300); } .dads-search-box__select option:checked:focus-visible { box-shadow: inset 0 0 0 calc(6 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-search-box__input { flex-grow: 1; position: relative; display: flex; } .dads-search-box__input > svg { position: absolute; top: 0; bottom: 0; left: calc(16 / 16 * 1rem); z-index: 1; margin: auto 0; width: calc(24 / 16 * 1rem); height: calc(24 / 16 * 1rem); color: var(--color-neutral-solid-gray-600); pointer-events: none; } @media (forced-colors: active) { .dads-search-box__input > svg { color: CanvasText; } } .dads-search-box__input > input { flex-grow: 1; box-sizing: border-box; width: 8rem; border: 1px solid var(--color-neutral-solid-gray-600); border-radius: calc(8 / 16 * 1rem); background-color: var(--color-neutral-white); padding-top: calc(12 / 16 * 1rem); padding-right: calc(16 / 16 * 1rem); padding-bottom: calc(12 / 16 * 1rem); padding-left: calc(48 / 16 * 1rem); color: inherit; font: inherit; } .dads-search-box__input:not(:first-child) > input { margin-left: calc(-1 / 16 * 1rem); border-top-left-radius: 0; border-bottom-left-radius: 0; } @media (hover: hover) { .dads-search-box__input > input:hover { border-color: var(--color-neutral-black); } } .dads-search-box__input > input::-webkit-search-cancel-button { display: none; } .dads-search-box__input > input::placeholder { color: var(--color-neutral-solid-gray-600); } .dads-search-box__input > input:focus-visible { position: relative; outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-search-box .dads-button { cursor: pointer; }","link":"/design-system/src/components/search-box/search-box.css"},{"title":"","text":"import path from \"node:path\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt(\"search-box-playground\", path.join(dirname, \"playground.html\"));","link":"/design-system/src/components/search-box/search-box.test.js"},{"title":"","text":"Resource List 健康診断 2025年度 受診日：2025/04/30 健康診断 2024年度 受診日：2024/11/24 健康診断 2023年度 受診日：2023/10/13 給与明細 2025年10月分 支給日：2025/11/14 給与明細 2025年9月分 支給日：2025/10/15 給与明細 2025年8月分 支給日：2025/9/15 デジ田 太郎 taro-dejita@example.com 招待中 デジ山 ひかり hikari-dejiyama@example.com 出而足 長一郎 choichiro-dejitaru@example.com クレジットカード払い おすすめ Visa、Master、JCB対応 銀行振込 入金確認後の商品発送となります。振り込み手数料はお客様負担となります。 コンビニ決済 入金確認後の商品発送となります。全国のコンビニで利用可能です。","link":"/design-system/src/components/resource-list/multiple-items.html"},{"title":"","text":"import path from \"node:path\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt(\"playground\", path.join(dirname, \"playground.html\")); resetCssVrt(\"with-control\", path.join(dirname, \"with-control.html\"));","link":"/design-system/src/components/resource-list/resource-list.test.js"},{"title":"","text":"Search Box 検索対象 すべて 画像 ファイル 地図 動画 検索 検索","link":"/design-system/src/components/search-box/playground.html"},{"title":"","text":"Resource List リストタイトル ラベル サポートテキスト サブラベル","link":"/design-system/src/components/resource-list/with-control.html"},{"title":"","text":"Select 選択してください 選択肢1 選択肢2 選択肢3 ＊エラーテキストが入ります。","link":"/design-system/src/components/select/playground.html"},{"title":"","text":".dads-resource-list { display: flex; align-items: center; background: var(--color-neutral-white); color: var(--color-neutral-solid-gray-800); font-family: var(--font-family-sans); overflow-wrap: anywhere; --_border-color: var(--color-neutral-solid-gray-420); --_padding-block: calc(16 / 16 * 1rem); --_padding-inline: calc(16 / 16 * 1rem); } .dads-resource-list[data-style=\"list\"] { border: 1px solid transparent; border-bottom-color: var(--_border-color); } .dads-resource-list[data-style=\"frame\"] { border-radius: calc(16 / 16 * 1rem); border: 1px solid var(--_border-color); } .dads-resource-list:has(:checked:enabled) { background: var(--color-primitive-blue-50); --_border-color: var(--color-neutral-solid-gray-500); } .dads-resource-list[data-interaction=\"whole\"]:has(:disabled) { background: var(--color-neutral-solid-gray-50); color: var(--color-neutral-solid-gray-420); } .dads-resource-list[data-style=\"list\"]:has(:disabled) { border-bottom-color: var(--color-neutral-solid-gray-300); } .dads-resource-list[data-style=\"frame\"]:has(:disabled) { border-color: var(--color-neutral-solid-gray-300); } .dads-resource-list__body { position: relative; z-index: 0; display: flex; flex-grow: 1; align-items: center; gap: calc(16 / 16 * 1rem); outline-offset: calc(-1 / 16 * 1rem); border-radius: inherit; padding: var(--_padding-block) var(--_padding-inline); color: inherit; text-decoration: none; } .dads-resource-list__body:not(:last-child) { border-top-right-radius: 0; border-bottom-right-radius: 0; } @media (hover: hover) { .dads-resource-list__body:any-link:hover, .dads-resource-list[data-interaction=\"whole\"] .dads-resource-list__body:has(:enabled):hover:not(:focus-visible) { outline: calc(2 / 16 * 1rem) solid var(--color-neutral-black); background: var(--color-neutral-solid-gray-50); } } .dads-resource-list__body:any-link:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-resource-list__body > * { flex-shrink: 0; } .dads-resource-list__body .dads-checkbox, .dads-resource-list__body .dads-radio { align-self: stretch; margin: calc(-1 * var(--_padding-block)) calc(-1 * var(--_padding-block)); margin-right: 0; padding: var(--_padding-block) var(--_padding-inline); padding-right: 0; align-items: center; } .dads-resource-list__contents { width: 0; display: flex; flex-grow: 1; flex-shrink: 1; flex-direction: column; gap: calc(4 / 16 * 1rem); font-weight: normal; font-size: calc(16 / 16 * 1rem); line-height: 1.3; letter-spacing: 0; } .dads-resource-list__contents > * { max-width: 100%; } .dads-resource-list__label { order: -1; } .dads-resource-list__label > * { margin: 0; } .dads-resource-list__title { margin: 0; color: var(--color-neutral-solid-gray-900); font-weight: bold; font-size: calc(20 / 16 * 1rem); line-height: 1.5; letter-spacing: 0.02em; } .dads-resource-list[data-interaction=\"whole\"]:has(:disabled) .dads-resource-list__title { color: inherit; } .dads-resource-list__body:any-link .dads-resource-list__title, .dads-resource-list__title a { color: var(--color-primitive-blue-1000); text-decoration: underline; text-decoration-thickness: calc(1 / 16 * 1rem); text-underline-offset: calc(3 / 16 * 1rem); } .dads-resource-list__title a, .dads-resource-list__title label { isolation: isolate; margin-top: calc(-8 / 16 * 1rem); margin-bottom: calc(-8 / 16 * 1rem); display: block; padding-top: calc(8 / 16 * 1rem); padding-bottom: calc(8 / 16 * 1rem); } .dads-resource-list[data-interaction=\"whole\"] .dads-resource-list__title label::before { position: absolute; inset: 0; z-index: 1; border-radius: inherit; content: \"\"; } @media (hover: hover) { .dads-resource-list__body:any-link:hover .dads-resource-list__title, .dads-resource-list__title a:hover { color: var(--color-primitive-blue-900); text-decoration-thickness: calc(3 / 16 * 1rem); } } .dads-resource-list__body:any-link:active .dads-resource-list__title, .dads-resource-list__title a:active { color: var(--color-primitive-orange-800); text-decoration-thickness: calc(1 / 16 * 1rem); } .dads-resource-list__title a:focus-visible { margin-top: 0; margin-bottom: 0; outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); border-radius: calc(4 / 16 * 1rem); background-color: var(--color-primitive-yellow-300); padding-top: 0; padding-bottom: 0; box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-resource-list__support > * { margin: 0; } .dads-resource-list__sub { flex-shrink: 0; font-weight: normal; font-size: calc(16 / 16 * 1rem); line-height: 1.3; letter-spacing: 0; } .dads-resource-list__sub > * { margin: 0; } .dads-resource-list__action { flex-shrink: 0; align-self: stretch; border-top-right-radius: inherit; border-bottom-right-radius: inherit; } .dads-resource-list__action-button { width: calc(44 / 16 * 1rem); height: 100%; display: flex; justify-content: center; align-items: center; border: 0; border-radius: inherit; background: transparent; padding: 0; color: inherit; } @media (hover: hover) { .dads-resource-list__action-button:enabled:hover { outline: calc(2 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(-1 / 16 * 1rem); background: var(--color-neutral-solid-gray-50); } } .dads-resource-list__action-button:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(-3 / 16 * 1rem); background: var(--color-primitive-yellow-300); box-shadow: none; }","link":"/design-system/src/components/resource-list/resource-list.css"},{"title":"","text":"Resource List リストタイトル ラベル サポートテキスト サブラベル","link":"/design-system/src/components/resource-list/playground.html"},{"title":"","text":"import path from \"node:path\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt(\"select-playground\", path.join(dirname, \"playground.html\")); resetCssVrt( \"select-with-form-control-label\", path.join(dirname, \"with-form-control-label.html\"), );","link":"/design-system/src/components/select/select.test.js"},{"title":"","text":"Select 東京23区 ※必須 該当する区を選択してください。 選択してください 足立区 荒川区 板橋区 江戸川区 ＊エラーテキストが入ります。","link":"/design-system/src/components/select/with-form-control-label.html"},{"title":"","text":"Table ラベル ラベル ラベル ラベル ラベル ラベル データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ","link":"/design-system/src/components/table/border-on-row-and-column.html"},{"title":"","text":"Table ラベル ラベル ラベル ラベル ラベル ラベル データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ","link":"/design-system/src/components/table/condensed-table.html"},{"title":"","text":"Table データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ","link":"/design-system/src/components/table/first-column-as-header-cell.html"},{"title":"","text":"Table ラベル ラベル ラベル ラベル ラベル データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ","link":"/design-system/src/components/table/first-row-and-column-as-header-cell.html"},{"title":"","text":"Table ラベル ラベル ラベル ラベル ラベル ラベル データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ","link":"/design-system/src/components/table/first-row-as-header-cell.html"},{"title":"","text":"Table ラベル ラベル ラベル ラベル ラベル ラベル データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ","link":"/design-system/src/components/table/highlight-hovered-row.html"},{"title":"","text":".dads-select { display: block; color: var(--color-neutral-solid-gray-800); font-weight: normal; font-size: calc(16 / 16 * 1rem); line-height: 1.7; font-family: var(--font-family-sans); letter-spacing: 0.02em; } .dads-select__control { position: relative; display: block; width: fit-content; } .dads-select__select { vertical-align: middle; box-sizing: border-box; border-radius: calc(8 / 16 * 1rem); border: 1px solid var(--color-neutral-solid-gray-600); background-color: var(--color-neutral-white); padding-right: calc(40 / 16 * 1rem); padding-left: calc(16 / 16 * 1rem); color: inherit; font: inherit; line-height: 1; letter-spacing: inherit; appearance: none; } .dads-select__select[data-size=\"sm\"] { height: calc(40 / 16 * 1rem); } .dads-select__select[data-size=\"md\"] { height: calc(48 / 16 * 1rem); } .dads-select__select[data-size=\"lg\"] { height: calc(56 / 16 * 1rem); } .dads-select__select:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } @media (hover: hover) { .dads-select__select:hover { border-color: var(--color-neutral-black); } } .dads-select__select:is(:user-invalid, [aria-invalid=\"true\"]) { border-color: var(--color-semantic-error-1); } @media (hover: hover) { .dads-select__select:is(:user-invalid, [aria-invalid=\"true\"]):hover { border-color: var(--color-primitive-red-1000); } } .dads-select__select:is(:disabled, [aria-disabled=\"true\"]), .dads-select__select:is(:disabled, [aria-disabled=\"true\"]):hover { border: 1px solid var(--color-neutral-solid-gray-300); background-color: var(--color-neutral-solid-gray-50); color: var(--color-neutral-solid-gray-420); } @media (forced-colors: active) { .dads-select__select { color: ButtonText; border-color: ButtonText; } .dads-select__select[aria-disabled=\"true\"], .dads-select__select[aria-disabled=\"true\"]:hover { border-color: GrayText; color: GrayText; } } .dads-select__chevron { pointer-events: none; position: absolute; top: 0; right: calc(16 / 16 * 1rem); bottom: 0; margin-top: auto; margin-bottom: auto; width: calc(16 / 16 * 1rem); height: calc(16 / 16 * 1rem); } .dads-select__select:disabled + .dads-select__chevron { color: var(--color-neutral-solid-gray-420); } @media (forced-colors: active) { .dads-select__chevron { color: ButtonText; } .dads-select__select:disabled + .dads-select__chevron { color: GrayText; } } .dads-select__error-text { margin: calc(8 / 16 * 1rem) 0 0 0; display: block; color: var(--color-semantic-error-1); }","link":"/design-system/src/components/select/select.css"},{"title":"","text":"Table データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ","link":"/design-system/src/components/table/plain.html"},{"title":"","text":"Table ラベル ラベル ラベル ラベル データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ","link":"/design-system/src/components/table/playground.html"},{"title":"","text":"export class ScrollShadow extends HTMLElement { constructor() { super(); this.subscriptions = []; } connectedCallback() { this.setup(); this.setupEventListeners(); this.update(); } disconnectedCallback() { for (const subscription of this.subscriptions) subscription.remove(); this.subscriptions = []; this.teardown(); } setup() { Object.assign(this.style, { position: \"relative\", marginRight: \"calc(var(--scroll-shadow-padding) * -1)\", marginLeft: \"calc(var(--scroll-shadow-padding) * -1)\", display: \"flex\", overflowX: \"auto\", paddingRight: \"var(--scroll-shadow-padding)\", paddingBottom: \"calc(8 / 16 * 1rem)\", paddingLeft: \"var(--scroll-shadow-padding)\", }); this.tabIndex = 0; const commonShadowStyles = ` position: sticky; top: 0; bottom: 0; flex-shrink: 0; width: calc(24 / 16 * 1rem); transition: opacity 0.3s ease; opacity: 0; pointer-events: none;`; this.insertAdjacentHTML( \"afterbegin\", ``, ); this.insertAdjacentHTML( \"beforeend\", ``, ); } teardown() { this.removeAttribute(\"tabindex\"); this.querySelector(\".dads-scroll-shadow__left\")?.remove(); this.querySelector(\".dads-scroll-shadow__right\")?.remove(); } setupEventListeners() { this.subscriptions.push( subscribe(this, \"scroll\", () => this.update()), subscribe(window, \"resize\", () => this.update()), ); } update() { if (this.leftShadow) { this.leftShadow.style.opacity = this.hasLeftShadow ? \"1\" : \"0\"; } if (this.rightShadow) { this.rightShadow.style.opacity = this.hasRightShadow ? \"1\" : \"0\"; } } get leftShadow() { return this.querySelector(\".dads-scroll-shadow__left\"); } get rightShadow() { return this.querySelector(\".dads-scroll-shadow__right\"); } get hasLeftShadow() { const paddingValue = this.getPaddingValue(); return this.scrollLeft > paddingValue; } get hasRightShadow() { const paddingValue = this.getPaddingValue(); return this.scrollLeft + this.clientWidth < this.scrollWidth - paddingValue; } getPaddingValue() { return resolveVarPx(this, \"--scroll-shadow-padding\"); } } function subscribe(el, ...args) { el.addEventListener(...args); return { remove: () => el.removeEventListener(...args) }; } function resolveVarPx(targetEl, varName) { const probe = document.createElement(\"div\"); probe.style.cssText = ` position:absolute; visibility:hidden; width:var(${varName}); `; targetEl.appendChild(probe); const px = parseFloat(getComputedStyle(probe).width); probe.remove(); return px; } customElements.define(\"dads-scroll-shadow\", ScrollShadow);","link":"/design-system/src/components/table/scroll-shadow.js"},{"title":"","text":"Table タイトル 状態 コメント数 記事タイトル1 公開中 10 記事タイトル2 下書き 0 記事タイトル3 非公開 3 document.querySelectorAll(\"[data-js-indeterminate-example]\").forEach((el) => { const checkAll = el.querySelector(\"[data-js-check-all]\"); const checks = [...el.querySelectorAll(\"[data-js-check]\")]; function checkOrUncheckAll(e) { const checked = e.target.checked; checks.forEach((check) => check.checked = checked); } function updateCheckAll() { const allChecked = checks.every((check) => check.checked); const noneChecked = checks.every((check) => !check.checked); checkAll.checked = allChecked; checkAll.indeterminate = !allChecked && !noneChecked; } checkAll.addEventListener(\"change\", checkOrUncheckAll); checks.forEach((check) => check.addEventListener(\"change\", updateCheckAll)); updateCheckAll(); });","link":"/design-system/src/components/table/selectable-table.html"},{"title":"","text":"Table ラベル ラベル ラベル ラベル ラベル データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ const SORT_ICONS = { none: 'M17 18.11L21.27 14L22 14.7L16.5 20L11 14.7L11.73 14L16 18.12V4H17V18.12ZM8 5.88L12.27 10L13 9.3L7.5 4L2 9.3L2.73 10L7 5.88V20H8V5.88Z', ascending: 'M17 18.12L21.27 14L22 14.7L16.5 20L11 14.7L11.73 14L16 18.12V4H17V18.12ZM14 8.92L11.73 11L9 8.52V20H6V8.52L3.27 11L1 8.93L7.5 3L14 8.93Z', descending: 'M7 5.88L2.73 10L2 9.3L7.5 4L13 9.3L12.27 10L8 5.88V20H7V5.88ZM10 15.08L12.27 13L15 15.48V4H18V15.48L20.73 13L23 15.07L16.5 21L10 15.07Z' }; class SortableTable { constructor(tableElement) { this.table = tableElement; this.sortHeaders = this.table.querySelectorAll('[data-js-sort-header]'); this.sortButtons = this.table.querySelectorAll('[data-js-sort]'); this.sortStates = this.initializeSortStates(); this.init(); } init() { this.sortButtons.forEach((button, index) => { button.addEventListener('click', (event) => { event.preventDefault(); this.handleSortClick(index); }); }); this.updateHeaderStates(); } initializeSortStates() { const states = {}; this.sortHeaders.forEach((header, index) => { const currentSort = header.getAttribute('aria-sort'); if (currentSort && currentSort !== 'none') { states[index] = currentSort; } }); return states; } updateSortIcon(button, sortState) { const path = button.querySelector('path'); if (path) { path.setAttribute('d', SORT_ICONS[sortState || 'none']); } } updateHeaderStates() { this.sortHeaders.forEach((header, index) => { const sortState = this.sortStates[index] || 'none'; header.setAttribute('aria-sort', sortState); this.updateSortIcon(this.sortButtons[index], sortState); }); } handleSortClick(columnIndex) { const currentSort = this.sortStates[columnIndex]; this.sortStates = {}; this.sortStates[columnIndex] = currentSort === 'ascending' ? 'descending' : 'ascending'; this.updateHeaderStates(); } } document.querySelectorAll('[data-js-sortable-table]').forEach((tableElement) => { new SortableTable(tableElement); });","link":"/design-system/src/components/table/sortable-header-dense.html"},{"title":"","text":"Table ラベル ラベル ラベル ラベル ラベル データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ const SORT_ICONS = { none: 'M17 18.11L21.27 14L22 14.7L16.5 20L11 14.7L11.73 14L16 18.12V4H17V18.12ZM8 5.88L12.27 10L13 9.3L7.5 4L2 9.3L2.73 10L7 5.88V20H8V5.88Z', ascending: 'M17 18.12L21.27 14L22 14.7L16.5 20L11 14.7L11.73 14L16 18.12V4H17V18.12ZM14 8.92L11.73 11L9 8.52V20H6V8.52L3.27 11L1 8.93L7.5 3L14 8.93Z', descending: 'M7 5.88L2.73 10L2 9.3L7.5 4L13 9.3L12.27 10L8 5.88V20H7V5.88ZM10 15.08L12.27 13L15 15.48V4H18V15.48L20.73 13L23 15.07L16.5 21L10 15.07Z' }; class SortableTable { constructor(tableElement) { this.table = tableElement; this.sortHeaders = this.table.querySelectorAll('[data-js-sort-header]'); this.sortButtons = this.table.querySelectorAll('[data-js-sort]'); this.sortStates = this.initializeSortStates(); this.init(); } init() { this.sortButtons.forEach((button, index) => { button.addEventListener('click', (event) => { event.preventDefault(); this.handleSortClick(index); }); }); this.updateHeaderStates(); } initializeSortStates() { const states = {}; this.sortHeaders.forEach((header, index) => { const currentSort = header.getAttribute('aria-sort'); if (currentSort && currentSort !== 'none') { states[index] = currentSort; } }); return states; } updateSortIcon(button, sortState) { const path = button.querySelector('path'); if (path) { path.setAttribute('d', SORT_ICONS[sortState || 'none']); } } updateHeaderStates() { this.sortHeaders.forEach((header, index) => { const sortState = this.sortStates[index] || 'none'; header.setAttribute('aria-sort', sortState); this.updateSortIcon(this.sortButtons[index], sortState); }); } handleSortClick(columnIndex) { const currentSort = this.sortStates[columnIndex]; this.sortStates = {}; this.sortStates[columnIndex] = currentSort === 'ascending' ? 'descending' : 'ascending'; this.updateHeaderStates(); } } document.querySelectorAll('[data-js-sortable-table]').forEach((tableElement) => { new SortableTable(tableElement); });","link":"/design-system/src/components/table/sortable-header.html"},{"title":"","text":"Table 代表者名 電話番号 住所 東京本社 山田太郎 03-1234-5678 東京都新宿区1-2-3 東京本社 営業部 佐藤花子 03-2345-6789 東京都渋谷区4-5-6 東京本社 開発部 鈴木一郎 03-3456-7890 東京都港区7-8-9","link":"/design-system/src/components/table/indented-rows.html"},{"title":"","text":"Table ラベル ラベル ラベル デジタル庁 データ データ データ データ データ デジタル庁 デジタル庁デザインシステム データ データ","link":"/design-system/src/components/table/linked-text-in-cell.html"},{"title":"","text":"Table ラベル ラベル ラベル ラベル ラベル ラベル データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ","link":"/design-system/src/components/table/stripe-table.html"},{"title":"","text":"Table 項目 例 説明 チャネルの種類 オンラインポータル、電話サポート、メール窓口、情報パンフ、動画案内、SNSアカウント、イベント告知、FAQページ 市民は自分に適した手段で情報取得やサービス利用が可能で、行政も効果的なコミュニケーションとサポートを提供できます プロバイダー 光ファイバー、DSL、ケーブル、ワイヤレスなど ユーザーは異なるプロバイダータイプから、自分のニーズに合った高速インターネット接続を選択できます サービスを提供する地域 りんご区 みかん区 ぶどう区 いちご区 なし区 特有のニーズに応えながら、高品質かつ効率的なサポートを目指しています。地元のコミュニティと密接に連携し、信頼性とアクセシビリティを大切にしています。 チャネルアイコン テレビ、ラジオ、スマートフォン、パソコン、ニュース、ゲーム、料理、アート、音楽、カメラ これらのアイコンは利用者が興味を持ちそうなチャンネルを素早く特定し、アクセスしやすくするのに役立ちます。","link":"/design-system/src/components/table/overflow-on-mobile.html"},{"title":"","text":".dads-table { --_border-color: var(--color-neutral-solid-gray-420); --_padding: calc(20 / 16 * 1rem) calc(16 / 16 * 1rem); margin: 0; box-sizing: border-box; display: flex; flex-direction: column; align-items: flex-start; row-gap: calc(16 / 16 * 1rem); color: var(--color-neutral-solid-gray-800); font-weight: normal; font-size: calc(16 / 16 * 1rem); line-height: 1.7; font-family: var(--font-family-sans); letter-spacing: 0.02em; } .dads-table[data-size=\"dense\"] { --_padding: calc(12 / 16 * 1rem) calc(16 / 16 * 1rem); line-height: 1.3; } .dads-table__caption { font-weight: bold; font-size: calc(17 / 16 * 1rem); } .dads-table__table { border-collapse: collapse; } .dads-table__table :is(td, th) { padding: var(--_padding); text-align: left; vertical-align: baseline; } .dads-table__table th { font-weight: bold; } .dads-table__col-header { --_border-color: var(--color-neutral-solid-gray-500); background-color: var(--color-neutral-solid-gray-100); color: var(--color-neutral-solid-gray-900); } .dads-table__row-header { --_border-color: var(--color-neutral-solid-gray-500); background-color: var(--color-neutral-solid-gray-100); color: var(--color-neutral-solid-gray-900); } /* Stripe */ .dads-table[data-row-stripe] { --_border-color: var(--color-neutral-solid-gray-500); } .dads-table[data-row-stripe] tr:nth-child(even) { background-color: var(--color-neutral-solid-gray-50); } /* Hover highlight */ .dads-table[data-row-hover-highlight] { --_border-color: var(--color-neutral-solid-gray-500); } @media (hover: hover) { .dads-table[data-row-hover-highlight] tr:hover { background-color: var(--color-primitive-blue-50); } } /* With checkbox */ .dads-table[data-selectable] { --_border-color: var(--color-neutral-solid-gray-500); } .dads-table[data-selectable] tr:has(:checked) { background-color: var(--color-primitive-blue-100); } @supports (selector(:has(.x))) { .dads-table td:has(.dads-checkbox:only-child, .dads-radio:only-child), .dads-table th:has(.dads-checkbox:only-child, .dads-radio:only-child) { position: relative; box-sizing: border-box; width: calc(40 / 16 * 1rem); padding: 0; } .dads-table td > :is(.dads-checkbox:only-child, .dads-radio:only-child), .dads-table th > :is(.dads-checkbox:only-child, .dads-radio:only-child) { position: absolute; inset: 0; display: grid; justify-content: center; width: auto; padding-top: calc(10 / 16 * 1rem); } } /* Sort and action */ .dads-table__sort-header { --_border-color: var(--color-neutral-solid-gray-500); background-color: var(--color-neutral-solid-gray-100); padding: calc(12 / 16 * 1rem) calc(16 / 16 * 1rem); color: var(--color-neutral-solid-gray-900); } .dads-table[data-size=\"dense\"] .dads-table__sort-header { padding-top: 0; padding-bottom: 0; } .dads-table__sort-inner { display: flex; align-items: start; justify-content: space-between; column-gap: calc(4 / 16 * 1rem); } .dads-table__sort-label { display: flex; align-items: start; gap: calc(4 / 16 * 1rem); padding-top: calc(8 / 16 * 1rem); padding-bottom: calc(8 / 16 * 1rem); } .dads-table[data-size=\"dense\"] .dads-table__sort-label { padding-top: calc(11 / 16 * 1rem); padding-bottom: calc(11 / 16 * 1rem); } .dads-table__sort-button { display: inline-flex; align-items: start; column-gap: calc(4 / 16 * 1rem); border: 0; background-color: transparent; padding: 0; color: inherit; text-align: left; font: inherit; letter-spacing: inherit; text-decoration: underline; text-underline-offset: calc(3 / 16 * 1rem); } .dads-table__sort-button:hover { text-decoration-thickness: calc(3 / 16 * 1rem); } .dads-table__sort-button:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); border-radius: calc(4 / 16 * 1rem); background-color: var(--color-primitive-yellow-300); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-table__sort-icon { flex-shrink: 0; padding-top: calc(2 / 16 * 1rem); } .dads-table[data-size=\"dense\"] .dads-table__sort-icon { margin-top: calc(-2 / 16 * 1rem); padding-top: 0; } .dads-table__sort-svg { display: block; width: calc(24 / 16 * 1rem); height: calc(24 / 16 * 1rem); } .dads-table__action { margin-right: calc(-16 / 16 * 1rem); display: flex; flex-shrink: 0; align-items: center; justify-content: center; width: calc(44 / 16 * 1rem); height: calc(44 / 16 * 1rem); border-radius: calc(4 / 16 * 1rem); border: 0; background-color: transparent; padding: 0; color: inherit; } .dads-table__action:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); border-radius: calc(4 / 16 * 1rem); background-color: var(--color-primitive-yellow-300); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-table__action-svg { display: block; width: calc(24 / 16 * 1rem); height: calc(24 / 16 * 1rem); } /* Utilities */ .dads-table [data-width=\"full\"] { width: 100%; } .dads-table [data-layout=\"fixed\"] { table-layout: fixed; } .dads-table [data-cell-border=\"\"] :where(td, th) { border: 1px solid var(--_border-color); } .dads-table [data-cell-border~=\"top\"] :where(td, th) { border-top: 1px solid var(--_border-color); } .dads-table [data-cell-border~=\"right\"] :where(td, th) { border-right: 1px solid var(--_border-color); } .dads-table [data-cell-border~=\"bottom\"] :where(td, th) { border-bottom: 1px solid var(--_border-color); } .dads-table [data-cell-border~=\"left\"] :where(td, th) { border-left: 1px solid var(--_border-color); } /* Header cell's black border should take precedence over [data-cell-border] */ :last-of-type > .dads-table__col-header, :last-of-type > .dads-table__sort-header { border-bottom: 1px solid var(--color-neutral-black); } .dads-table__row-header:last-of-type { border-right: 1px solid var(--color-neutral-black); } .dads-table [data-border=\"\"] { border: 1px solid var(--_border-color); } .dads-table [data-border~=\"top\"] { border-top: 1px solid var(--_border-color); } .dads-table [data-border~=\"right\"] { border-right: 1px solid var(--_border-color); } .dads-table [data-border~=\"bottom\"] { border-bottom: 1px solid var(--_border-color); } .dads-table [data-border~=\"left\"] { border-left: 1px solid var(--_border-color); } .dads-table [data-border=\"hidden\"] { border-style: hidden; } .dads-table [data-border~=\"top-hidden\"] { border-top-style: hidden; } .dads-table [data-border~=\"right-hidden\"] { border-right-style: hidden; } .dads-table [data-border~=\"bottom-hidden\"] { border-bottom-style: hidden; } .dads-table [data-border~=\"left-hidden\"] { border-left-style: hidden; } .dads-table [data-bg=\"white\"] { background-color: var(--color-neutral-white); } .dads-table [data-bg=\"solid-gray-50\"] { --_border-color: var(--color-neutral-solid-gray-500); background-color: var(--color-neutral-solid-gray-50); } .dads-table [data-bg=\"solid-gray-100\"] { --_border-color: var(--color-neutral-solid-gray-500); background-color: var(--color-neutral-solid-gray-100); } .dads-table [data-bg=\"transparent\"] { background-color: transparent; }","link":"/design-system/src/components/table/table.css"},{"title":"","text":"Table 親ラベル 子ラベル データ データ データ データ 子ラベル データ データ データ データ 親ラベル 子ラベル データ データ データ データ 子ラベル データ データ データ データ","link":"/design-system/src/components/table/table-header-with-rowspan.html"},{"title":"","text":"Table 親ラベル 親ラベル 子ラベル 子ラベル 子ラベル 子ラベル 子ラベル 子ラベル データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ","link":"/design-system/src/components/table/table-header-with-colspan.html"},{"title":"","text":"import path from \"node:path\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt(\"table-playground\", path.join(dirname, \"playground.html\")); resetCssVrt(\"table-condensed\", path.join(dirname, \"condensed-table.html\")); resetCssVrt( \"table-sortable-header\", path.join(dirname, \"sortable-header.html\"), ); resetCssVrt(\"table-scrollable\", path.join(dirname, \"overflow-on-mobile.html\"));","link":"/design-system/src/components/table/table.test.js"},{"title":"","text":"Table 表1: テーブルキャプション ラベル ラベル ラベル ラベル ラベル ラベル データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ データ","link":"/design-system/src/components/table/with-caption.html"},{"title":"","text":"Step Navigation 全3ステップ中、1ステップ目まで到達済み ステップ 1 ステップのタイトル ステップの説明が入ります。 ステップ 1 ステップタイトル ステップの説明が入ります。 ステップ 1 完了 ステップタイトル ステップの説明が入ります。 ステップ 1 編集中 ステップタイトル ステップの説明が入ります。 ステップ 1 エラー ステップタイトル ステップの説明が入ります。 ステップ 1 スキップされました ステップタイトル ステップの説明が入ります。","link":"/design-system/src/components/step-navigation/playground-single.html"},{"title":"","text":"Step Navigation body > * + * { margin-top: 6rem; } 全{total}ステップ中、{reached}ステップ目まで到達済み ステップ 1 ステップのタイトル ステップの説明が入ります。 const horizontal = document.querySelector('.dads-step-navigation'); const small = horizontal.cloneNode(true); small.setAttribute('data-size', 'small'); document.body.appendChild(small); const vertical = horizontal.cloneNode(true); vertical.setAttribute('data-orientation', 'vertical'); document.body.appendChild(vertical); const verticalSmall = horizontal.cloneNode(true); verticalSmall.setAttribute('data-orientation', 'vertical'); verticalSmall.setAttribute('data-size', 'small'); document.body.appendChild(verticalSmall);","link":"/design-system/src/components/step-navigation/playground-full.html"},{"title":"","text":".dads-step-navigation { color: var(--color-neutral-solid-gray-800); font-weight: normal; font-size: calc(16 / 16 * 1rem); font-family: var(--font-family-sans); line-height: 1.7; letter-spacing: 0.02em; overflow-wrap: anywhere; } .dads-step-navigation[data-size=\"normal\"] { --_number-size: calc(44 / 16 * 1rem); --_number-margin: calc(4 / 16 * 1rem); --_outline-width: calc(2 / 16 * 1rem); --_title-margin: calc(24 / 16 * 1rem); --_description-margin: calc(8 / 16 * 1rem); } .dads-step-navigation[data-size=\"small\"] { --_number-size: calc(32 / 16 * 1rem); --_number-margin: calc(3 / 16 * 1rem); --_outline-width: calc(1 / 16 * 1rem); --_title-margin: calc(16 / 16 * 1rem); --_description-margin: calc(4 / 16 * 1rem); } .dads-step-navigation > ul { margin: 0; padding: 0; list-style-type: none; } .dads-step-navigation__step { position: relative; box-sizing: border-box; } .dads-step-navigation__step::before, .dads-step-navigation__step::after { position: absolute; z-index: -1; content: \"\"; } .dads-step-navigation__step[data-first]::before { display: none; } .dads-step-navigation__step[data-last]::after { display: none; } .dads-step-navigation__header { display: block; border: 0; background: none; padding: 0; color: inherit; font: inherit; text-wrap: pretty; } .dads-step-navigation__header:any-link, .dads-step-navigation__header:enabled { text-decoration: underline; text-decoration-thickness: calc(1 / 16 * 1rem); text-underline-offset: calc(3 / 16 * 1rem); } @media (hover: hover) { .dads-step-navigation__header:any-link:hover, .dads-step-navigation__header:enabled:hover { text-decoration-thickness: calc(3 / 16 * 1rem); cursor: pointer; } } .dads-step-navigation__header:focus-visible { border-radius: 0; outline: 0; box-shadow: none; } .dads-step-navigation__number { position: relative; display: grid; place-content: center; margin: calc(4 / 16 * 1rem); box-sizing: border-box; width: fit-content; height: var(--_number-size); min-width: var(--_number-size); border: 2px solid; border-radius: 50%; background-color: var(--color-neutral-white); padding: 0 calc(2 / 16 * 1rem) calc(2 / 16 * 1rem); font-weight: bold; font-size: calc(20 / 16 * 1rem); line-height: 1.5; letter-spacing: 0.02em; text-decoration: inherit; text-decoration-thickness: inherit; } .dads-step-navigation[data-size=\"small\"] .dads-step-navigation__number { margin: calc(3 / 16 * 1rem); border-width: 1px; font-size: calc(16 / 16 * 1rem); } .dads-step-navigation__step[data-state=\"reached\"] .dads-step-navigation__number { background-color: var(--color-neutral-solid-gray-800); color: var(--color-neutral-white); border-color: var(--color-neutral-solid-gray-800); } .dads-step-navigation__step[data-state=\"completed\"] .dads-step-navigation__number { background-color: var(--color-neutral-solid-gray-50); } .dads-step-navigation__step[data-state=\"error\"] .dads-step-navigation__number { color: var(--color-semantic-error-1); } .dads-step-navigation__step[data-state=\"skipped\"] .dads-step-navigation__number { border-width: 1px; border-style: dashed; } .dads-step-navigation__step[aria-current] .dads-step-navigation__number { outline: var(--_outline-width) solid var(--color-neutral-solid-gray-800); outline-offset: calc(2 / 16 * 1rem); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-neutral-white); } @media (forced-colors: active) { .dads-step-navigation__step[data-state=\"reached\"] .dads-step-navigation__number { background-color: CanvasText; color: Canvas; forced-color-adjust: none; } .dads-step-navigation__step[data-state=\"completed\"] .dads-step-navigation__state-icon circle { fill: CanvasText; } .dads-step-navigation__step[data-state=\"completed\"] .dads-step-navigation__state-icon path { fill: Canvas; } .dads-step-navigation__step[data-state=\"editing\"] .dads-step-navigation__state-icon path { fill: CanvasText; } .dads-step-navigation__step[data-state=\"error\"] .dads-step-navigation__state-icon path { fill: CanvasText; } } .dads-step-navigation__header:focus-visible .dads-step-navigation__number { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-step-navigation__state-icon { position: absolute; top: calc(-10 / 16 * 1rem); left: calc(50% + calc(6 / 16 * 1rem)); border-radius: 50%; background-color: var(--color-neutral-white); } .dads-step-navigation[data-size=\"small\"] .dads-step-navigation__state-icon { top: calc(-9 / 16 * 1rem); left: calc(50% + calc(4 / 16 * 1rem)); } .dads-step-navigation__state-icon > svg { display: block; max-width: none; } .dads-step-navigation[data-size=\"small\"] .dads-step-navigation__state-icon > svg { width: calc(20 / 16 * 1rem); height: calc(20 / 16 * 1rem); } .dads-step-navigation__state-label { position: absolute; inset: calc(100% + calc(8 / 16 * 1rem)) -100% 0; margin: 0 auto; width: 4em; height: 1.2em; background-color: var(--color-neutral-white); font-weight: normal; font-size: calc(14 / 16 * 1rem); line-height: 1.2; letter-spacing: 0; text-align: center; } .dads-step-navigation__title { display: block; font-weight: bold; font-size: calc(18 / 16 * 1rem); line-height: 1.6; letter-spacing: 0.02em; text-decoration-thickness: inherit; } .dads-step-navigation[data-size=\"small\"] .dads-step-navigation__title { font-weight: bold; font-size: calc(16 / 16 * 1rem); line-height: 1.7; letter-spacing: 0.02em; } .dads-step-navigation__description { margin: var(--_description-margin) 0 0; } /* Orientations */ .dads-step-navigation[data-orientation=\"horizontal\"] { overflow-x: auto; padding-top: calc(6 / 16 * 1rem); padding-bottom: calc(6 / 16 * 1rem); } .dads-step-navigation[data-orientation=\"horizontal\"] > ul { display: flex; } .dads-step-navigation[data-orientation=\"vertical\"] > ul { display: flex; flex-direction: column; } .dads-step-navigation[data-orientation=\"horizontal\"] .dads-step-navigation__step { width: calc(var(--_step-width, 320) / 16 * 1rem); min-width: calc(var(--_step-min-width, 160) / 16 * 1rem); padding: 0 calc(16 / 16 * 1rem); } .dads-step-navigation[data-orientation=\"vertical\"] .dads-step-navigation__step { flex: 1; padding-bottom: calc(24 / 16 * 1rem); } .dads-step-navigation[data-orientation=\"vertical\"] .dads-step-navigation__step:last-child { padding-bottom: 0; } .dads-step-navigation[data-orientation=\"horizontal\"] .dads-step-navigation__step::before { top: calc(var(--_number-size) / 2 + var(--_number-margin)); right: 50%; width: 50%; border-bottom: 1px solid; } .dads-step-navigation[data-orientation=\"horizontal\"] .dads-step-navigation__step::after { top: calc(var(--_number-size) / 2 + var(--_number-margin)); left: 50%; width: 50%; border-bottom: 1px solid; } .dads-step-navigation[data-orientation=\"vertical\"] .dads-step-navigation__step::before { left: calc(var(--_number-size) / 2 + var(--_number-margin)); top: 0; height: calc(32 / 16 * 1rem); border-right: 1px solid; } .dads-step-navigation[data-orientation=\"vertical\"] .dads-step-navigation__step::after { left: calc(var(--_number-size) / 2 + var(--_number-margin)); bottom: 0; height: calc(100% - calc(32 / 16 * 1rem)); border-right: 1px solid; } .dads-step-navigation[data-orientation=\"horizontal\"] .dads-step-navigation__header { width: 100%; text-align: center; } .dads-step-navigation[data-orientation=\"vertical\"] .dads-step-navigation__header { position: relative; display: flex; align-items: baseline; column-gap: calc(16 / 16 * 1rem); text-align: left; } .dads-step-navigation[data-orientation=\"horizontal\"] .dads-step-navigation__number { margin-right: auto; margin-left: auto; } .dads-step-navigation[data-orientation=\"vertical\"] .dads-step-navigation__number { flex-shrink: 0; } .dads-step-navigation[data-orientation=\"horizontal\"] .dads-step-navigation__title { margin-top: var(--_title-margin); } .dads-step-navigation[data-orientation=\"vertical\"] .dads-step-navigation__title { padding: calc(var(--_number-size) / 2 + var(--_number-margin) - 0.875rem) 0; } .dads-step-navigation[data-orientation=\"horizontal\"] .dads-step-navigation__description { text-align: center; } .dads-step-navigation[data-orientation=\"vertical\"] .dads-step-navigation__description { margin-top: calc( var(--_description-margin) - (var(--_number-size) / 2 + var(--_number-margin) - 0.875rem) ); padding-left: calc( var(--_number-size) + var(--_number-margin) + var(--_number-margin) + calc(16 / 16 * 1rem) ); }","link":"/design-system/src/components/step-navigation/step-navigation.css"},{"title":"","text":"import path from \"node:path\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt( \"step-navigation-playground-single\", path.join(dirname, \"playground-single.html\"), ); resetCssVrt( \"step-navigation-playground-full\", path.join(dirname, \"playground-full.html\"), );","link":"/design-system/src/components/step-navigation/step-navigation.test.js"},{"title":"","text":"Textarea ＊エラーテキストが入ります。","link":"/design-system/src/components/textarea/playground.html"},{"title":"","text":"Textarea ラベル 編集不可 編集できない理由が入ります。 入力されたテキスト","link":"/design-system/src/components/textarea/readonly.html"},{"title":"","text":".dads-textarea { display: block; color: var(--color-neutral-solid-gray-800); font-weight: normal; font-size: calc(16 / 16 * 1rem); line-height: 1.7; font-family: var(--font-family-sans); letter-spacing: 0.02em; } .dads-textarea__textarea { box-sizing: border-box; max-width: 100%; border: 1px solid var(--color-neutral-solid-gray-600); background-color: var(--color-neutral-white); padding: calc(16 / 16 * 1rem); border-radius: calc(8 / 16 * 1rem); color: var(--color-neutral-solid-gray-900); font: inherit; resize: vertical; } .dads-textarea__textarea:read-only:not(:disabled) { border-style: dashed; } .dads-textarea__textarea:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } @media (hover: hover) { .dads-textarea__textarea:not(:read-only):hover { border-color: var(--color-neutral-black); } } .dads-textarea__textarea:is(:user-invalid, [aria-invalid=\"true\"]) { border-color: var(--color-semantic-error-1); } @media (hover: hover) { .dads-textarea__textarea:is(:user-invalid, [aria-invalid=\"true\"]):hover { border-color: var(--color-primitive-red-1000); } } .dads-textarea__textarea:is(:disabled, [aria-disabled=\"true\"]), .dads-textarea__textarea:is(:disabled, [aria-disabled=\"true\"]):hover { border-color: var(--color-neutral-solid-gray-300); background-color: var(--color-neutral-solid-gray-50); color: var(--color-neutral-solid-gray-420); resize: none; } @media (forced-colors: active) { .dads-textarea__textarea[aria-disabled=\"true\"], .dads-textarea__textarea[aria-disabled=\"true\"]:hover { border-color: GrayText; color: GrayText; } } .dads-textarea__error-text { margin: calc(8 / 16 * 1rem) 0 0 0; display: block; color: var(--color-semantic-error-1); }","link":"/design-system/src/components/textarea/textarea.css"},{"title":"","text":"import path from \"node:path\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt(\"textarea-playground\", path.join(dirname, \"playground.html\")); resetCssVrt( \"textarea-with-form-control-label\", path.join(dirname, \"with-form-control-label.html\"), );","link":"/design-system/src/components/textarea/textarea.test.js"},{"title":"","text":".dads-utility-link:any-link { display: block; width: fit-content; font-weight: normal; font-size: calc(16 / 16 * 1rem); line-height: 1.3; font-family: var(--font-family-sans); letter-spacing: 0; text-decoration: none; text-wrap: pretty; } .dads-utility-link:focus-visible { outline: calc(4 / 16 * 1rem) solid var(--color-neutral-black); outline-offset: calc(2 / 16 * 1rem); border-radius: calc(4 / 16 * 1rem); background-color: var(--color-primitive-yellow-300); box-shadow: 0 0 0 calc(2 / 16 * 1rem) var(--color-primitive-yellow-300); } .dads-utility-link__lead-icon { display: inline-block; width: calc(16 / 16 * 1rem); height: calc(16 / 16 * 1rem); vertical-align: -0.15em; color: var(--color-neutral-solid-gray-900); } .dads-utility-link__label { color: var(--color-neutral-solid-gray-800); text-decoration: underline; text-decoration-thickness: calc(1 / 16 * 1rem); text-underline-offset: calc(3 / 16 * 1rem); } .dads-utility-link:visited .dads-utility-link__label { color: var(--color-neutral-solid-gray-800); } @media (hover: hover) { .dads-utility-link:hover .dads-utility-link__label { color: var(--color-neutral-solid-gray-800); text-decoration-thickness: calc(3 / 16 * 1rem); } } .dads-utility-link:active .dads-utility-link__label { color: var(--color-neutral-solid-gray-800); text-decoration-thickness: calc(1 / 16 * 1rem); } .dads-utility-link__tail-icon { display: inline-block; width: calc(16 / 16 * 1rem); height: calc(16 / 16 * 1rem); vertical-align: -0.15em; color: var(--color-neutral-solid-gray-900); }","link":"/design-system/src/components/utility-link/utility-link.css"},{"title":"","text":"Textarea ラベル ※必須 サポートテキスト ＊エラーテキストが入ります。","link":"/design-system/src/components/textarea/with-form-control-label.html"},{"title":"","text":"Utility Link リンクテキスト リンクテキスト リンクテキスト リンクテキスト","link":"/design-system/src/components/utility-link/multiple.html"},{"title":"","text":"import path from \"node:path\"; import { resetCssVrt } from \"../../../tests/helpers/reset-css-vrt\"; const { dirname } = import.meta; resetCssVrt(\"playground\", path.join(dirname, \"playground.html\"));","link":"/design-system/src/components/utility-link/utility-link.test.js"},{"title":"","text":"Utility Link リンクテキスト","link":"/design-system/src/components/utility-link/playground.html"}]}